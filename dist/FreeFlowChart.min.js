!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a={};a.find=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return},a.throttle=function(e,t,n){var i=void 0,a=void 0,r=function(t,n){a=(new Date).getTime(),e.apply(t,n)},o=function(){var o=void 0,s=(new Date).getTime();if(a){var l=t-(s-a);l<=0||l>t?(i&&(clearTimeout(i),i=null),a=s,o=e.apply(this,arguments)):!i&&n&&(i=setTimeout(r.bind(this,this,arguments),l))}else a=s,o=e.apply(this,arguments);return o};return o.cancel=function(){clearTimeout(i),a=0},o},a.debounce=function(e,t){var n=void 0,i=function(t,i){n=null,e.apply(t,i)},a=function(){var e=[].slice.call(arguments);n&&clearTimeout(n),setTimeout(i.bind(this,e),t)};return a.cancel=function(){clearTimeout(n),n=null},a},a.isObject=function(e){return"object"===(void 0===e?"undefined":i(e))||"function"==typeof e},a.isArray=function(e){return Array.isArray(e)},a.contains=function(e,t){if(!a.isObject(e))return e===t;for(var n in e)if(t===e[n])return!0;return!1},a.containsProp=function(e,t){if(!a.isObject(e))return!1;for(var n in e)if(n===t)return!0;return!1},a.clone=function(e){var t=void 0;if(a.isArray(e))t=[];else{if(!a.isObject(e))return e;t={}}for(var n in e)a.isObject(e[n])?t[n]=a.clone(e[n]):t[n]=e[n];return t},a.properties=function(e){if(!a.isObject(e))return null;var t=[];for(var n in e)t.push(n);return t},t.default=a},function(e,t,n){"use strict";function i(e,t){var n=document.getElementById("draw-layout"),i=(0,d.default)();return{x:e-i.canvasLeft-(i.canvasPadding-n.scrollLeft),y:t-i.canvasTop-(i.canvasPadding-n.scrollTop)}}function a(e,t){var n=(0,c.generalizePoint)(e),i=l(n,2),a=i[0],r=i[1],o=(0,c.generalizeLine)(t),s=l(o,3),u=s[0],d=s[1],h=s[2];return{x:(d*d*a-u*d*r-u*h)/(u*u+d*d),y:(-u*d*a+u*u*r-d*h)/(u*u+d*d)}}function r(e,t,n){var i=(0,c.generalizePoint)(e),a=l(i,2),r=a[0],o=a[1],s=(0,c.generalizePoint)(t),u=l(s,2);return{x:r+(u[0]-r)*n,y:o+(u[1]-o)*n}}function o(e,t){var n=(0,c.generalizeEllipse)(t),i=l(n,4),a=i[0],r=i[1],o=i[2],s=i[3];if(o&&(e-=o),e<-a||e>a)return null;var u=r*Math.sqrt(1-e*e/(a*a));return[u+s,-u+s]}function s(e,t){var n=(0,c.generalizePoint)(e),i=l(n,2),a=i[0],r=i[1],s=(0,c.generalizeEllipse)(t),u=l(s,4),d=u[0],h=u[1],f=u[2],p=u[3];f&&(a-=f),p&&(r-=p);var v=d*d-h*h,y=v*v,g=-2*a*d*d*v,b=r*d*h*(r*d*h)+a*a*d*d*d*d-d*d*v*v,w=2*a*d*d*d*d*v,m=-d*d*d*d*d*d*a*a;0!==y&&(g/=y,b/=y,w/=y,m/=y,y=1);var P=(0,c.calcQuarticEquation)(y,g,b,w,m),x=[];if(P.length>0)for(var S=0;S<P.length;S++){var L=o(P[S],[d,h,0,0]);L&&(x.push({x:P[S],y:L[0]}),x.push({x:P[S],y:L[1]}))}for(var k=null,D=1/0,_=void 0,E=0;E<x.length;E++)(_=(x[E].x-a)*(x[E].x-a)+(x[E].y-r)*(x[E].y-r))<D&&(k=x[E],D=_);return k?{x:k.x+f,y:k.y+p}:null}Object.defineProperty(t,"__esModule",{value:!0}),t.calcPointToEllipseClosestPoint=t.calcPointOnLine=t.calcPointToLineFoot=t.calcPositionInCanvas=void 0;var l=function(){function e(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=n(7),d=function(e){return e&&e.__esModule?e:{default:e}}(u),c=n(8);t.calcPositionInCanvas=i,t.calcPointToLineFoot=a,t.calcPointOnLine=r,t.calcPointToEllipseClosestPoint=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(3),o=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(o),l=0,u=function(){function e(t,n,a,o,u,d,c,h){i(this,e),this.id="shape"+l++,this.el=t,this.canvas=t.getElementsByTagName("canvas")[0],this.shapeText=t.getElementsByClassName("shape-text")[0],this.context=this.canvas.getContext("2d"),this.type=n,this.left=a,this.top=o;var f=(0,r.getDefaultSetting)(this.type);this.shapeName=f.shapeName,void 0!==u&&null!==u&&void 0!==d&&null!==d?(this.width=u,this.height=d):(this.width=f.width,this.height=f.height),this.drawStyle=c||s.default.clone(r.drawingDefaultSetting),this.textStyle=h||s.default.clone(r.textDefaultSetting),this.padding=r.defaultPadding,this.relativeLines=[],this.init()}return a(e,[{key:"destruct",value:function(){this.remove(),this.callLinesToDetach()}},{key:"init",value:function(){this.el.style.width=this.width+"px",this.el.style.height=this.height+"px",this.canvas.width=this.width,this.canvas.height=this.height,this.setTextareaStyle()}},{key:"append",value:function(){var e=document.getElementById("designer_canvas"),t=document.getElementById("shape_controls");e.insertBefore(this.el,t)}},{key:"remove",value:function(){document.getElementById("designer_canvas").removeChild(this.el)}},{key:"setPosition",value:function(e,t){this.left=e,this.top=t,this.el.style.left=this.left+"px",this.el.style.top=this.top+"px"}},{key:"setSize",value:function(e,t){this.canvas.width=this.el.width=this.width=e,this.el.style.width=this.canvas.style.width=e+"px",this.canvas.height=this.el.height=this.height=t,this.el.style.height=this.canvas.style.height=t+"px"}},{key:"setDrawStyle",value:function(e){e.lineCap="round",e.lineJoin="round",e.fillStyle=this.drawStyle.fillStyle,e.strokeStyle=this.drawStyle.strokeStyle,e.lineWidth=this.drawStyle.lineWidth,e.setLineDash(this.drawStyle.lineDash)}},{key:"setLineDash",value:function(e){this.lineDash=e,this.setDrawStyle()}},{key:"addLine",value:function(e, t, n, i){this.relativeLines.push({line:e,type:t,referPosition:n,referPercent:i})}},{key:"getLineData",value:function(e){for(var t=0; t<this.relativeLines.length; t++)if(e===this.relativeLines[t].line)return this.relativeLines[t]}},{key:"deleteLine",value:function(e){for(var t=0; t<this.relativeLines.length; t++)if(e===this.relativeLines[t].line)return this.relativeLines.splice(t,1)[0]}},{key:"callLinesToDetach",value:function(){for(var e=0; e<this.relativeLines.length; e++)"src"===this.relativeLines[e].type?this.relativeLines[e].line.src.shape=null:this.relativeLines[e].line.dest.shape=null}},{key:"setTextareaStyle",value:function(){if(this.shapeText)for(var e in this.textStyle)this.shapeText.style[e]=this.textStyle[e]}},{key:"resetTextareaSingleStyle",value:function(e, t){s.default.containsProp(this.textStyle,e)&&(this.textStyle[e]=t,this.shapeText.style[e]=t)}},{key:"getTextareaStyle",value:function(){}},{key:"getAllStyle",value:function(){var e={};for(var t in this.textStyle)e[t]=this.textStyle[t];for(var n in this.drawStyle)e[n]=this.drawStyle[n];return e}}]),e}();t.default=u},function(e, t, n){"use strict";function i(e){switch(e){case"process":return s;case"decision":return l;case"terminator":return u;case"storedData":return d;case"line":return c;default:return o}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPadding=t.textDefaultSetting=t.drawingDefaultSetting=t.getDefaultSetting=void 0;var a=n(6),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o={width:120,height:90},s={width:120,height:90,shapeName:"流程"},l={width:110,height:90,shapeName:"判定"},u={width:120,height:70,shapeName:"开始/结束"},d={width:120,height:90,shapeName:"数据库"},c={linkerType:"straight",arrowType:"basic"},h={fillStyle:r.default.defaultFillStyle,strokeStyle:r.default.defaultStrokeStyle,lineWidth:2,lineDash:[]},f={fontWeight:"normal",fontStyle:"normal",textDecoration:"none",fontFamily:"Arial",fontSize:"x-normal",color:r.default.textDefaultColor};t.getDefaultSetting=i,t.drawingDefaultSetting=h,t.textDefaultSetting=f,t.defaultPadding=10},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simplyToolTypes=t.toolsGroup=t.tools=void 0;var i=n(3),a={undo:{hint:"撤销",faClass:"fa-undo",styleName:null,styleValue:null},redo:{hint:"重做",faClass:"fa-repeat",styleName:null,styleValue:null},bold:{hint:"加粗",faClass:"fa-bold",styleName:"fontWeight",styleValue:["normal","bold"]},italic:{hint:"斜体",faClass:"fa-italic",styleName:"fontStyle",styleValue:["normal","italic"]},underline:{hint:"下划线",faClass:"fa-underline",styleName:"textDecoration",styleValue:["none","underline"]},fontFamily:{hint:"字体",faClass:"fa-font",styleName:"fontFamily",styleValue:["Arial","Sans"]},fontSize:{hint:"文字大小",faClass:"fa-text-height",styleName:"fontSize",styleValue:["x-small","x-normal","x-large"]},fontColor:{hint:"文字颜色",faClass:"fa-pencil",styleName:"color",styleValue:[i.textDefaultSetting.color]},fillStyle:{hint:"填充颜色",faClass:"fa-square",styleName:"fillStyle",styleValue:[i.drawingDefaultSetting.fillStyle]},strokeStyle:{hint:"线条颜色",faClass:"fa-paint-brush",styleName:"strokeStyle",styleValue:[i.drawingDefaultSetting.strokeStyle]}},r=[["undo","redo"],["bold","italic","underline"],["fontFamily","fontSize","fontColor"],["fillStyle","strokeStyle","lineWidth","lineDash"],["linkerType","arrowType"]],o=["undo","redo","bold","italic","underline"];t.tools=a,t.toolsGroup=r,t.simplyToolTypes=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){switch(e){case"process":return o.default;case"decision":return l.default;case"terminator":return d.default;case"storeData":return h.default;case"line":return p.default}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),o=i(r),s=n(22),l=i(s),u=n(9),d=i(u),c=n(23),h=i(c),f=n(24),p=i(f);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={defaultFillStyle:"#FFFFFF",defaultStrokeStyle:"#000000",lineArrowHighlight:"rgba(237, 65, 65, 0.5)",lineBodyHighlight:"rgba(237, 65, 65, 0.15)",textDefaultColor:"rgb(50, 50, 50)"};t.default=i},function(e, t, n){"use strict";function i(){var e=document.getElementById("draw-layout");return{canvasPadding:document.getElementById("draw-container").style.padding.slice(0,-2)-0,canvasLeft:e.offsetLeft,canvasTop:e.offsetTop}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e, t, n){"use strict";function i(e){switch(e.length){case 2:return[e[0],-1,e[1]];case 3:return e;case 4:var t=s(e,4),n=t[0],i=t[1],a=t[2],r=t[3],o=(i-r)/(n-a);return[o,-1,r-o*a]}}function a(e){return u.default.isArray(e)?e:[e.x,e.y]}function r(e){return u.default.isArray(e)?e:[e.a,e.b,e.m,e.n]}function o(e,t,n,i,a){var r=[],o=n*n-3*t*i+12*e*a,s=2*n*n*n-9*t*n*i+27*e*i*i+27*t*t*a-72*e*n*a,l=Math.pow(s+Math.sqrt(-4*o*o*o+s*s),1/3),u=Math.pow(2,1/3)*o/(3*e*l)+l/(3*Math.pow(2,1/3)*e),d=.5*Math.sqrt(t*t/(4*e*e)-2*n/(3*e)+u);if(isNaN(d))return[];var c=t*t/(2*e*e)-4*n/(3*e)-u,h=(-t*t*t/(e*e*e)+4*t*n/(e*e)-8*i/e)/(4*Math.sqrt(t*t/(4*e*e)-2*n/(3*e)+u)),f=.5*Math.sqrt(c-h),p=.5*Math.sqrt(c+h);return isNaN(f)||(r.push(-t/(4*e)-d-f),r.push(-t/(4*e)-d+f)),isNaN(p)||(r.push(-t/(4*e)+d-p),r.push(-t/(4*e)+d+p)),r}Object.defineProperty(t,"__esModule",{value:!0}),t.calcQuarticEquation=t.generalizeEllipse=t.generalizePoint=t.generalizeLine=void 0;var s=function(){function e(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(l);t.generalizeLine=i,t.generalizePoint=a,t.generalizeEllipse=r,t.calcQuarticEquation=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var n=c(e,2),i=n[0],a=n[1],r=c(t,4),o=r[0],s=r[1],l=r[2],u=r[3];return(i-l)*(i-l)/(o*o)+(a-u)*(a-u)/(s*s)<=1}function s(e,t,n,i,a,r,s){var l=r/2*s,u=r/2,d=n+l,c=i,h=a-2*l,f=r;if(e>d&&e<d+h&&t>c&&t<c+f)return!0;var p=[l,u,d,c+f/2],v=[l,u,d+h,c+f/2];return o([e,t],p)||o([e,t],v)}function l(e,t,n){var i=c(e,4),a=i[0],r=i[1],o=i[2],s=i[3];return o+a*Math.sqrt(1-(t-s)*(t-s)/(r*r))*(n?-1:1)}function u(e,t,n,i,a,r){var o=void 0,s=void 0,l=n,u=i,d=n+a,c=i+r;return o=(e-d)/(l-d)-(t-c)/(u-c),l=n+a,u=i,d=n,c=i+r,s=(e-d)/(l-d)-(t-c)/(u-c),o<=0?s<0?"top":"right":s>0?"bottom":"left"}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(){function e(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=n(2),f=function(e){return e&&e.__esModule?e:{default:e}}(h),p=function(e){function t(e, n, r, o, s, l){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,o,s,l))}return r(t,e),d(t,[{key:"draw",value:function(e, t, n){var i=void 0===e||null===e?this.padding:e,a=void 0===t||null===t?this.padding:t,r=void 0===n||null===n?this.context:n,o=(this.height-2*a)/2,s=this.calcWidthHeightRatio(),l=[],u=[];l.x=i/s+o,l.y=a+o,u.x=(this.width-i)/s-o,u.y=a+o,this.setDrawStyle(r),r.beginPath(),r.scale(this.calcWidthHeightRatio(),1),r.arc(l.x,l.y,o,.5*Math.PI,1.5*Math.PI),r.lineTo(u.x,a),r.arc(u.x,u.y,o,1.5*Math.PI,.5*Math.PI),r.closePath(),r.fill(),r.stroke(),r.scale(1/this.calcWidthHeightRatio(),1)}},{key:"drawOnOtherCanvas",value:function(e, t, n){e.translate(t,n),this.draw(null,null,e),e.translate(-t,-n)}},{key:"isPositionInShape",value:function(e, t){return s(e,t,this.left+this.padding,this.top+this.padding,this.width-2*this.padding,this.height-2*this.padding,this.calcWidthHeightRatio())}},{key:"isPositionInLineArea",value:function(e,t,n){if(!n&&this.isPositionInShape(e,t))return!1;var i=7*this.calcWidthHeightRatio(),a=7*(1-this.calcWidthHeightRatio());return s(e,t,this.left+this.padding-i-a,this.top,this.width-2*this.padding+2*(i+a),this.height,this.calcWidthHeightRatio())}},{key:"judgeInShape",value:function(e,t){var n=void 0;return n=this.isPositionInShape(e,t)?"shapeBody":null,n=n||(this.isPositionInLineArea(e,t,!0)?"shapeLineArea":"empty"),{shape:this,type:n}}},{key:"calcWidthHeightRatio",value:function(){var e=this.width-2*this.padding,t=this.height-2*this.padding;return e>=t/2*.6*3?.6:e/3/(t/2)}},{key:"calcInnerShapeData",value:function(){var e=this.top+this.padding,t=this.height-2*this.padding,n=t/2*this.calcWidthHeightRatio(),i=t/2,a=this.left+this.padding+n,r=this.width-2*this.padding-2*n;return[a,e,r,t,[n,i,a,e+t/2],[n,i,a+r,e+t/2]]}},{key:"calcLinePosition",value:function(e,t){var n=void 0,i=void 0,a=this.calcInnerShapeData(),r=c(a,6),o=r[0],s=r[1],u=r[2],d=r[3],h=r[4],f=r[5];switch(e){case"nwCorner":n=o,i=s;break;case"neCorner":n=o+u,i=s;break;case"seCorner":n=o+u,i=s+d;break;case"swCorner":n=o,i=s+d;break;case"top":n=o+u*t,i=s;break;case"right":i=s+d*t,n=l(f,i,!1);break;case"bottom":n=o+u*t,i=s+d;break;case"left":i=s+d*t,n=l(h,i,!0)}return{x:n,y:i}}},{key:"getLineReference",value:function(e,t){var n=null,i=0,a=void 0,r=this.calcInnerShapeData(),o=c(r,6),s=o[0],l=o[1],d=o[2],h=o[3];o[4],o[5];if(this.isPositionInShape(e,t))i=.5,n=u(e,t,s,l,d,h);else{if(!this.isPositionInLineArea(e,t,!0))return null;t<=l?e<=s?n="nwCorner":e>=s+d?n="neCorner":(n="top",i=(e-s)/d):t>=l+h?e<=s?n="swCorner":e>=s+d?n="seCorner":(n="bottom",i=(e-s)/d):(i=(t-l)/h,n=e<s+d/2?"left":"right")}return a=this.calcLinePosition(n,i),{referPosition:n,referPercent:i,position:a}}},{key:"resetLinesPosition",value:function(){for(var e=void 0,t=void 0,n=0;n<this.relativeLines.length;n++)e=this.relativeLines[n],t=this.calcLinePosition(e.referPosition,e.referPercent),"src"===e.type?(e.line.resetSrcPosition(t),e.line.draw()):(e.line.resetDestPosition(t),e.line.draw())}}]),t}(f.default);t.default=p},function(e,t,n){"use strict";function i(e,t,n,i,a){var r=document.createElement("div");r.classList.add("shape-box",e),r.innerHTML='\n    <canvas class="shape-canvas"></canvas>\n    <textarea class="shape-text"></textarea>';var s=new((0,o.default)(e))(r,e,t,n,i,a);return r.setAttribute("shapeid",s.id),s}function a(e,t,n){var i=document.createElement("div");i.classList.add("shape-box","linker-box"),i.innerHTML='\n    <canvas class="shape-canvas"></canvas>\n    <div class="shape-text" contenteditable="true"></div>';var a=new((0,o.default)("line"))(i,e,t,n);return i.setAttribute("shapeid",a.id),a}Object.defineProperty(t,"__esModule",{value:!0}),t.createNewLine=t.createNewShape=void 0;var r=n(5),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.createNewShape=i,t.createNewLine=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(30),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o={shapeController:{el:null,canvas:null,init:function(){this.el=document.getElementById("shape-controls"),this.canvas=document.getElementById("controls-bounding")},reset:function(e,t,n,i){this.el||this.init(),this.el.style.left=e+"px",this.el.style.top=t+"px",this.el.style.width=n+"px",this.el.style.height=i+"px"},setVisibility:function(e){this.el||this.init(),this.el.style.display=e?"block":"none"},draw:function(e,t){return this.el||this.init(),(0,r.default)(this.canvas,e,t,10)}},bezierController:{},styleController:{},activeShape:null,selectedShape:null,lineData:{selectedLine:null,isActive:!1,src:{position:null,referPercent:null,referPosition:null,shape:null},dest:{position:null,referPercent:null,referPosition:null,shape:null},activeLine:null,type:null,needDeleted:!1},getShapeInListById:function(e,t){for(var n=0;n<t.length;n++)if(this.lineData.activeLine!==t[n]&&t[n].id===e)return t[n];return null},deleteShapeInListById:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n].id){var i=t.splice(n,1)[0];return i.destruct(),void(i=null)}},isShapeInListById:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n].id)return!0;return!1},judgeInShapeList:function(e,t,n){n=void 0!==n?n:1;for(var i=t.length,a=n>0?0:i-1,r=void 0;a>=0&&a<i;a+=n)if((!this.lineData.isActive||t[a]!==this.lineData.activeLine)&&t[a].judgeInShape&&(r=t[a].judgeInShape(e.x,e.y),"empty"!==r.type))return r;return null},judgeEventAt:function(e,t){if(!e.target||!e.target.classList)return{shape:null,type:"empty"};var n=void 0,a=void 0,r=(0,i.calcPositionInCanvas)(e.pageX,e.pageY);if(e.target.classList.contains("toolbar-button")||e.target.parentNode.classList&&e.target.parentNode.classList.contains("toolbar-button"))return{shape:null,type:"tool"};if(e.target.classList.contains("shape-controller"))return{shape:this.selectedShape,type:"controller"};if(e.target.parentNode.getAttribute&&"shape-controls"===e.target.parentNode.getAttribute("id"))return n=this.judgeInShapeList(r,t,-1),n?n.topElement=this.shapeController.el:n={topElement:this.shapeController.el},n;if(e.target.parentNode.classList&&e.target.parentNode.classList.contains("shape-box")){var o=e.target.parentNode.getAttribute("shapeid");if(a=this.getShapeInListById(o,t)){if(n=a.judgeInShape(r.x,r.y),n.topElement=a.el,n&&"empty"!==n.type)return n;var s=this.judgeInShapeList(r,t,-1);return s&&(s.topElement=a.el),s||n}return this.judgeInShapeList(r,t,-1)}return{shape:null,type:"empty"}}};t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return e.getAttribute("id").slice(5)}function o(e){var t={};for(var n in e)for(var i in f.tools)f.tools[i].styleName===n&&(t[i]=e[n]);return t}function s(e,t,n){return v||(v=new p(e,t,n))}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(32),d=i(u),c=n(0),h=i(c),f=n(4),p=function(){function e(t,n,i){a(this,e),this.el=t,this.tools=n,this.hint=i,this.init()}return l(e,[{key:"init",value:function(){(0,d.default)(this.el,this.tools,this.hint),this.toolElements=this.el.getElementsByClassName("toolbar-button")}},{key:"setToolbarState",value:function(e){for(var t=void 0,n=o(e),i=0;i<this.toolElements.length;i++)"undo"!==(t=r(this.toolElements[i]))&&"redo"!==t&&(h.default.contains(h.default.properties(n),t)?h.default.contains(f.simplyToolTypes,t)&&(this.toolElements[i].setAttribute("disabled",""),n[t]!==f.tools[t].styleValue[0]&&this.toolElements[i].classList.add("active")):this.toolElements[i].setAttribute("disabled","disabled"))}},{key:"setEmptyToolbarState",value:function(){for(var e=void 0,t=0;t<this.toolElements.length;t++)"undo"!==(e=r(this.toolElements[t]))&&"redo"!==e&&this.toolElements[t].setAttribute("disabled","disabled")}}]),e}(),v=null;t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(14);var s=n(19),l=i(s),u=n(20),d=i(u),c=n(0),h=i(c);!function(e,t){function n(e){var t={};for(var n in e)t[n]=e[n];return t}function i(e,t){return e.hasOwnProperty(t)}function s(e,t){var a=n(e);for(var r in a)a[r]&&"object"===o(a[r])&&!h.default.isArray(a[r])?t[r]&&(a[r]=s(a[r],t[r])):a[r]=i(t,r)?t[r]:a[r];return a}function u(e){var n=void 0;if(!e.el||!(n=t.querySelectorAll(e.el)[0]))return null;var i=s(c,e);if(i.el=n,e.toolbar.el&&(n=t.querySelectorAll(e.toolbar.el)[0])){i.toolbar.el=n;for(var a=i.toolbar.tools,r=0;r<a.length;r++)a[r]=a[r].toLowerCase().trim()}return i}var c={el:null,shapes:["process","decision","terminator","storeData"],toolbar:{el:null,tools:["undo","redo","bold","italic","underline","fontName","fontSize","fontColor","fillStyle","strokeStyle","lineWidth","lineDash","linkerType","arrowType"],hint:!0}},f=function(){function e(t){if(a(this,e),this.instanceSetting=u(t),!this.instanceSetting)return{};this.shapeList=[],this.init()}return r(e,[{key:"init",value:function(){(0,d.default)(this.instanceSetting,this.shapeList)}},{key:"generateImage",value:function(){return(0,l.default)(this.shapeList)}}]),e}(),p=function(){return function(e){var t=new f(e);return t.init||(console.log("Invalid options!"),t=null),t}}();e.FreeFlowChart=p}(window,document)},function(e,t,n){var i=n(15);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0};a.transform=void 0;n(17)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(16)(void 0),t.push([e.i,".fff-draw-main {\n  width: 100%;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none; }\n  .fff-draw-main #draw-components {\n    width: 160px;\n    position: absolute; }\n    .fff-draw-main #draw-components .component-box {\n      cursor: pointer;\n      width: 30px;\n      height: 30px; }\n  .fff-draw-main #draw-layout {\n    background: #b6b6b6;\n    margin-left: 160px;\n    height: 800px;\n    overflow: scroll; }\n    .fff-draw-main #draw-layout #draw-container {\n      position: relative;\n      padding: 1000px;\n      width: 3250px;\n      height: 3500px;\n      overflow: hidden; }\n      .fff-draw-main #draw-layout #draw-container #designer_canvas {\n        width: 100%;\n        height: 100%;\n        position: relative; }\n        .fff-draw-main #draw-layout #draw-container #designer_canvas #canvas-background {\n          width: 1250px;\n          height: 1500px;\n          background: ghostwhite;\n          z-index: 0; }\n        .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box {\n          z-index: 1;\n          cursor: move;\n          position: absolute;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none; }\n          .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box .shape-canvas {\n            width: 100%;\n            height: 100%; }\n          .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box .shape-text {\n            text-align: center;\n            overflow: hidden;\n            cursor: move;\n            border: none;\n            background: inherit;\n            resize: none;\n            max-width: calc(100% - 26px);\n            top: 50%;\n            left: 50%;\n            position: absolute;\n            -webkit-transform: translateX(-50%) translateY(-50%);\n            -moz-transform: translateX(-50%) translateY(-50%);\n            -ms-transform: translateX(-50%) translateY(-50%);\n            transform: translateX(-50%) translateY(-50%); }\n            .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box .shape-text:focus {\n              outline: -webkit-focus-ring-color auto 5px; }\n        .fff-draw-main #draw-layout #draw-container #designer_canvas .decision .shape-text {\n          max-width: calc(50% - 10px); }\n        .fff-draw-main #draw-layout #draw-container #designer_canvas .linker-box {\n          cursor: default;\n          z-index: 2; }\n        .fff-draw-main #draw-layout #draw-container #designer_canvas #shape-controls {\n          cursor: move;\n          height: 70px;\n          z-index: 3;\n          display: none;\n          position: absolute; }\n          .fff-draw-main #draw-layout #draw-container #designer_canvas #shape-controls .shape-controller {\n            position: absolute;\n            border: 1px solid #883333;\n            width: 8px;\n            height: 8px;\n            z-index: 1;\n            display: block;\n            background: white; }\n          .fff-draw-main #draw-layout #draw-container #designer_canvas #shape-controls .shape-anchor {\n            position: absolute;\n            border: 1px solid #883333;\n            border-radius: 4px;\n            width: 6px;\n            height: 6px;\n            z-index: 1;\n            display: block;\n            background: white; }\n\n.fff-draw-tools .btn-group > .toolbar-button:first-child {\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n  border-left: 1px solid #cccccc; }\n\n.fff-draw-tools .btn-group > .toolbar-button:last-child {\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px; }\n\n.fff-draw-tools .btn-group {\n  display: inline-block;\n  margin: 10px; }\n  .fff-draw-tools .btn-group .toolbar-button {\n    cursor: pointer;\n    padding: 4px 12px;\n    display: inline-block;\n    border-top: 1px solid #cccccc;\n    border-bottom: 1px solid #cccccc;\n    border-right: 1px solid #cccccc;\n    background-image: linear-gradient(to bottom, #ffffff, #e6e6e6); }\n    .fff-draw-tools .btn-group .toolbar-button:hover {\n      background: #e6e6e6; }\n    .fff-draw-tools .btn-group .toolbar-button:active {\n      -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\n      -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05); }\n    .fff-draw-tools .btn-group .toolbar-button .icon {\n      color: #333333;\n      font-size: 16px; }\n  .fff-draw-tools .btn-group .active {\n    background-image: linear-gradient(to bottom, #5bc0de, #2f96b4); }\n    .fff-draw-tools .btn-group .active:hover {\n      background-image: linear-gradient(to bottom, #5cb6d4, #308caa); }\n    .fff-draw-tools .btn-group .active:active {\n      -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\n      -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05); }\n    .fff-draw-tools .btn-group .active .icon {\n      color: white; }\n  .fff-draw-tools .btn-group .toolbar-button[disabled='disabled'] {\n    background: #e6e6e6;\n    color: #333333;\n    background-image: none;\n    cursor: not-allowed; }\n    .fff-draw-tools .btn-group .toolbar-button[disabled='disabled']:active {\n      -webkit-box-shadow: none;\n      -moz-box-shadow: none;\n      box-shadow: none; }\n    .fff-draw-tools .btn-group .toolbar-button[disabled='disabled'] .icon {\n      color: #868686;\n      cursor: not-allowed; }\n",""])},function(e,t){function n(e,t){var n=e[1]||"",a=e[3];if(!a)return n;if(t&&"function"==typeof btoa){var r=i(a);return[n].concat(a.sources.map(function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"})).concat([r]).join("\n")}return[n].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},a=0;a<this.length;a++){var r=this[a][0];"number"==typeof r&&(i[r]=!0)}for(a=0;a<e.length;a++){var o=e[a];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=p[i.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](i.parts[r]);for(;r<i.parts.length;r++)a.parts.push(d(i.parts[r],t))}else{for(var o=[],r=0;r<i.parts.length;r++)o.push(d(i.parts[r],t));p[i.id]={id:i.id,refs:1,parts:o}}}}function a(e,t){for(var n=[],i={},a=0;a<e.length;a++){var r=e[a],o=t.base?r[0]+t.base:r[0],s=r[1],l=r[2],u=r[3],d={css:s,media:l,sourceMap:u};i[o]?i[o].parts.push(d):n.push(i[o]={id:o,parts:[d]})}return n}function r(e,t){var n=y(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=w[w.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),w.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=y(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,a)}}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=w.indexOf(e);t>=0&&w.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",u(t,e.attrs),r(e,t),t}function l(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",u(t,e.attrs),r(e,t),t}function u(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function d(e,t){var n,i,a,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var u=b++;n=g||(g=s(t)),i=c.bind(null,n,u,!1),a=c.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),i=f.bind(null,n,t),a=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),i=h.bind(null,n),a=function(){o(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}function c(e,t,n,i){var a=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=P(t,a);else{var r=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function h(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t,n){var i=n.css,a=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||r)&&(i=m(i)),a&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var p={},v=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),y=function(e){var t={};return function(n){if(void 0===t[n]){var i=e.call(this,n);if(i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[n]=i}return t[n]}}(function(e){return document.querySelector(e)}),g=null,b=0,w=[],m=n(18);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=v()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=a(e,t);return i(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var s=n[o],l=p[s.id];l.refs--,r.push(l)}if(e){i(a(e,t),t)}for(var o=0;o<r.length;o++){var l=r[o];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete p[l.id]}}}};var P=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a))return e;var r;return r=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"})}},function(e,t,n){"use strict";function i(e){for(var t=1/0,n=-1/0,i=1/0,a=-1/0,r=0;r<e.length;r++)t=e[r].left<t?e[r].left:t,n=e[r].left+e[r].width>n?e[r].left+e[r].width:n,i=e[r].top<i?e[r].top:i,a=e[r].top+e[r].height>a?e[r].top+e[r].height:a;return isFinite(t)&&isFinite(n)&&isFinite(i)&&isFinite(a)?{width:n-t,height:a-i,offsetX:t,offsetY:i}:null}function a(e){if(!e||e.length<=0)return null;var t=i(e);if(!t)return null;var n=document.createElement("canvas");n.width=t.width,n.height=t.height;for(var a=n.getContext("2d"),r=void 0,o=void 0,s=void 0,l=[],u=0;u<e.length;u++)r=e[u],"line"!==r.type?(o=r.left-t.offsetX,s=r.top-t.offsetY,r.drawOnOtherCanvas(a,o,s)):l.push(r);for(var d=0;d<l.length;d++)r=l[d],o=r.left-t.offsetX,s=r.top-t.offsetY,r.drawOnOtherCanvas(a,o,s);var c=new Image;return c.src=n.toDataURL("image/png"),c}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){e.innerHTML=v}function r(e,t){for(var n=e,i="",a=0;a<t.length;a++){i+='<div class="component-box" shapename="'+t[a]+'">\n        <canvas class="component-item" width="30" height="30"></canvas>\n    </div>'}n.innerHTML=i;for(var r=document.getElementsByClassName("component-box"),o=0;o<t.length;o++){var s=t[o];new((0,u.default)(s))(r[o],"process",-1,-1,30,30).draw(2,5)}}function o(e,t,n){var i=(0,h.getEventHandlers)(e,n);return function(){for(var e=0;e<i.length;e++)i[e].call(this,event,t)}}function s(e,t){var n=!!e.toolbar.el;e.el.classList.add("fff-draw-main"),a(e.el),r(document.getElementById("draw-components"),e.shapes),n&&(0,p.default)(e.toolbar.el,e.toolbar.tools,e.toolbar.hint);var i=document.getElementById("canvas-background");(0,c.default)(i);var s=document.getElementById("draw-layout");s.scrollTop=990,s.scrollLeft=990;for(var l=0;l<h.eventList.length;l++){var u=o(h.eventList[l],t,n);window.addEventListener(h.eventList[l],u)}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(5),u=i(l),d=n(26),c=i(d),h=n(27),f=n(12),p=i(f),v='<div class="draw-main">\n    <div id="draw-components">\n    </div>\n    <div id="draw-layout">\n        <div id="draw-container" style="padding:1000px;">\n            <div id="designer_canvas">\n                <canvas id="canvas-background"></canvas>\n                <div id="shape-controls">\n                    <canvas id="controls-bounding" width="120" height="90"></canvas>\n                    <div class="shape-controller n w" resizedir="nw" style="cursor:nw-resize; left:5px; top:5px;"></div>\n                    <div class="shape-controller n e" resizedir="ne" style="cursor:ne-resize; right:5px; top:5px;"></div>\n                    <div class="shape-controller s e" resizedir="se" style="cursor:se-resize; right:5px; bottom:5px;"></div>\n                    <div class="shape-controller s w" resizedir="sw" style="cursor:sw-resize; left:5px; bottom:5px;"></div>\n                    <div class="shape-anchor" style="left:calc(50% - 4px); top:6px;"></div>\n                    <div class="shape-anchor" style="right:6px; top:calc(50% - 4px);"></div>\n                    <div class="shape-anchor" style="left:calc(50% - 4px); bottom:6px;"></div>\n                    <div class="shape-anchor" style="left:6px; top:calc(50% - 4px);"></div>\n                </div>\n                <div id="bezier-controls">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>';t.default=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0; n<t.length; n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t, n, i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),u=function(e){return e&&e.__esModule?e:{default:e}}(l),d=function(e){function t(e, n, r, o, s, l){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,o,s,l))}return r(t,e),s(t,[{key:"draw",value:function(e, t, n){var i=void 0===e||null===e?this.padding:e,a=void 0===t||null===t?this.padding:t,r=void 0===n||null===n?this.context:n;this.setDrawStyle(r),r.fillRect(i,a,this.width-2*i,this.height-2*a),r.beginPath(),r.rect(i,a,this.width-2*i,this.height-2*a),r.stroke()}},{key:"drawOnOtherCanvas",value:function(e, t, n){e.translate(t,n),this.draw(null,null,e),e.translate(-t,-n)}},{key:"isPositionInShape",value:function(e, t){return e>this.left+this.padding&&e<this.left+this.width-this.padding&&t>this.top+this.padding&&t<this.top+this.height-this.padding}},{key:"isPositionInLineArea",value:function(e, t){return!this.isPositionInShape(e,t)&&(e>=this.left&&e<=this.left+this.width&&t>=this.top&&t<=this.top+this.height)}},{key:"judgeInShape",value:function(e,t){var n=void 0;return n=this.isPositionInShape(e,t)?"shapeBody":null,n=n||(this.isPositionInLineArea(e,t)?"shapeLineArea":"empty"),{shape:this,type:n}}},{key:"calcLinePosition",value:function(e,t){var n=void 0,i=void 0,a=this.calcShapePoints();switch(e){case"nwCorner":n=a[0],i=a[1];break;case"neCorner":n=a[2],i=a[3];break;case"seCorner":n=a[4],i=a[5];break;case"swCorner":n=a[6],i=a[7];break;case"up":n=this.left+this.padding+t*(this.width-2*this.padding),i=this.top+this.padding;break;case"down":n=this.left+this.padding+t*(this.width-2*this.padding),i=this.top+this.height-this.padding;break;case"left":n=this.left+this.padding,i=this.top+this.padding+t*(this.height-2*this.padding);break;case"right":n=this.left+this.width-this.padding,i=this.top+this.padding+t*(this.height-2*this.padding)}return{x:n,y:i}}},{key:"calcShapePoints",value:function(){return[this.left+this.padding,this.top+this.padding,this.left+this.width-this.padding,this.top+this.padding,this.left+this.width-this.padding,this.top+this.height-this.padding,this.left+this.padding,this.top+this.height-this.padding]}},{key:"getLineReference",value:function(e,t){var n=null,i=0,a=void 0,r=this.calcShapePoints(),s=o(r,8),l=s[0],u=s[1],d=s[2],c=s[3],h=s[4],f=s[5],p=s[6],v=s[7];if(this.isPositionInLineArea(e,t))t<u?e<l?n="nwCorner":e>d?n="neCorner":(n="up",i=(e-l)/(this.width-2*this.padding)):t>v?e<p?n="swCorner":e>h?n="seCorner":(n="down",i=(e-p)/(this.width-2*this.padding)):e<this.left+this.width/2?(n="left",i=(t-this.top-this.padding)/(this.height-2*this.padding)):(n="right",i=(t-this.top-this.padding)/(this.height-2*this.padding));else{if(!this.isPositionInShape(e,t))return null;i=.5;var y=(e-h)/(l-h)-(t-f)/(u-f),g=(e-p)/(d-p)-(t-v)/(c-v);n=y<=0&&g<=0?"up":y<=0&&g>=0?"right":y>=0&&g>=0?"down":"left"}return a=this.calcLinePosition(n,i),{referPosition:n,referPercent:i,position:a}}},{key:"resetLinesPosition",value:function(){for(var e=void 0,t=void 0,n=0;n<this.relativeLines.length;n++)e=this.relativeLines[n],t=this.calcLinePosition(e.referPosition,e.referPercent),"src"===e.type?(e.line.resetSrcPosition(t),e.line.draw()):(e.line.resetDestPosition(t),e.line.draw())}}]),t}(u.default);t.default=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,n){for(var i=[],a=0;a<4;a++){var r=n[2*a],o=n[2*a+1],s=n[2*(a+1)%8],l=n[2*(a+1)%8+1];i[a]=(e-s)/(r-s)-(t-l)/(o-l)}return i}function s(e,t,n,i){return((0,h.calcPointToLineFoot)([e,t],[n[0],n[1],i[0],i[1]]).x-n[0])/(i[0]-n[0])}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0; n<t.length; n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t, n, i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(2),c=function(e){return e&&e.__esModule?e:{default:e}}(d),h=n(1),f=function(e){function t(e, n, r, o, s, l){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,o,s,l))}return r(t,e),u(t,[{key:"draw",value:function(e, t, n){var i=void 0===e||null===e?this.padding:e,a=void 0===t||null===t?this.padding:t,r=void 0===n||null===n?this.context:n;this.setDrawStyle(r),r.beginPath(),r.moveTo(this.width/2,a),r.lineTo(this.width-i,this.height/2),r.lineTo(this.width/2,this.height-a),r.lineTo(i,this.height/2),r.closePath(),r.fill(),r.stroke()}},{key:"drawOnOtherCanvas",value:function(e, t, n){e.translate(t,n),this.draw(null,null,e),e.translate(-t,-n)}},{key:"isPositionInShape",value:function(e, t){var n=this.calcShapePoints(),i=o(e,t,n);return i[0]>0&&i[1]<0&&i[2]>0&&i[3]<0}},{key:"isPositionInLineArea",value:function(e, t, n){if(!n&&this.isPositionInShape(e,t))return!1;var i=this.calcLineAreaPoints(),a=o(e,t,i);return a[0]>=0&&a[1]<=0&&a[2]>=0&&a[3]<=0}},{key:"judgeInShape",value:function(e,t){var n=void 0;return n=this.isPositionInShape(e,t)?"shapeBody":null,n=n||(this.isPositionInLineArea(e,t,!0)?"shapeLineArea":"empty"),{shape:this,type:n}}},{key:"calcLinePosition",value:function(e,t){var n=void 0,i=void 0,a=void 0,r=this.calcShapePoints();switch(e){case"top":n=r[0],i=r[1];break;case"right":n=r[2],i=r[3];break;case"bottom":n=r[4],i=r[5];break;case"left":n=r[6],i=r[7];break;case"nwBorder":a=(0,h.calcPointOnLine)([r[6],r[7]],[r[0],r[1]],t);break;case"neBorder":a=(0,h.calcPointOnLine)([r[0],r[1]],[r[2],r[3]],t);break;case"seBorder":a=(0,h.calcPointOnLine)([r[2],r[3]],[r[4],r[5]],t);break;case"swBorder":a=(0,h.calcPointOnLine)([r[4],r[5]],[r[6],r[7]],t)}return a||{x:n,y:i}}},{key:"calcShapePoints",value:function(){return[this.left+this.width/2,this.top+this.padding,this.left+this.width-this.padding,this.top+this.height/2,this.left+this.width/2,this.top+this.height-this.padding,this.left+this.padding,this.top+this.height/2]}},{key:"calcLineAreaPoints",value:function(){return[this.left+this.width/2,this.top,this.left+this.width,this.top+this.height/2,this.left+this.width/2,this.top+this.height,this.left,this.top+this.height/2]}},{key:"getLineReference",value:function(e,t){var n=null,i=0,a=void 0,r=this.calcShapePoints(),u=l(r,8),d=u[0],c=u[1],h=u[2],f=u[3],p=u[4],v=u[5],y=u[6],g=u[7];if(this.isPositionInShape(e,t)){var b=(d+h)/2,w=(c+f)/2,m=(h+p)/2,P=(f+v)/2,x=(p+y)/2,S=(v+g)/2,L=(y+d)/2,k=(g+c)/2,D=[];D[0]=(e-x)/(b-x)-(t-S)/(w-S),D[1]=(e-L)/(m-L)-(t-k)/(P-k),n=D[1]>=0?D[0]<=0?"top":"right":D[0]<=0?"left":"bottom"}else{if(!this.isPositionInLineArea(e,t,!0))return null;var _=void 0,E=void 0,C=o(e,t,r);C[0]<=0&&C[3]>=0?n="top":C[0]<=0&&C[1]>=0?n="right":C[2]<=0&&C[1]>=0?n="bottom":C[2]<=0&&C[3]>=0?n="left":(C[0]<=0?(_=[d,c],E=[h,f],n="neBorder"):C[1]>=0?(_=[h,f],E=[p,v],n="seBorder"):C[2]<=0?(_=[p,v],E=[y,g],n="swBorder"):C[3]>=0&&(_=[y,g],E=[d,c],n="nwBorder"),i=s(e,t,_,E))}return a=this.calcLinePosition(n,i),{referPosition:n,referPercent:i,position:a}}},{key:"resetLinesPosition",value:function(){for(var e=void 0,t=void 0,n=0;n<this.relativeLines.length;n++)e=this.relativeLines[n],t=this.calcLinePosition(e.referPosition,e.referPercent),"src"===e.type?(e.line.resetSrcPosition(t),e.line.draw()):(e.line.resetDestPosition(t),e.line.draw())}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(9),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(e, n, r, o, s, l){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,o,s,l))}return r(t,e),o(t,[{key:"draw",value:function(e, t, n){var i=void 0===e||null===e?this.padding:e,a=void 0===t||null===t?this.padding:t,r=void 0===n||null===n?this.context:n,o=(this.height-2*a)/2,s=[],l=[];s.x=i/this.calcWidthHeightRatio()+o,s.y=a+o,l.x=(this.width-i)/this.calcWidthHeightRatio()-o,l.y=a+o,this.setDrawStyle(r),r.beginPath(),r.scale(this.calcWidthHeightRatio(),1),r.arc(s.x,s.y,o,.5*Math.PI,1.5*Math.PI),r.lineTo(l.x,a),r.arc(l.x,l.y,o,1.5*Math.PI,.5*Math.PI),r.closePath(),r.fill(),r.arc(l.x,l.y,o,.5*Math.PI,1.5*Math.PI),r.stroke(),r.scale(1/this.calcWidthHeightRatio(),1)}}]),t}(l.default);t.default=u},function(e, t, n){"use strict";function i(e, t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e, t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(3),s=n(25),l=n(1),u=n(6),d=function(e){return e&&e.__esModule?e:{default:e}}(u),c=0,h=function(){function e(t,n,a,r){i(this,e),this.id="line"+c++,this.el=t,this.canvas=t.getElementsByTagName("canvas")[0],this.shapeText=t.getElementsByClassName("shape-text")[0],this.context=this.canvas.getContext("2d"),this.src=n,this.dest=a,this.type="line",this.width=0,this.height=0,this.left=0,this.top=0,this.padding=o.defaultPadding;var s=(0,o.getDefaultSetting)("line");this.linkerType=s.linkerType,this.arrowType=s.arrowType,this.drawStyle={strokeStyle:o.drawingDefaultSetting.strokeStyle,lineWidth:o.drawingDefaultSetting.lineWidth,lineDash:o.drawingDefaultSetting.lineDash},this.drawBeginPosition={},this.drawEndPosition={},this.bezierControlPoints=[],this.init()}return r(e,[{key:"destruct",value:function(){this.remove(),this.callShapesToDetach()}},{key:"init",value:function(){this.resetCanvas()}},{key:"resetSrcPosition",value:function(e){this.src.position=e,this.resetCanvas()}},{key:"resetDestPosition",value:function(e){this.dest.position=e,this.resetCanvas()}},{key:"resetCanvas",value:function(){switch(this.linkerType){case"straight":var e=Math.abs(this.src.position.x-this.dest.position.x)+2*this.padding,t=Math.abs(this.src.position.y-this.dest.position.y)+2*this.padding;this.canvas.width=this.el.width=this.width=e,this.el.style.width=this.canvas.style.width=e+"px",this.canvas.height=this.el.height=this.height=t,this.el.style.height=this.canvas.style.height=t+"px";var n=void 0,i=void 0;n=this.dest.position.x-this.src.position.x>=0?this.src.position.x-this.padding:this.dest.position.x-this.padding,i=this.dest.position.y-this.src.position.y>=0?this.src.position.y-this.padding:this.dest.position.y-this.padding,this.setPosition(n,i)}}},{key:"resetSrc",value:function(e){this.src=e,this.resetCanvas()}},{key:"resetDest",value:function(e){this.dest=e,this.resetCanvas()}},{key:"setPosition",value:function(e, t){this.left=e,this.top=t,this.el.style.left=e+"px",this.el.style.top=t+"px"}},{key:"append",value:function(){var e=document.getElementById("designer_canvas"),t=document.getElementById("shape_controls");e.insertBefore(this.el,t)}},{key:"remove",value:function(){document.getElementById("designer_canvas").removeChild(this.el)}},{key:"setDrawStyle",value:function(e){e.strokeStyle=this.drawStyle.strokeStyle,e.lineWidth=this.drawStyle.lineWidth,e.setLineDash(this.drawStyle.lineDash)}},{key:"calcDrawingBeginEndPoints",value:function(){this.dest.position.x-this.src.position.x>=0?(this.drawBeginPosition.x=this.padding,this.drawEndPosition.x=this.width-this.padding):(this.drawBeginPosition.x=this.width-this.padding,this.drawEndPosition.x=this.padding),this.dest.position.y-this.src.position.y>=0?(this.drawBeginPosition.y=this.padding,this.drawEndPosition.y=this.height-this.padding):(this.drawBeginPosition.y=this.height-this.padding,this.drawEndPosition.y=this.padding)}},{key:"calcJudgingBeginEndPoints",value:function(){var e=void 0,t=void 0,n=void 0,i=void 0;return this.dest.position.x-this.src.position.x>=0?(e=this.left+this.padding,t=this.left+this.width-this.padding):(e=this.left+this.width-this.padding,t=this.left+this.padding),this.dest.position.y-this.src.position.y>=0?(n=this.top+this.padding,i=this.top+this.height-this.padding):(n=this.top+this.height-this.padding,i=this.top+this.padding),[e,n,t,i]}},{key:"clearCanvas",value:function(){this.canvas.width=this.width}},{key:"calcArrowAngle",value:function(){var e=void 0;switch(this.linkerType){case"straight":var t=this.dest.position.x-this.src.position.x,n=this.dest.position.y-this.src.position.y;e=0===n?t>=0?Math.PI/2:-Math.PI/2:n<0?Math.atan(t/-n):Math.PI-Math.atan(t/n)}return e}},{key:"drawArrow",value:function(e, t){t.translate(this.drawEndPosition.x,this.drawEndPosition.y),t.rotate(e),t.beginPath(),t.moveTo(0,0),t.lineTo(5,14),t.lineTo(-5,14),t.fillStyle="#000000",t.fill(),t.rotate(-e),t.translate(-this.drawEndPosition.x,-this.drawEndPosition.y)}},{key:"drawReferMark",value:function(e, t){var n=void 0;n="src"===e?{x:this.drawBeginPosition.x,y:this.drawBeginPosition.y}:{x:this.drawEndPosition.x,y:this.drawEndPosition.y},t.beginPath(),t.arc(n.x,n.y,this.padding,0,2*Math.PI),t.fillStyle=d.default.lineArrowHighlight,t.fill()}},{key:"drawLineBody",value:function(e){switch(this.linkerType){case"straight":e.beginPath(),e.moveTo(this.drawBeginPosition.x,this.drawBeginPosition.y),e.lineTo(this.drawEndPosition.x,this.drawEndPosition.y),e.stroke();break;case"bezier":e.beginPath(),e.moveTo(this.drawBeginPosition.x,this.drawBeginPosition.y),e.bezierCurveTo(this.bezierControlPoints[0].x,this.bezierControlPoints[0].y,this.bezierControlPoints[1].x,this.bezierControlPoints[1].y,this.drawEndPosition.x,this.drawEndPosition.y),e.stroke(),e.beginPath()}}},{key:"draw",value:function(e, t, n){var i=void 0===n||null===n?this.context:n;i===this.context&&this.clearCanvas(),this.setDrawStyle(i),this.calcDrawingBeginEndPoints(),e&&this.drawReferMark(e,i),this.drawLineBody(i),t&&(i.strokeStyle=d.default.lineBodyHighlight,i.lineWidth=6,this.drawLineBody(i)),this.drawArrow(this.calcArrowAngle(),i)}},{key:"drawOnOtherCanvas",value:function(e, t, n){e.translate(t,n),this.draw(null,!1,e),e.translate(-t,-n)}},{key:"isPointInLineRectangle",value:function(e, t){var n=this.calcJudgingBeginEndPoints(),i=a(n,4),r=i[0],o=i[1],s=i[2],l=i[3],u=r>=s?r:s,d=u===s?r:s,c=o>=l?o:l,h=c===l?o:l;return e<=u+.1&&e>=d-.1&&t<=c+.1&&t>=h-.1}},{key:"isInLine",value:function(e,t,n){if(!n&&this.isInLineEnd(e,t))return!1;var i=this.calcJudgingBeginEndPoints(),r=a(i,4),o=r[0],u=r[1],d=r[2],c=r[3];switch(this.linkerType){case"straight":var h=(0,s.calcPointToLineDistance)([e,t],[o,u,d,c]),f=(0,l.calcPointToLineFoot)([e,t],[o,u,d,c]);return h<=7&&h>=-7&&this.isPointInLineRectangle(f.x,f.y)}}},{key:"isInLineEnd",value:function(e,t){var n=this.calcJudgingBeginEndPoints(),i=a(n,4),r=i[0],o=i[1],l=i[2],u=i[3],d=(0,s.calcPointToPointDistance)([e,t],[r,o]);return(0,s.calcPointToPointDistance)([e,t],[l,u])<=7?"lineDest":d<=7?"lineSrc":null}},{key:"judgeInShape",value:function(e,t){var n=this.isInLineEnd(e,t);return n||(n=this.isInLine(e,t,!0)?"lineBody":"empty"),{shape:this,type:n}}},{key:"callShapesToDetach",value:function(){this.src.shape&&this.src.shape.deleteLine(this),this.dest.shape&&this.dest.shape.deleteLine(this)}}]),e}();t.default=h},function(e,t,n){"use strict";function i(e,t){var n=[e[0],e[1],t[0],t[1]],i=n[0],a=n[1],r=n[2],o=n[3];return Math.sqrt((i-r)*(i-r)+(a-o)*(a-o))}function a(e,t){var n=(0,o.generalizePoint)(e),i=r(n,2),a=i[0],s=i[1],l=(0,o.generalizeLine)(t),u=r(l,3),d=u[0],c=u[1];return(d*a+c*s+u[2])/Math.sqrt(d*d+c*c)}Object.defineProperty(t,"__esModule",{value:!0}),t.calcPointToLineDistance=t.calcPointToPointDistance=void 0;var r=function(){function e(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(8);t.calcPointToPointDistance=i,t.calcPointToLineDistance=a},function(e,t,n){"use strict";function i(e,t,n,i){if(e){var a=e.getContext("2d"),r=t||1250,o=n||1500,s=i||15;e.width=r,e.height=o;var l=Math.ceil(r/s),u=Math.ceil(o/s);a.strokeStyle="#dcdcdc";for(var d=0;d<l;d++)a.beginPath(),a.moveTo(d*s,0),a.lineWidth=d%5==0?2:1,a.lineTo(d*s,o),a.stroke();for(var c=0;c<u;c++)a.beginPath(),a.moveTo(0,c*s),a.lineWidth=c%5==0?2:1,a.lineTo(r,c*s),a.stroke()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function i(e,t){switch(e){case"mousedown":return t?[a.dragNewComponentMouseDown,r.shapeEventOnMouseDown,o.toolbarEventOnMouseDown]:[a.dragNewComponentMouseDown,r.shapeEventOnMouseDown];case"mousemove":return[a.dragNewComponetMouseMove,r.shapeEventOnMouseMove];case"mouseup":return[a.dragNewComponetMouseUp,r.shapeEventOnMouseUp];case"dblclick":return[r.shapeEventOnDblClick];case"keydown":return[r.shapeEventOnKeyDown]}}Object.defineProperty(t,"__esModule",{value:!0}),t.getEventHandlers=t.eventList=void 0;var a=n(28),r=n(29),o=n(31),s=["mousedown","mousemove","mouseup","dblclick","keydown"];t.eventList=s,t.getEventHandlers=i},function(e,t,n){"use strict";function i(e,t){if(e.target.classList.contains("component-item")&&!d){var n=e.target.parentNode.getAttribute("shapename");d=(0,o.createNewShape)(n),d.el.style.position="fixed",d.setPosition(e.clientX-d.width/2,e.clientY-d.height/2),d.draw(),d.append(),c=!0}}function a(e,t){d&&c&&d.setPosition(e.clientX-d.width/2,e.clientY-d.height/2)}function r(e,t){if(c=!1,d&&e.pageX<=(0,u.default)().canvasLeft)d.remove();else if(d){var n=(0,s.calcPositionInCanvas)(e.pageX,e.pageY),i=n.x-d.width/2,a=n.y-d.height/2;d.setPosition(i,a),d.el.style.position="absolute",t.push(d)}d=null}Object.defineProperty(t,"__esModule",{value:!0}),t.dragNewComponetMouseUp=t.dragNewComponetMouseMove=t.dragNewComponentMouseDown=void 0;var o=n(10),s=n(1),l=n(7),u=function(e){return e&&e.__esModule?e:{default:e}}(l),d=null,c=!1;t.dragNewComponentMouseDown=i,t.dragNewComponetMouseMove=a,t.dragNewComponetMouseUp=r},function(e,t,n){"use strict";function i(){f.default.lineData.activeLine=null,f.default.lineData.isActive=!1,f.default.lineData.src={position:null,referPercent:null,referPosition:null,shape:null},f.default.lineData.dest={position:null,referPercent:null,referPosition:null,shape:null},f.default.lineData.needDeleted=!1}function a(e,t,n){if("toSrc"===f.default.lineData.type){var i={shape:e,position:t.position};f.default.lineData.src={shape:e,position:t.position,referPosition:t.referPosition?t.referPosition:null,referPercent:t.referPercent?t.referPercent:null},f.default.lineData.activeLine.resetSrc(i)}else{var a={shape:e,position:t.position};f.default.lineData.dest={shape:e,position:t.position,referPosition:void 0!==t.referPosition?t.referPosition:null,referPercent:void 0!==t.referPercent?t.referPercent:null},f.default.lineData.activeLine.resetDest(a)}f.default.lineData.activeLine.draw(n,!!f.default.lineData.selectedLine)}function r(e,t){var n=f.default.judgeEventAt(e,t);if(!n)return void f.default.shapeController.setVisibility(!1);var i=n.shape,a=n.type,r=(0,d.calcPositionInCanvas)(e.pageX,e.pageY);switch(a){case"lineBody":f.default.lineData.selectedLine&&f.default.lineData.selectedLine.draw(),f.default.lineData.selectedLine=i,i.draw(null,!0),f.default.selectedShape=null,f.default.shapeController.setVisibility(!1);break;case"lineDest":case"lineSrc":f.default.selectedShape=null,f.default.shapeController.setVisibility(!1),f.default.lineData.selectedLine&&f.default.lineData.selectedLine.draw(),f.default.lineData.selectedLine=i,i.draw(null,!0),f.default.lineData.activeLine=i,f.default.lineData.isActive=!0;var o=void 0;i.dest.shape&&(o=i.dest.shape.getLineData(i),f.default.lineData.dest={shape:i.dest.shape,referPosition:o.referPosition,referPercent:o.referPercent,position:i.dest.position}),i.src.shape&&(o=i.src.shape.getLineData(i),f.default.lineData.src={shape:i.src.shape,referPosition:o.referPosition,referPercent:o.referPercent,position:i.src.position}),f.default.lineData.src.position=i.src.position,"lineDest"===a?(i.dest.shape&&i.dest.shape.deleteLine(i),f.default.lineData.type="toDest"):(i.src.shape&&i.src.shape.deleteLine(i),f.default.lineData.type="toSrc");break;case"shapeBody":f.default.shapeController.reset(i.left,i.top,i.width,i.height),f.default.shapeController.setVisibility(!0),f.default.shapeController.draw(i.width,i.height),f.default.activeShape=i,p.x=e.pageX-i.left,p.y=e.pageY-i.top,f.default.lineData.selectedLine&&(f.default.lineData.selectedLine.draw(),f.default.lineData.selectedLine=null),e.preventDefault();break;case"shapeLineArea":var s=i.getLineReference(r.x,r.y);f.default.lineData.src={position:s.position,referPosition:s.referPosition,referPercent:s.referPercent,shape:i},f.default.lineData.isActive=!0,f.default.lineData.type="new",f.default.lineData.needDeleted=!0,f.default.lineData.selectedLine&&(f.default.lineData.selectedLine.draw(),f.default.lineData.selectedLine=null);break;case"controller":v=e.target.getAttribute("resizedir"),y.beginX=e.pageX,y.beginY=e.pageY,y.originWidth=f.default.selectedShape.width,y.originHeight=f.default.selectedShape.height,y.originLeft=f.default.selectedShape.left,y.originTop=f.default.selectedShape.top;break;case"tool":break;case"empty":default:f.default.lineData.selectedLine&&(f.default.lineData.selectedLine.draw(),f.default.lineData.selectedLine=null),f.default.selectedShape=null,f.default.shapeController.setVisibility(!1)}}function o(e,t){if(f.default.lineData.isActive){var n=void 0,i=void 0;if(f.default.lineData.activeLine){f.default.lineData.needDeleted=!1;var r=(0,d.calcPositionInCanvas)(e.pageX,e.pageY),o=f.default.judgeEventAt(e,t);if(!o)return void a(null,{position:r});var s=o.shape;switch(o.type){case"shapeBody":case"shapeLineArea":;if(("toSrc"===f.default.lineData.type?f.default.lineData.dest.shape?f.default.lineData.dest.shape.id:null:f.default.lineData.src.shape?f.default.lineData.src.shape.id:null)===s.id)f.default.lineData.needDeleted=!0,a(null,{position:r});else{var l=s.getLineReference(r.x,r.y);if(!l)return;a(s,l,"toSrc"===f.default.lineData.type?"src":"dest")}break;default:a(null,{position:r})}}else n={shape:f.default.lineData.src.shape,position:f.default.lineData.src.position},i={shape:null,position:(0,d.calcPositionInCanvas)(e.pageX,e.pageY)},f.default.lineData.activeLine=(0,c.createNewLine)(n,i),f.default.lineData.activeLine.draw(),f.default.lineData.activeLine.append(),f.default.lineData.activeLine.el.style.cursor="move"}else if(v){var u=void 0,h=void 0,g=void 0,b=void 0;switch(v){case"nw":u=y.beginX-e.pageX+y.originWidth,h=y.beginY-e.pageY+y.originHeight,u=u>=60?u:60,h=h>=45?h:45,g=u-y.originWidth,b=h-y.originHeight,f.default.selectedShape.setSize(u,h),f.default.selectedShape.setPosition(y.originLeft-g,y.originTop-b),f.default.shapeController.reset(f.default.selectedShape.left,f.default.selectedShape.top,u,h);break;case"ne":u=e.pageX-y.beginX+y.originWidth,h=y.beginY-e.pageY+y.originHeight,u=u>=60?u:60,h=h>=45?h:45,g=u-y.originWidth,b=h-y.originHeight,f.default.selectedShape.setSize(u,h),f.default.selectedShape.setPosition(y.originLeft,y.originTop-b),f.default.shapeController.reset(f.default.selectedShape.left,f.default.selectedShape.top,u,h);break;case"se":u=e.pageX-y.beginX+y.originWidth,h=e.pageY-y.beginY+y.originHeight,u=u>=60?u:60,h=h>=45?h:45,f.default.selectedShape.setSize(u,h),f.default.shapeController.reset(f.default.selectedShape.left,f.default.selectedShape.top,u,h);break;case"sw":u=y.beginX-e.pageX+y.originWidth,h=e.pageY-y.beginY+y.originHeight,u=u>=60?u:60,h=h>=45?h:45,g=u-y.originWidth,b=h-y.originHeight,f.default.selectedShape.setSize(u,h),f.default.selectedShape.setPosition(y.originLeft-g,y.originTop),f.default.shapeController.reset(f.default.selectedShape.left,f.default.selectedShape.top,u,h)}f.default.selectedShape.draw(),f.default.selectedShape.resetLinesPosition(),f.default.shapeController.draw(u,h)}else if(f.default.activeShape){var w=e.pageX-p.x,m=e.pageY-p.y;f.default.activeShape.setPosition(w,m),f.default.shapeController.reset(w,m,f.default.activeShape.width,f.default.activeShape.height),f.default.activeShape.resetLinesPosition()}else{var P=f.default.judgeEventAt(e,t);if(!P)return;var x=P.shape,S=P.topElement||x&&x.el;if(!S)return;switch(P.type){case"lineBody":S.style.cursor="pointer";break;case"lineDest":case"lineSrc":case"shapeBody":S.style.cursor="move";break;case"shapeLineArea":S.style.cursor="crosshair";break;default:S.style.cursor="default"}}}function s(e,t){if(f.default.lineData.isActive){var n=f.default.lineData.activeLine;if(!n)return;switch(f.default.lineData.type){case"new":f.default.lineData.needDeleted?n.destruct():(n.src.shape&&n.src.shape.addLine(n,"src",f.default.lineData.src.referPosition,f.default.lineData.src.referPercent),n.dest.shape&&n.dest.shape.addLine(n,"dest",f.default.lineData.dest.referPosition,f.default.lineData.dest.referPercent),t.push(n));break;case"toDest":n.dest.shape&&n.dest.shape.addLine(n,"dest",f.default.lineData.dest.referPosition,f.default.lineData.dest.referPercent);break;case"toSrc":n.src.shape&&n.src.shape.addLine(n,"src",f.default.lineData.src.referPosition,f.default.lineData.src.referPercent)}n.draw(null,!!f.default.lineData.selectedLine),i()}else f.default.activeShape?(f.default.selectedShape=f.default.activeShape,f.default.activeShape=null):v&&(v=null)}function l(e,t){var n=f.default.judgeEventAt(e,t);if(n)switch(n.type){case"shapeBody":n.shape.shapeText.focus(),document.execCommand("selectAll");break;default:f.default.shapeController.setVisibility(!1)}}function u(e,t){if("Delete"===e.key)if(f.default.selectedShape||f.default.activeShape){var n=f.default.activeShape?f.default.activeShape:f.default.selectedShape,a=!!f.default.activeShape;f.default.shapeController.setVisibility(!1),f.default.deleteShapeInListById(n.id,t),a&&(f.default.activeShape=null),f.default.selectedShape=null}else if(f.default.lineData.isActive||f.default.lineData.selectedLine){var r=f.default.lineData.isActive?f.default.lineData.activeLine:f.default.lineData.selectedLine;f.default.deleteShapeInListById(r.id,t),i()}}Object.defineProperty(t,"__esModule",{value:!0}),t.shapeEventOnKeyDown=t.shapeEventOnDblClick=t.shapeEventOnMouseUp=t.shapeEventOnMouseDown=t.shapeEventOnMouseMove=void 0;var d=n(1),c=n(10),h=n(11),f=function(e){return e&&e.__esModule?e:{default:e}}(h),p={x:0,y:0},v=null,y={beginX:0,beginY:0,originWidth:0,originHeight:0,originLeft:0,originTop:0};t.shapeEventOnMouseMove=o,t.shapeEventOnMouseDown=r,t.shapeEventOnMouseUp=s,t.shapeEventOnDblClick=l,t.shapeEventOnKeyDown=u},function(e,t,n){"use strict";function i(e,t,n,i){if(e){e.width=t,e.height=n;var a=e.getContext("2d");a.strokeStyle="#883333",a.lineWidth=1,a.beginPath(),a.rect(i,i,t-2*i,n-2*i),a.stroke()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return document.getElementById("tool-"+e)}function r(e){var t=e.target,n=t.getAttribute&&t.getAttribute("id")?t.getAttribute("id").slice(5):null;return n||(t=t.parentNode,n=t.getAttribute&&t.getAttribute("id")?t.getAttribute("id").slice(5):null),h.default.contains(h.default.properties(l.tools),n)?n:null}function o(e, t, n){var i=void 0;"disabled"!==t.getAttribute("disabled")&&n&&(t.classList.contains("active")?(i=l.tools[e].styleValue[0],t.classList.remove("active")):(i=l.tools[e].styleValue[1],t.classList.add("active")),n.resetTextareaSingleStyle(l.tools[e].styleName,i))}function s(e, t){var n=r(e);if(n){var i=a(n);switch(n){case"undo":document.execCommand("undo");break;case"redo":document.execCommand("redo");break;case"bold":case"italic":case"underline":o(n,i,d.default.selectedShape)}}else{var s=d.default.activeShape||d.default.selectedShape;s?(0,p.default)().setToolbarState(s.getAllStyle()):(0,p.default)().setEmptyToolbarState()}}Object.defineProperty(t,"__esModule",{value:!0}),t.toolbarEventOnMouseDown=void 0;var l=n(4),u=n(11),d=i(u),c=n(0),h=i(c),f=n(12),p=i(f);t.toolbarEventOnMouseDown=s},function(e,t,n){"use strict";function i(e){return l.default.contains(u.simplyToolTypes,e)?'<div id="tool-'+e+'" \n      class="toolbar-button" \n      hint-data="'+u.tools[e].hint+'"\n      disabled="'+("undo"!==e&&"redo"!==e?"disabled":"")+'">\n      <i class="icon fa '+u.tools[e].faClass+'"></i>\n    </div>':""}function a(e,t){e.classList.add("fff-draw-tools");for(var n="",a=0;a<u.toolsGroup.length;a++){for(var r="",o=0;o<u.toolsGroup[a].length;o++)l.default.contains(t,u.toolsGroup[a][o])&&(r+=i(u.toolsGroup[a][o]));""!==r&&(n+='<div class="btn-group">'+r+"</div>")}e.innerHTML=n}function r(e){}function o(e,t,n){a(e,t),n&&r(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=n(4);t.default=o}]);
//# sourceMappingURL=FreeFlowChart.min.js.map