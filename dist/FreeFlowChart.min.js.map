{"version":3,"sources":["webpack:///FreeFlowChart.min.js","webpack:///webpack/bootstrap be4434774d7d60dc4e19","webpack:///./src/common/util.js","webpack:///./src/core/calculation/calcPosition.js","webpack:///./src/shapes/shape.js","webpack:///./src/shapes/shapeDefaultSetting.js","webpack:///./src/toolbar/toolbarDefaultSetting.js","webpack:///./src/shapes/index.js","webpack:///./src/common/colors.js","webpack:///./src/common/getUIParameters.js","webpack:///./src/core/calculation/common.js","webpack:///./src/shapes/terminator.js","webpack:///./src/core/createNewShape.js","webpack:///./src/core/events/common.js","webpack:///./src/toolbar/toolbar.js","webpack:///./src/index.js","webpack:///./src/style/freeFlowChart.scss?4e42","webpack:///./src/style/freeFlowChart.scss","webpack:///./node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js","webpack:///./node_modules/_style-loader@0.19.0@style-loader/lib/addStyles.js","webpack:///./node_modules/_style-loader@0.19.0@style-loader/lib/urls.js","webpack:///./src/core/generateImage.js","webpack:///./src/init.js","webpack:///./src/shapes/process.js","webpack:///./src/shapes/decision.js","webpack:///./src/shapes/storedData.js","webpack:///./src/shapes/line.js","webpack:///./src/core/calculation/calcDistance.js","webpack:///./src/draw/background.js","webpack:///./src/core/events/index.js","webpack:///./src/core/events/dragNewComponent.js","webpack:///./src/core/events/shapeEvent.js","webpack:///./src/draw/controller.js","webpack:///./src/toolbar/toolbarEvent.js","webpack:///./src/toolbar/toolsUIInit.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","_typeof","Symbol","iterator","obj","constructor","_","find","list","predicate","length","throttle","func","wait","trailing","timeout","previous","later","context","args","Date","getTime","apply","throttled","result","now","remaining","clearTimeout","this","arguments","setTimeout","bind","cancel","debounce","debounced","slice","isObject","isArray","Array","contains","containsProp","prop","clone","properties","props","push","default","calcPositionInCanvas","x","y","drawLayout","document","getElementById","parameters","_getUIParameters2","canvasLeft","canvasPadding","scrollLeft","canvasTop","scrollTop","calcPointToLineFoot","point","line","_generalizePoint","_common","generalizePoint","_generalizePoint2","_slicedToArray","_generalizeLine","generalizeLine","_generalizeLine2","A","B","C","calcPointOnLine","pointA","pointB","percent","_generalizePoint3","_generalizePoint4","x1","y1","_generalizePoint5","_generalizePoint6","calcYofEllipse","ellipse","_generalizeEllipse","generalizeEllipse","_generalizeEllipse2","a","b","Math","sqrt","calcPointToEllipseClosestPoint","_generalizePoint7","_generalizePoint8","x0","y0","_generalizeEllipse3","_generalizeEllipse4","D","E","calcQuarticEquation","possiblePoint","ys","bestPoint","shortestDistance","Infinity","tempDistance","undefined","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","next","done","err","TypeError","_getUIParameters","_classCallCheck","instance","Constructor","_createClass","defineProperties","target","descriptor","writable","key","protoProps","staticProps","_shapeDefaultSetting","_util","_util2","shapeId","Shape","el","type","left","top","width","height","drawStyle","textStyle","id","canvas","getElementsByTagName","shapeText","getElementsByClassName","getContext","temp","getDefaultSetting","shapeName","drawingDefaultSetting","textDefaultSetting","padding","defaultPadding","relativeLines","init","remove","callLinesToDetach","style","setTextareaStyle","parent","sibling","insertBefore","removeChild","lineCap","lineJoin","fillStyle","strokeStyle","lineWidth","setLineDash","lineDash","resetDrawStyle","referPosition","referPercent","splice","src","shape","dest","process","decision","terminator","storedData","basic","_colors","_colors2","linkerType","arrowType","defaultFillStyle","defaultStrokeStyle","fontWeight","fontStyle","textDecoration","fontFamily","fontSize","color","textDefaultColor","simplyToolTypes","toolsGroup","tools","undo","hint","faClass","styleName","styleValue","redo","bold","italic","underline","fontColor","_interopRequireDefault","getShapeByType","_process2","_decision2","_terminator2","_storedData2","_line2","_process","_decision","_terminator","_storedData","_line","colors","lineArrowHightlight","lineBodyHighlight","getUIParameters","canvasLayout","offsetLeft","offsetTop","x2","y2","e","t1","t2","pow","P","Q","isNaN","R","S","T1","T2","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","isPointWithinEllipse","_point","_ellipse","isInTerminalShape","radio","innerLeft","innerTop","innerWidth","innerHeight","ellipseLeft","ellipseRight","calcXOfEllipse","isLeft","_ellipse2","judgeInShapeArea","lineResultA","lineResultB","_shape","_shape2","Terminator","_Shape","getPrototypeOf","paddingHorizontal","paddingVertical","drawContext","horizontal","vertical","radius","calcWidthHeightRatio","centerA","centerB","beginPath","scale","arc","PI","lineTo","closePath","fill","stroke","translate","draw","bodyExcluded","isPositionInShape","deltaA","deltaWidth","isPositionInLineArea","_calcInnerShapeData","calcInnerShapeData","_calcInnerShapeData2","position","_calcInnerShapeData3","_calcInnerShapeData4","calcLinePosition","lineData","resetSrcPosition","resetDestPosition","createNewShape","component","createElement","classList","add","innerHTML","_index2","setAttribute","createNewLine","dist","settings","_index","_calcPosition","_controller","_controller2","eventCommon","shapeController","reset","setVisibility","visibility","display","bezierController","styleController","activeShape","selectedShape","selectedLine","isActive","activeLine","needDeleted","getShapeInListById","shapeList","deleteShapeInListById","destruct","isShapeInListById","judgeInShapeList","dir","index","judgeInShape","judgeEventAt","event","pageX","pageY","parentNode","getAttribute","topElement","resultInList","getToolType","styleToState","state","_toolbarDefaultSetting","getToolbar","toolbar","Toolbar","_toolsUIInit","_toolsUIInit2","toolElements","_generateImage2","_generateImage3","_init2","_init3","window","cloneObject","hasProp","replaceObjectProps","source","createInstanceSetting","params","querySelectorAll","instanceSetting","defaultInstanceSettings","toLowerCase","trim","shapes","FlowChart","options","FreeFlowChart","console","log","content","hmr","transform","locals","cssWithMappingToString","item","useSourceMap","cssMapping","btoa","sourceMapping","toComment","concat","sources","map","sourceRoot","join","sourceMap","unescape","encodeURIComponent","JSON","stringify","toString","mediaQuery","alreadyImportedModules","addStylesToDom","styles","domStyle","stylesInDom","refs","j","parts","addStyle","listToStyles","newStyles","base","css","media","part","insertStyleElement","getElement","insertInto","Error","lastStyleElementInsertedAtTop","stylesInsertedAtTop","insertAt","nextSibling","appendChild","firstChild","before","removeStyleElement","idx","indexOf","createStyleElement","attrs","addAttrs","createLinkElement","link","rel","keys","forEach","update","singleton","styleIndex","singletonCounter","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","updateLink","href","applyToTag","newObj","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","fixUrls","blob","oldSrc","isOldIE","fn","memo","all","atob","selector","styleTarget","HTMLIFrameElement","contentDocument","head","querySelector","DEBUG","newList","mayRemove","textStore","replacement","filter","Boolean","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","unquotedOrigUrl","$1","test","newUrl","calcCanvasSize","minLeft","maxRight","minTop","maxBottom","isFinite","offsetX","offsetY","generateImage","canvasData","lineList","drawOnOtherCanvas","image","Image","toDataURL","createContainer","drawContainerHtml","createComponets","componentGroup","tempHtml","componentItems","curryEventHandlers","eventType","isToolbarEnabled","handlers","_index3","getEventHandlers","_toolbar2","canvasBackground","_background2","eventList","addEventListener","_background","_toolbar","Process","fillRect","rect","points","calcShapePoints","_calcShapePoints","_calcShapePoints2","x3","y3","x4","y4","lineRefer1","lineRefer2","calcBorderLineResult","lineResult","calcPercentOfLine","Decision","moveTo","calcLineAreaPoints","_points","x5","y5","x6","y6","x7","y7","x8","y8","results","StoredData","_Terminator","_calcDistance","lineId","Line","drawBeginPosition","drawEndPosition","bezierControlPoints","callShapesToDetach","resetCanvas","abs","setPosition","angle","atan","rotate","end","bezierCurveTo","referMark","isSelected","clearCanvas","calcDrawingBeginEndPoints","drawReferMark","drawLineBody","drawArrow","calcArrowAngle","_calcJudgingBeginEndP","calcJudgingBeginEndPoints","_calcJudgingBeginEndP2","xBig","xSmall","yBig","ySmall","endExcluded","isInLineEnd","_calcJudgingBeginEndP3","_calcJudgingBeginEndP4","distance","calcPointToLineDistance","foot","isPointInLineRectangle","_calcJudgingBeginEndP5","_calcJudgingBeginEndP6","distanceSrc","calcPointToPointDistance","isInLine","deleteLine","_ref","backgroundDraw","backgroundWidth","backgroundHeight","backgroundSpacing","spacing","countX","ceil","countY","_dragNewComponent","dragNewComponentMouseDown","_shapeEvent","shapeEventOnMouseDown","_toolbarEvent","toolbarEventOnMouseDown","dragNewComponetMouseMove","shapeEventOnMouseMove","dragNewComponetMouseUp","shapeEventOnMouseUp","shapeEventOnDblClick","shapeEventOnKeyDown","currentShape","_createNewShape","clientX","clientY","append","mouseDown","clearLineData","_common2","redrawActiveLine","reference","mark","resetSrc","resetDest","judgeResult","getLineData","clickOffset","preventDefault","lineReference","getLineReference","activeDirection","resizeData","beginX","beginY","originWidth","originHeight","originLeft","originTop","cursor","setSize","resetLinesPosition","addLine","focus","execCommand","controllerDraw","margin","getToolElement","judgeToolType","simpleToolHandler","setTextareaSingleStyle","toolElement","setToolbarState","getAllStyle","setEmptyToolbarState","getToolHtml","createTools","enabledTools","html","btnsHtml","createHint","toolUIInit"],"mappings":"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","file":"FreeFlowChart.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 13);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _ = {};\n\n_.find = function (list, predicate) {\n  var result = void 0;\n  for (var i = 0; i < list.length; i++) {\n    result = predicate(list[i], i, list);\n    if (result) {\n      return;\n    }\n  }\n};\n\n_.throttle = function (func, wait, trailing) {\n  var timeout = void 0,\n      previous = void 0;\n\n  var later = function later(context, args) {\n    previous = new Date().getTime();\n    func.apply(context, args);\n  };\n\n  var throttled = function throttled() {\n    var result = void 0;\n    var now = new Date().getTime();\n\n    if (!previous) {\n      previous = now;\n      result = func.apply(this, arguments);\n    } else {\n      var remaining = wait - (now - previous);\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(this, arguments);\n      } else if (!timeout && trailing) {\n        timeout = setTimeout(later.bind(this, this, arguments), remaining);\n      }\n    }\n    return result;\n  };\n\n  throttled.cancel = function () {\n    clearTimeout(timeout);\n    previous = 0;\n  };\n\n  return throttled;\n};\n\n_.debounce = function (func, wait) {\n  var timeout = void 0;\n\n  var later = function later(context, args) {\n    timeout = null;\n    func.apply(context, args);\n  };\n\n  var debounced = function debounced() {\n    var args = [].slice.call(arguments);\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    setTimeout(later.bind(this, args), wait);\n  };\n\n  debounced.cancel = function () {\n    clearTimeout(timeout);\n    timeout = null;\n  };\n\n  return debounced;\n};\n\n_.isObject = function (list) {\n  return (typeof list === 'undefined' ? 'undefined' : _typeof(list)) === 'object' || typeof list === 'function';\n};\n\n_.isArray = function (list) {\n  return Array.isArray(list);\n};\n\n_.contains = function (list, value) {\n  if (!_.isObject(list)) {\n    return list === value;\n  } else {\n    for (var i in list) {\n      if (value === list[i]) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n_.containsProp = function (list, prop) {\n  if (!_.isObject(list)) {\n    return false;\n  } else {\n    for (var p in list) {\n      if (p === prop) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n_.clone = function (o) {\n  var clone = void 0;\n  if (_.isArray(o)) {\n    clone = [];\n  } else if (_.isObject(o)) {\n    clone = {};\n  } else {\n    return o;\n  }\n\n  for (var prop in o) {\n    if (_.isObject(o[prop])) {\n      clone[prop] = _.clone(o[prop]);\n    } else {\n      clone[prop] = o[prop];\n    }\n  }\n  return clone;\n};\n\n_.properties = function (o) {\n  if (!_.isObject(o)) {\n    return null;\n  }\n  var props = [];\n  for (var prop in o) {\n    props.push(prop);\n  }\n  return props;\n};\n\nexports.default = _;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calcPointToEllipseClosestPoint = exports.calcPointOnLine = exports.calcPointToLineFoot = exports.calcPositionInCanvas = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _getUIParameters = __webpack_require__(7);\n\nvar _getUIParameters2 = _interopRequireDefault(_getUIParameters);\n\nvar _common = __webpack_require__(8);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction calcPositionInCanvas(x, y) {\n  var drawLayout = document.getElementById('draw-layout');\n  var parameters = (0, _getUIParameters2.default)();\n  return {\n    x: x - parameters.canvasLeft - (parameters.canvasPadding - drawLayout.scrollLeft),\n    y: y - parameters.canvasTop - (parameters.canvasPadding - drawLayout.scrollTop)\n  };\n}\n\nfunction calcPointToLineFoot(point, line) {\n  var _generalizePoint = (0, _common.generalizePoint)(point),\n      _generalizePoint2 = _slicedToArray(_generalizePoint, 2),\n      x = _generalizePoint2[0],\n      y = _generalizePoint2[1];\n\n  var _generalizeLine = (0, _common.generalizeLine)(line),\n      _generalizeLine2 = _slicedToArray(_generalizeLine, 3),\n      A = _generalizeLine2[0],\n      B = _generalizeLine2[1],\n      C = _generalizeLine2[2];\n\n  return {\n    x: (B * B * x - A * B * y - A * C) / (A * A + B * B),\n    y: (-A * B * x + A * A * y - B * C) / (A * A + B * B)\n  };\n}\n\nfunction calcPointOnLine(pointA, pointB, percent) {\n  var _generalizePoint3 = (0, _common.generalizePoint)(pointA),\n      _generalizePoint4 = _slicedToArray(_generalizePoint3, 2),\n      x1 = _generalizePoint4[0],\n      y1 = _generalizePoint4[1];\n\n  var _generalizePoint5 = (0, _common.generalizePoint)(pointB),\n      _generalizePoint6 = _slicedToArray(_generalizePoint5, 2),\n      x2 = _generalizePoint6[0],\n      y2 = _generalizePoint6[1];\n\n  return {\n    x: x1 + (x2 - x1) * percent,\n    y: y1 + (y2 - y1) * percent\n  };\n}\n\nfunction calcYofEllipse(x, ellipse) {\n  var _generalizeEllipse = (0, _common.generalizeEllipse)(ellipse),\n      _generalizeEllipse2 = _slicedToArray(_generalizeEllipse, 4),\n      a = _generalizeEllipse2[0],\n      b = _generalizeEllipse2[1],\n      m = _generalizeEllipse2[2],\n      n = _generalizeEllipse2[3];\n\n  if (!!m) {\n    x -= m;\n  }\n  if (x < -a || x > a) {\n    return null;\n  }\n\n  var y = b * Math.sqrt(1 - x * x / (a * a));\n  return [y + n, -y + n];\n}\n\nfunction calcPointToEllipseClosestPoint(point, ellipse) {\n  var _generalizePoint7 = (0, _common.generalizePoint)(point),\n      _generalizePoint8 = _slicedToArray(_generalizePoint7, 2),\n      x0 = _generalizePoint8[0],\n      y0 = _generalizePoint8[1];\n\n  var _generalizeEllipse3 = (0, _common.generalizeEllipse)(ellipse),\n      _generalizeEllipse4 = _slicedToArray(_generalizeEllipse3, 4),\n      a = _generalizeEllipse4[0],\n      b = _generalizeEllipse4[1],\n      m = _generalizeEllipse4[2],\n      n = _generalizeEllipse4[3];\n\n  // Set the ellipse at origin point.\n\n\n  if (!!m) {\n    x0 -= m;\n  }\n  if (!!n) {\n    y0 -= n;\n  }\n\n  // Note that c presents c * c.\n  var c = a * a - b * b;\n\n  var A = c * c;\n  var B = -2 * x0 * a * a * c;\n  var C = y0 * a * b * (y0 * a * b) + x0 * x0 * a * a * a * a - a * a * c * c;\n  var D = 2 * x0 * a * a * a * a * c;\n  var E = -a * a * a * a * a * a * x0 * x0;\n\n  if (A !== 0) {\n    B /= A, C /= A, D /= A, E /= A, A = 1;\n  }\n\n  var result = (0, _common.calcQuarticEquation)(A, B, C, D, E);\n  var possiblePoint = [];\n  if (result.length > 0) {\n    for (var i = 0; i < result.length; i++) {\n      var ys = calcYofEllipse(result[i], [a, b, 0, 0]);\n      if (ys) {\n        possiblePoint.push({ x: result[i], y: ys[0] });\n        possiblePoint.push({ x: result[i], y: ys[1] });\n      }\n    }\n  }\n\n  var bestPoint = null,\n      shortestDistance = Infinity,\n      tempDistance = void 0;\n  for (var _i = 0; _i < possiblePoint.length; _i++) {\n    tempDistance = (possiblePoint[_i].x - x0) * (possiblePoint[_i].x - x0) + (possiblePoint[_i].y - y0) * (possiblePoint[_i].y - y0);\n    if (tempDistance < shortestDistance) {\n      bestPoint = possiblePoint[_i];\n      shortestDistance = tempDistance;\n    }\n  }\n  // Only the point returned is the real point,\n  // all others are points after moved.\n  return bestPoint ? {\n    x: bestPoint.x + m,\n    y: bestPoint.y + n\n  } : null;\n}\n\nexports.calcPositionInCanvas = calcPositionInCanvas;\nexports.calcPointToLineFoot = calcPointToLineFoot;\nexports.calcPointOnLine = calcPointOnLine;\nexports.calcPointToEllipseClosestPoint = calcPointToEllipseClosestPoint;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _shapeDefaultSetting = __webpack_require__(3);\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar shapeId = 0;\n\nvar Shape = function () {\n  function Shape(el, type, left, top, width, height, drawStyle, textStyle) {\n    _classCallCheck(this, Shape);\n\n    this.id = 'shape' + shapeId++;\n    this.el = el;\n    this.canvas = el.getElementsByTagName('canvas')[0];\n    this.shapeText = el.getElementsByClassName('shape-text')[0];\n    this.context = this.canvas.getContext('2d');\n    this.type = type;\n    this.left = left;\n    this.top = top;\n\n    var temp = (0, _shapeDefaultSetting.getDefaultSetting)(this.type);\n    this.shapeName = temp.shapeName;\n    if (typeof width !== 'undefined' && width !== null && typeof height !== 'undefined' && height !== null) {\n      this.width = width;\n      this.height = height;\n    } else {\n      this.width = temp.width;\n      this.height = temp.height;\n    }\n\n    this.drawStyle = drawStyle ? drawStyle : _util2.default.clone(_shapeDefaultSetting.drawingDefaultSetting);\n    this.textStyle = textStyle ? textStyle : _util2.default.clone(_shapeDefaultSetting.textDefaultSetting);\n    this.padding = _shapeDefaultSetting.defaultPadding;\n\n    this.relativeLines = [];\n\n    this.init();\n  }\n\n  _createClass(Shape, [{\n    key: 'destruct',\n    value: function destruct() {\n      this.remove();\n      this.callLinesToDetach();\n    }\n  }, {\n    key: 'init',\n    value: function init() {\n      this.el.style.width = this.width + 'px';\n      this.el.style.height = this.height + 'px';\n      this.canvas.width = this.width;\n      this.canvas.height = this.height;\n      //this.context.lineCap = 'round'\n      //this.context.lineJoin = 'round'\n\n      this.setTextareaStyle();\n    }\n  }, {\n    key: 'append',\n    value: function append() {\n      var parent = document.getElementById('designer_canvas');\n      var sibling = document.getElementById('shape_controls');\n\n      parent.insertBefore(this.el, sibling);\n    }\n  }, {\n    key: 'remove',\n    value: function remove() {\n      var parent = document.getElementById('designer_canvas');\n      parent.removeChild(this.el);\n    }\n  }, {\n    key: 'setPosition',\n    value: function setPosition(left, top) {\n      this.left = left;\n      this.top = top;\n      this.el.style.left = this.left + 'px';\n      this.el.style.top = this.top + 'px';\n    }\n  }, {\n    key: 'setSize',\n    value: function setSize(width, height) {\n      this.canvas.width = this.el.width = this.width = width;\n      this.el.style.width = this.canvas.style.width = width + 'px';\n      this.canvas.height = this.el.height = this.height = height;\n      this.el.style.height = this.canvas.style.height = height + 'px';\n    }\n  }, {\n    key: 'resetDrawStyle',\n    value: function resetDrawStyle(context) {\n      context.lineCap = 'round';\n      context.lineJoin = 'round';\n\n      context.fillStyle = this.drawStyle.fillStyle;\n      context.strokeStyle = this.drawStyle.strokeStyle;\n      context.lineWidth = this.drawStyle.lineWidth;\n      context.setLineDash(this.drawStyle.lineDash);\n    }\n    /*\r\n    setFillStyle (fillStyle) {\r\n      this.fillStyle = fillStyle\r\n      this.resetDrawStyle()\r\n    }\r\n    setStrokeStyle (strokeStyle) {\r\n      this.strokeStyle = strokeStyle\r\n      this.resetDrawStyle()\r\n    }\r\n    setLineWidth (lineWidth) {\r\n      this.lineWidth = lineWidth\r\n      this.resetDrawStyle()\r\n    }*/\n\n  }, {\n    key: 'setLineDash',\n    value: function setLineDash(lineDash) {\n      this.lineDash = lineDash;\n      this.resetDrawStyle();\n    }\n  }, {\n    key: 'addLine',\n    value: function addLine(line, type, referPosition, referPercent) {\n      this.relativeLines.push({\n        line: line,\n        // type values: 'src', 'dest'\n        type: type,\n        referPosition: referPosition,\n        referPercent: referPercent\n      });\n    }\n  }, {\n    key: 'getLineData',\n    value: function getLineData(line) {\n      for (var i = 0; i < this.relativeLines.length; i++) {\n        if (line === this.relativeLines[i].line) {\n          return this.relativeLines[i];\n        }\n      }\n    }\n  }, {\n    key: 'deleteLine',\n    value: function deleteLine(line) {\n      for (var i = 0; i < this.relativeLines.length; i++) {\n        if (line === this.relativeLines[i].line) {\n          return this.relativeLines.splice(i, 1)[0];\n        }\n      }\n    }\n  }, {\n    key: 'callLinesToDetach',\n    value: function callLinesToDetach() {\n      for (var i = 0; i < this.relativeLines.length; i++) {\n        if (this.relativeLines[i].type === 'src') {\n          this.relativeLines[i].line.src.shape = null;\n        } else {\n          this.relativeLines[i].line.dest.shape = null;\n        }\n      }\n    }\n  }, {\n    key: 'setTextareaStyle',\n    value: function setTextareaStyle() {\n      if (!this.shapeText) {\n        return;\n      }\n      for (var prop in this.textStyle) {\n        this.shapeText.style[prop] = this.textStyle[prop];\n      }\n    }\n  }, {\n    key: 'setTextareaSingleStyle',\n    value: function setTextareaSingleStyle(prop, value) {\n      if (_util2.default.containsProp(this.textStyle, prop)) {\n        this.textStyle[prop] = value;\n        this.shapeText.style[prop] = value;\n      }\n    }\n  }, {\n    key: 'getTextareaStyle',\n    value: function getTextareaStyle() {}\n  }, {\n    key: 'getAllStyle',\n    value: function getAllStyle() {\n      var style = {};\n      for (var prop in this.textStyle) {\n        style[prop] = this.textStyle[prop];\n      }\n      for (var _prop in this.drawStyle) {\n        style[_prop] = this.drawStyle[_prop];\n      }\n      return style;\n    }\n  }]);\n\n  return Shape;\n}();\n\nexports.default = Shape;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultPadding = exports.textDefaultSetting = exports.drawingDefaultSetting = exports.getDefaultSetting = undefined;\n\nvar _colors = __webpack_require__(6);\n\nvar _colors2 = _interopRequireDefault(_colors);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar basic = {\n  width: 120,\n  height: 90\n};\nvar process = {\n  width: 120,\n  height: 90,\n  shapeName: ''\n};\nvar decision = {\n  width: 110,\n  height: 90,\n  shapeName: ''\n};\nvar terminator = {\n  width: 120,\n  height: 70,\n  shapeName: '/'\n};\nvar storedData = {\n  width: 120,\n  height: 90,\n  shapeName: ''\n};\nvar line = {\n  linkerType: 'straight',\n  arrowType: 'basic'\n};\n\nfunction getDefaultSetting(type) {\n  switch (type) {\n    case 'process':\n      return process;\n    case 'decision':\n      return decision;\n    case 'terminator':\n      return terminator;\n    case 'storedData':\n      return storedData;\n    case 'line':\n      return line;\n    default:\n      return basic;\n  }\n}\n\nvar drawingDefaultSetting = {\n  fillStyle: _colors2.default.defaultFillStyle,\n  strokeStyle: _colors2.default.defaultStrokeStyle,\n  lineWidth: 2,\n  lineDash: []\n};\n\nvar textDefaultSetting = {\n  fontWeight: 'normal',\n  fontStyle: 'normal',\n  textDecoration: 'none',\n  fontFamily: 'Arial',\n  fontSize: 'x-normal',\n  color: _colors2.default.textDefaultColor\n};\n\nvar defaultPadding = 10;\n\nexports.getDefaultSetting = getDefaultSetting;\nexports.drawingDefaultSetting = drawingDefaultSetting;\nexports.textDefaultSetting = textDefaultSetting;\nexports.defaultPadding = defaultPadding;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.simplyToolTypes = exports.toolsGroup = exports.tools = undefined;\n\nvar _shapeDefaultSetting = __webpack_require__(3);\n\nvar tools = {\n  'undo': {\n    hint: '',\n    faClass: 'fa-undo',\n    styleName: null,\n    styleValue: null\n  },\n  'redo': {\n    hint: '',\n    faClass: 'fa-repeat',\n    styleName: null,\n    styleValue: null\n  },\n  'bold': {\n    hint: '',\n    faClass: 'fa-bold',\n    styleName: 'fontWeight',\n    styleValue: ['normal', 'bold']\n  },\n  'italic': {\n    hint: '',\n    faClass: 'fa-italic',\n    styleName: 'fontStyle',\n    styleValue: ['normal', 'italic']\n  },\n  'underline': {\n    hint: '',\n    faClass: 'fa-underline',\n    styleName: 'textDecoration',\n    styleValue: ['none', 'underline']\n  },\n  'fontFamily': {\n    hint: '',\n    faClass: 'fa-font',\n    styleName: 'fontFamily',\n    styleValue: ['Arial', 'Sans']\n  },\n  'fontSize': {\n    hint: '',\n    faClass: 'fa-text-height',\n    styleName: 'fontSize',\n    styleValue: ['x-small', 'x-normal', 'x-large']\n  },\n  'fontColor': {\n    hint: '',\n    faClass: 'fa-pencil',\n    styleName: 'color',\n    styleValue: [_shapeDefaultSetting.textDefaultSetting.color]\n  },\n  'fillStyle': {\n    hint: '',\n    faClass: 'fa-square',\n    styleName: 'fillStyle',\n    styleValue: [_shapeDefaultSetting.drawingDefaultSetting.fillStyle]\n  },\n  'strokeStyle': {\n    hint: '',\n    faClass: 'fa-paint-brush',\n    styleName: 'strokeStyle',\n    styleValue: [_shapeDefaultSetting.drawingDefaultSetting.strokeStyle]\n  }\n  /*\r\n  'lineWidth' : {\r\n    hint: '',\r\n    faClass: ,\r\n    styleName: ,\r\n    styleValue:\r\n  },\r\n  'lineDash' : {\r\n    hint: '',\r\n    faClass: ,\r\n    styleName: ,\r\n    styleValue:\r\n  },\r\n  'linkerType' : {\r\n    hint: '',\r\n    faClass: ,\r\n    styleName: ,\r\n    styleValue:\r\n  },\r\n  'arrowType' : {\r\n    hint: '',\r\n    faClass: ,\r\n    styleName: ,\r\n    styleValue:\r\n  }*/\n};\n\nvar toolsGroup = [['undo', 'redo'], ['bold', 'italic', 'underline'], ['fontFamily', 'fontSize', 'fontColor'], ['fillStyle', 'strokeStyle', 'lineWidth', 'lineDash'], ['linkerType', 'arrowType']];\n\nvar simplyToolTypes = ['undo', 'redo', 'bold', 'italic', 'underline'];\n\nexports.tools = tools;\nexports.toolsGroup = toolsGroup;\nexports.simplyToolTypes = simplyToolTypes;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _process = __webpack_require__(21);\n\nvar _process2 = _interopRequireDefault(_process);\n\nvar _decision = __webpack_require__(22);\n\nvar _decision2 = _interopRequireDefault(_decision);\n\nvar _terminator = __webpack_require__(9);\n\nvar _terminator2 = _interopRequireDefault(_terminator);\n\nvar _storedData = __webpack_require__(23);\n\nvar _storedData2 = _interopRequireDefault(_storedData);\n\nvar _line = __webpack_require__(24);\n\nvar _line2 = _interopRequireDefault(_line);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getShapeByType(shapeName) {\n  switch (shapeName) {\n    case 'process':\n      return _process2.default;\n    case 'decision':\n      return _decision2.default;\n    case 'terminator':\n      return _terminator2.default;\n    case 'storeData':\n      return _storedData2.default;\n    case 'line':\n      return _line2.default;\n  }\n}\n\nexports.default = getShapeByType;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar colors = {\n  \"defaultFillStyle\": '#FFFFFF',\n  \"defaultStrokeStyle\": '#000000',\n  'lineArrowHightlight': 'rgba(237, 65, 65, 0.5)',\n  'lineBodyHighlight': 'rgba(237, 65, 65, 0.15)',\n  'textDefaultColor': 'rgb(50, 50, 50)'\n};\n\nexports.default = colors;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction getUIParameters() {\n  var canvasLayout = document.getElementById('draw-layout');\n  var drawContainer = document.getElementById('draw-container');\n  return {\n    canvasPadding: drawContainer.style.padding.slice(0, -2) - 0,\n    canvasLeft: canvasLayout.offsetLeft,\n    canvasTop: canvasLayout.offsetTop\n  };\n}\n\nexports.default = getUIParameters;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calcQuarticEquation = exports.generalizeEllipse = exports.generalizePoint = exports.generalizeLine = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Line can be presented by (x - x2) / (x1 - x2) = (y - y2) / (x1 - y2)\n// or Ax + By + C = 0\n// or Kx + B = y\n// The order of parameters must be [x1, y1, x2, y2], [A, B, C] or [K, B].\nfunction generalizeLine(line) {\n  switch (line.length) {\n    case 2:\n      return [line[0], -1, line[1]];\n    case 3:\n      return line;\n    case 4:\n      var _line = _slicedToArray(line, 4),\n          x1 = _line[0],\n          y1 = _line[1],\n          x2 = _line[2],\n          y2 = _line[3];\n\n      var A = (y1 - y2) / (x1 - x2);\n      var B = -1;\n      var C = y2 - A * x2;\n      return [A, B, C];\n  }\n}\n\n// Points must contain x and y.\n// The order of parameters must be [x, y] or {x, y}\nfunction generalizePoint(point) {\n  if (_util2.default.isArray(point)) {\n    return point;\n  } else {\n    return [point.x, point.y];\n  }\n}\n\n// Ellipse is presented by (x - m)^2 / a^2 + (y - n)^2 / b^2 = 1\n// Ellipse must contain a and b, m and n are optional.\n// The order of parameters must be [a, b, m, n] or {a, b, m, n}\nfunction generalizeEllipse(ellipse) {\n  if (_util2.default.isArray(ellipse)) {\n    return ellipse;\n  } else {\n    return [ellipse.a, ellipse.b, ellipse.m, ellipse.n];\n  }\n}\n\nfunction calcQuarticEquation(a, b, c, d, e) {\n  var result = [];\n  var t1 = c * c - 3 * b * d + 12 * a * e;\n  var t2 = 2 * c * c * c - 9 * b * c * d + 27 * a * d * d + 27 * b * b * e - 72 * a * c * e;\n\n  var temp = Math.pow(t2 + Math.sqrt(-4 * t1 * t1 * t1 + t2 * t2), 1 / 3);\n  var P = Math.pow(2, 1 / 3) * t1 / (3 * a * temp) + temp / (3 * Math.pow(2, 1 / 3) * a);\n\n  var Q = 0.5 * Math.sqrt(b * b / (4 * a * a) - 2 * c / (3 * a) + P);\n  if (isNaN(Q)) {\n    return [];\n  }\n  var R = b * b / (2 * a * a) - 4 * c / (3 * a) - P;\n  var S = (-b * b * b / (a * a * a) + 4 * b * c / (a * a) - 8 * d / a) / (4 * Math.sqrt(b * b / (4 * a * a) - 2 * c / (3 * a) + P));\n  var T1 = 0.5 * Math.sqrt(R - S);\n  var T2 = 0.5 * Math.sqrt(R + S);\n  if (!isNaN(T1)) {\n    result.push(-b / (4 * a) - Q - T1);\n    result.push(-b / (4 * a) - Q + T1);\n  }\n  if (!isNaN(T2)) {\n    result.push(-b / (4 * a) + Q - T2);\n    result.push(-b / (4 * a) + Q + T2);\n  }\n  return result;\n}\n\nexports.generalizeLine = generalizeLine;\nexports.generalizePoint = generalizePoint;\nexports.generalizeEllipse = generalizeEllipse;\nexports.calcQuarticEquation = calcQuarticEquation;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _shape = __webpack_require__(2);\n\nvar _shape2 = _interopRequireDefault(_shape);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultWidthHeightRatio = 0.6;\nvar lineAreaWidth = 7;\n\nfunction isPointWithinEllipse(point, ellipse) {\n  var _point = _slicedToArray(point, 2),\n      x = _point[0],\n      y = _point[1];\n\n  var _ellipse = _slicedToArray(ellipse, 4),\n      a = _ellipse[0],\n      b = _ellipse[1],\n      m = _ellipse[2],\n      n = _ellipse[3];\n\n  var result = (x - m) * (x - m) / (a * a) + (y - n) * (y - n) / (b * b);\n  return result <= 1;\n}\n\nfunction isInTerminalShape(x, y, left, top, width, height, radio) {\n  // Note that the left, right, width, height are about\n  // the circumscribed rectangle of real terminal. Padding is excluded.\n  var a = height / 2 * radio,\n      b = height / 2;\n  var innerLeft = left + a,\n      innerTop = top;\n  var innerWidth = width - 2 * a,\n      innerHeight = height;\n  if (x > innerLeft && x < innerLeft + innerWidth && y > innerTop && y < innerTop + innerHeight) {\n    return true;\n  }\n  var ellipseLeft = [a, b, innerLeft, innerTop + innerHeight / 2];\n  var ellipseRight = [a, b, innerLeft + innerWidth, innerTop + innerHeight / 2];\n\n  return isPointWithinEllipse([x, y], ellipseLeft) || isPointWithinEllipse([x, y], ellipseRight);\n}\n\nfunction calcXOfEllipse(ellipse, y, isLeft) {\n  var _ellipse2 = _slicedToArray(ellipse, 4),\n      a = _ellipse2[0],\n      b = _ellipse2[1],\n      m = _ellipse2[2],\n      n = _ellipse2[3];\n\n  var temp = a * Math.sqrt(1 - (y - n) * (y - n) / (b * b));\n  return m + temp * (isLeft ? -1 : 1);\n}\n\nfunction judgeInShapeArea(x, y, left, top, width, height) {\n  var lineResultA = void 0,\n      lineResultB = void 0;\n  var x1 = left,\n      y1 = top;\n  var x2 = left + width,\n      y2 = top + height;\n  lineResultA = (x - x2) / (x1 - x2) - (y - y2) / (y1 - y2);\n  x1 = left + width, y1 = top;\n  x2 = left, y2 = top + height;\n  lineResultB = (x - x2) / (x1 - x2) - (y - y2) / (y1 - y2);\n  if (lineResultA <= 0) {\n    return lineResultB < 0 ? 'top' : 'right';\n  } else {\n    return lineResultB > 0 ? 'bottom' : 'left';\n  }\n}\n\nvar Terminator = function (_Shape) {\n  _inherits(Terminator, _Shape);\n\n  function Terminator(el, type, left, top, width, height) {\n    _classCallCheck(this, Terminator);\n\n    return _possibleConstructorReturn(this, (Terminator.__proto__ || Object.getPrototypeOf(Terminator)).call(this, el, type, left, top, width, height));\n  }\n  // And a problem still exists: currently, I use function scale and arc to\n  // draw the ellipse, and it works fine for most time. But when the scale radio\n  // is way to big, it will cause the line of ellipse being too thin.\n  // Maybe I can try using bezier instead of arc.\n\n\n  _createClass(Terminator, [{\n    key: 'draw',\n    value: function draw(paddingHorizontal, paddingVertical, drawContext) {\n      var horizontal = typeof paddingHorizontal === 'undefined' || paddingHorizontal === null ? this.padding : paddingHorizontal;\n      var vertical = typeof paddingVertical === 'undefined' || paddingVertical === null ? this.padding : paddingVertical;\n      var context = typeof drawContext === 'undefined' || drawContext === null ? this.context : drawContext;\n\n      var radius = (this.height - 2 * vertical) / 2;\n      var radio = this.calcWidthHeightRatio();\n      var centerA = [],\n          centerB = [];\n      centerA.x = horizontal / radio + radius;\n      centerA.y = vertical + radius;\n      centerB.x = (this.width - horizontal) / radio - radius;\n      centerB.y = vertical + radius;\n\n      this.resetDrawStyle(context);\n      context.beginPath();\n      context.scale(this.calcWidthHeightRatio(), 1);\n      context.arc(centerA.x, centerA.y, radius, 0.5 * Math.PI, 1.5 * Math.PI);\n      context.lineTo(centerB.x, vertical);\n      context.arc(centerB.x, centerB.y, radius, 1.5 * Math.PI, 0.5 * Math.PI);\n      context.closePath();\n      context.fill();\n      context.stroke();\n      context.scale(1 / this.calcWidthHeightRatio(), 1);\n    }\n  }, {\n    key: 'drawOnOtherCanvas',\n    value: function drawOnOtherCanvas(context, left, top) {\n      context.translate(left, top);\n      this.draw(null, null, context);\n      context.translate(-left, -top);\n    }\n  }, {\n    key: 'isPositionInShape',\n    value: function isPositionInShape(x, y) {\n      return isInTerminalShape(x, y, this.left + this.padding, this.top + this.padding, this.width - 2 * this.padding, this.height - 2 * this.padding, this.calcWidthHeightRatio());\n    }\n  }, {\n    key: 'isPositionInLineArea',\n    value: function isPositionInLineArea(x, y, bodyExcluded) {\n      if (!bodyExcluded && this.isPositionInShape(x, y)) {\n        return false;\n      }\n\n      var deltaA = lineAreaWidth * this.calcWidthHeightRatio();\n      var deltaWidth = (1 - this.calcWidthHeightRatio()) * lineAreaWidth;\n      return isInTerminalShape(x, y, this.left + this.padding - deltaA - deltaWidth, this.top, this.width - 2 * this.padding + 2 * (deltaA + deltaWidth), this.height, this.calcWidthHeightRatio());\n    }\n  }, {\n    key: 'judgeInShape',\n    value: function judgeInShape(x, y) {\n      var type = void 0;\n      type = this.isPositionInShape(x, y) ? 'shapeBody' : null;\n      type = !type ? this.isPositionInLineArea(x, y, true) ? 'shapeLineArea' : 'empty' : type;\n      return { shape: this, type: type };\n    }\n  }, {\n    key: 'calcWidthHeightRatio',\n    value: function calcWidthHeightRatio() {\n      var innerWidth = this.width - this.padding * 2,\n          innerHeight = this.height - this.padding * 2;\n      var a = innerHeight / 2 * defaultWidthHeightRatio;\n      if (innerWidth >= 3 * a) {\n        return defaultWidthHeightRatio;\n      } else {\n        return innerWidth / 3 / (innerHeight / 2);\n      }\n    }\n  }, {\n    key: 'calcInnerShapeData',\n    value: function calcInnerShapeData() {\n      var innerTop = this.top + this.padding;\n      var innerHeight = this.height - 2 * this.padding;\n      var a = innerHeight / 2 * this.calcWidthHeightRatio(),\n          b = innerHeight / 2;\n      var innerLeft = this.left + this.padding + a;\n      var innerWidth = this.width - 2 * this.padding - 2 * a;\n\n      var ellipseLeft = [a, b, innerLeft, innerTop + innerHeight / 2];\n      var ellipseRight = [a, b, innerLeft + innerWidth, innerTop + innerHeight / 2];\n      return [innerLeft, innerTop, innerWidth, innerHeight, ellipseLeft, ellipseRight];\n    }\n    // ReferPosition includes top, right, bottom, left, nwCorner, neCorner, seCorner, swCorner.\n\n  }, {\n    key: 'calcLinePosition',\n    value: function calcLinePosition(referPosition, referPercent) {\n      var x = void 0,\n          y = void 0;\n\n      var _calcInnerShapeData = this.calcInnerShapeData(),\n          _calcInnerShapeData2 = _slicedToArray(_calcInnerShapeData, 6),\n          innerLeft = _calcInnerShapeData2[0],\n          innerTop = _calcInnerShapeData2[1],\n          innerWidth = _calcInnerShapeData2[2],\n          innerHeight = _calcInnerShapeData2[3],\n          ellipseLeft = _calcInnerShapeData2[4],\n          ellipseRight = _calcInnerShapeData2[5];\n\n      switch (referPosition) {\n        case 'nwCorner':\n          x = innerLeft;\n          y = innerTop;\n          break;\n        case 'neCorner':\n          x = innerLeft + innerWidth;\n          y = innerTop;\n          break;\n        case 'seCorner':\n          x = innerLeft + innerWidth;\n          y = innerTop + innerHeight;\n          break;\n        case 'swCorner':\n          x = innerLeft;\n          y = innerTop + innerHeight;\n          break;\n        case 'top':\n          x = innerLeft + innerWidth * referPercent;\n          y = innerTop;\n          break;\n        case 'right':\n          y = innerTop + innerHeight * referPercent;\n          x = calcXOfEllipse(ellipseRight, y, false);\n          break;\n        case 'bottom':\n          x = innerLeft + innerWidth * referPercent;\n          y = innerTop + innerHeight;\n          break;\n        case 'left':\n          y = innerTop + innerHeight * referPercent;\n          x = calcXOfEllipse(ellipseLeft, y, true);\n          break;\n      }\n      return { x: x, y: y };\n    }\n  }, {\n    key: 'getLineReference',\n    value: function getLineReference(x, y) {\n      var referPosition = null,\n          referPercent = 0,\n          position = void 0;\n\n      var _calcInnerShapeData3 = this.calcInnerShapeData(),\n          _calcInnerShapeData4 = _slicedToArray(_calcInnerShapeData3, 6),\n          innerLeft = _calcInnerShapeData4[0],\n          innerTop = _calcInnerShapeData4[1],\n          innerWidth = _calcInnerShapeData4[2],\n          innerHeight = _calcInnerShapeData4[3],\n          ellipseLeft = _calcInnerShapeData4[4],\n          ellipseRight = _calcInnerShapeData4[5];\n\n      if (this.isPositionInShape(x, y)) {\n        referPercent = 0.5;\n        referPosition = judgeInShapeArea(x, y, innerLeft, innerTop, innerWidth, innerHeight);\n      } else if (this.isPositionInLineArea(x, y, true)) {\n        if (y <= innerTop) {\n          if (x <= innerLeft) {\n            referPosition = 'nwCorner';\n          } else if (x >= innerLeft + innerWidth) {\n            referPosition = 'neCorner';\n          } else {\n            referPosition = 'top';\n            referPercent = (x - innerLeft) / innerWidth;\n          }\n        } else if (y >= innerTop + innerHeight) {\n          if (x <= innerLeft) {\n            referPosition = 'swCorner';\n          } else if (x >= innerLeft + innerWidth) {\n            referPosition = 'seCorner';\n          } else {\n            referPosition = 'bottom';\n            referPercent = (x - innerLeft) / innerWidth;\n          }\n        } else {\n          referPercent = (y - innerTop) / innerHeight;\n          referPosition = x < innerLeft + innerWidth / 2 ? 'left' : 'right';\n        }\n      } else {\n        return null;\n      }\n\n      position = this.calcLinePosition(referPosition, referPercent);\n      return {\n        referPosition: referPosition,\n        referPercent: referPercent,\n        position: position\n      };\n    }\n  }, {\n    key: 'resetLinesPosition',\n    value: function resetLinesPosition() {\n      var lineData = void 0,\n          position = void 0;\n      for (var i = 0; i < this.relativeLines.length; i++) {\n        lineData = this.relativeLines[i];\n        position = this.calcLinePosition(lineData.referPosition, lineData.referPercent);\n        if (lineData.type === 'src') {\n          lineData.line.resetSrcPosition(position);\n          lineData.line.draw();\n        } else {\n          lineData.line.resetDestPosition(position);\n          lineData.line.draw();\n        }\n      }\n    }\n  }]);\n\n  return Terminator;\n}(_shape2.default);\n\nexports.default = Terminator;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createNewLine = exports.createNewShape = undefined;\n\nvar _index = __webpack_require__(5);\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createNewShape(type, left, top, width, height) {\n  var component = document.createElement('div');\n  component.classList.add('shape-box', type);\n\n  component.innerHTML = '\\n    <canvas class=\"shape-canvas\"></canvas>\\n    <textarea class=\"shape-text\"></textarea>';\n\n  var shape = new ((0, _index2.default)(type))(component, type, left, top, width, height);\n\n  component.setAttribute('shapeid', shape.id);\n  return shape;\n}\n\nfunction createNewLine(src, dist, settings) {\n  var component = document.createElement('div');\n  component.classList.add('shape-box', 'linker-box');\n\n  component.innerHTML = '\\n    <canvas class=\"shape-canvas\"></canvas>\\n    <div class=\"shape-text\" contenteditable=\"true\"></div>';\n\n  var line = new ((0, _index2.default)('line'))(component, src, dist, settings);\n\n  component.setAttribute('shapeid', line.id);\n  return line;\n}\n\nexports.createNewShape = createNewShape;\nexports.createNewLine = createNewLine;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _calcPosition = __webpack_require__(1);\n\nvar _controller = __webpack_require__(30);\n\nvar _controller2 = _interopRequireDefault(_controller);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar eventCommon = {\n  shapeController: {\n    el: null,\n    canvas: null,\n    init: function init() {\n      this.el = document.getElementById('shape-controls');\n      this.canvas = document.getElementById('controls-bounding');\n    },\n    reset: function reset(left, top, width, height) {\n      if (!this.el) {\n        this.init();\n      }\n\n      this.el.style.left = left + 'px';\n      this.el.style.top = top + 'px';\n      this.el.style.width = width + 'px';\n      this.el.style.height = height + 'px';\n    },\n    setVisibility: function setVisibility(visibility) {\n      if (!this.el) {\n        this.init();\n      }\n\n      if (visibility) {\n        this.el.style.display = 'block';\n      } else {\n        this.el.style.display = 'none';\n      }\n    },\n    draw: function draw(width, height) {\n      if (!this.el) {\n        this.init();\n      }\n\n      return (0, _controller2.default)(this.canvas, width, height, 10);\n    }\n  },\n  bezierController: {},\n  styleController: {},\n\n  activeShape: null,\n  selectedShape: null,\n\n  lineData: {\n    selectedLine: null,\n    isActive: false,\n    src: {\n      position: null,\n      referPercent: null,\n      referPosition: null,\n      shape: null\n    },\n    dest: {\n      position: null,\n      referPercent: null,\n      referPosition: null,\n      shape: null\n    },\n    activeLine: null,\n    type: null,\n    // This value only works when creating a new line\n    needDeleted: false\n\n    // Type values: 'new', 'toDest', 'toSrc'\n  },\n\n  getShapeInListById: function getShapeInListById(shapeId, shapeList) {\n    for (var i = 0; i < shapeList.length; i++) {\n      // If the line is being moved, ignore it\n      if (this.lineData.activeLine === shapeList[i]) {\n        continue;\n      }\n      if (shapeList[i].id === shapeId) return shapeList[i];\n    }\n    return null;\n  },\n  deleteShapeInListById: function deleteShapeInListById(shapeId, shapeList) {\n    for (var i = 0; i < shapeList.length; i++) {\n      if (shapeId === shapeList[i].id) {\n        var shape = shapeList.splice(i, 1)[0];\n        shape.destruct();\n        shape = null;\n        return;\n      }\n    }\n  },\n  isShapeInListById: function isShapeInListById(shapeId, shapeList) {\n    for (var i = 0; i < shapeList.length; i++) {\n      if (shapeId === shapeList[i].id) {\n        return true;\n      }\n    }\n    return false;\n  },\n  judgeInShapeList: function judgeInShapeList(position, shapeList, dir) {\n    dir = typeof dir !== 'undefined' ? dir : 1;\n    var length = shapeList.length;\n    var index = dir > 0 ? 0 : length - 1;\n    var result = void 0;\n    for (; index >= 0 && index < length; index += dir) {\n      // If the line is being moved, ignore it.\n      if (this.lineData.isActive && shapeList[index] === this.lineData.activeLine) {\n        continue;\n      }\n      if (shapeList[index].judgeInShape) {\n        result = shapeList[index].judgeInShape(position.x, position.y);\n        if (result.type !== 'empty') return result;\n      }\n    }\n    return null;\n  },\n  judgeEventAt: function judgeEventAt(event, shapeList) {\n    if (!event.target || !event.target.classList) {\n      return { shape: null, type: 'empty' };\n    }\n\n    var result = void 0,\n        shape = void 0;\n    var position = (0, _calcPosition.calcPositionInCanvas)(event.pageX, event.pageY);\n\n    if (event.target.classList.contains('toolbar-button') || event.target.parentNode.classList && event.target.parentNode.classList.contains('toolbar-button')) {\n      return { shape: null, type: 'tool' };\n    } else if (event.target.classList.contains('shape-controller')) {\n      return {\n        shape: this.selectedShape,\n        type: 'controller'\n      };\n    } else if (event.target.parentNode.getAttribute && event.target.parentNode.getAttribute('id') === 'shape-controls') {\n      // For now, the selected shape has no priority\n      // which is the same as processon's work.\n      result = this.judgeInShapeList(position, shapeList, -1);\n      if (result) {\n        result.topElement = this.shapeController.el;\n      } else {\n        result = { topElement: this.shapeController.el };\n      }\n      return result;\n    } else if (event.target.parentNode.classList && event.target.parentNode.classList.contains('shape-box')) {\n      var shapeId = event.target.parentNode.getAttribute('shapeid');\n      shape = this.getShapeInListById(shapeId, shapeList);\n\n      if (!shape) {\n        // Judge whether the shape is already put into the shape list.\n        // It happens when users try to drag a new line.\n        // TopShape is undefined here.\n        return this.judgeInShapeList(position, shapeList, -1);\n      } else {\n        // Common shape or line will work the same way.\n        result = shape.judgeInShape(position.x, position.y);\n        result.topElement = shape.el;\n        if (result && result.type !== 'empty') {\n          return result;\n        } else {\n          var resultInList = this.judgeInShapeList(position, shapeList, -1);\n          if (resultInList) {\n            resultInList.topElement = shape.el;\n          }\n          return resultInList ? resultInList : result;\n        }\n      }\n    }\n\n    return { shape: null, type: 'empty'\n\n      // type values: lineBody, lineDest, lineSrc\n      //              shapeBody, shapeLineArea\n      //              controller\n      //              empty\n      //              tool\n    };\n  }\n\n};\n\nexports.default = eventCommon;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _toolsUIInit = __webpack_require__(32);\n\nvar _toolsUIInit2 = _interopRequireDefault(_toolsUIInit);\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _toolbarDefaultSetting = __webpack_require__(4);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction getToolType(el) {\n  return el.getAttribute('id').slice(5);\n}\n\nfunction styleToState(style) {\n  var state = {};\n\n  for (var value in style) {\n    for (var prop in _toolbarDefaultSetting.tools) {\n      if (_toolbarDefaultSetting.tools[prop].styleName === value) {\n        state[prop] = style[value];\n      }\n    }\n  }\n  return state;\n}\n\nvar Toolbar = function () {\n  function Toolbar(el, tools, hint) {\n    _classCallCheck(this, Toolbar);\n\n    this.el = el;\n    this.tools = tools;\n    this.hint = hint;\n\n    this.init();\n  }\n\n  _createClass(Toolbar, [{\n    key: 'init',\n    value: function init() {\n      (0, _toolsUIInit2.default)(this.el, this.tools, this.hint);\n      this.toolElements = this.el.getElementsByClassName('toolbar-button');\n    }\n  }, {\n    key: 'setToolbarState',\n    value: function setToolbarState(style) {\n      var type = void 0;\n      var state = styleToState(style);\n\n      for (var i = 0; i < this.toolElements.length; i++) {\n        type = getToolType(this.toolElements[i]);\n        if (type === 'undo' || type === 'redo') {\n          continue;\n        }\n        if (_util2.default.contains(_util2.default.properties(state), type)) {\n          if (_util2.default.contains(_toolbarDefaultSetting.simplyToolTypes, type)) {\n            this.toolElements[i].setAttribute('disabled', '');\n            if (state[type] !== _toolbarDefaultSetting.tools[type].styleValue[0]) {\n              this.toolElements[i].classList.add('active');\n            }\n          }\n        } else {\n          this.toolElements[i].setAttribute('disabled', 'disabled');\n        }\n      }\n    }\n  }, {\n    key: 'setEmptyToolbarState',\n    value: function setEmptyToolbarState() {\n      var type = void 0;\n      for (var i = 0; i < this.toolElements.length; i++) {\n        type = getToolType(this.toolElements[i]);\n        if (type !== 'undo' && type !== 'redo') {\n          this.toolElements[i].setAttribute('disabled', 'disabled');\n        }\n      }\n    }\n  }]);\n\n  return Toolbar;\n}();\n\nvar toolbar = null;\n\nfunction getToolbar(el, tools, hint) {\n  if (toolbar) {\n    return toolbar;\n  } else {\n    return toolbar = new Toolbar(el, tools, hint);\n  }\n}\n\nexports.default = getToolbar;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n__webpack_require__(14);\n\nvar _generateImage2 = __webpack_require__(19);\n\nvar _generateImage3 = _interopRequireDefault(_generateImage2);\n\nvar _init2 = __webpack_require__(20);\n\nvar _init3 = _interopRequireDefault(_init2);\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function (window, document) {\n  // settings: {\n  //   el: the container of drawing\n  //   shapes: enabled shapes\n  //   toolbar: {\n  //     el: the container of toolbar\n  //     tools: enabled tools\n  //   }\n  // }\n  var defaultInstanceSettings = {\n    el: null,\n    shapes: ['process', 'decision', 'terminator', 'storeData'],\n    toolbar: {\n      el: null,\n      tools: ['undo', 'redo', 'bold', 'italic', 'underline', 'fontName', 'fontSize', 'fontColor', 'fillStyle', 'strokeStyle', 'lineWidth', 'lineDash', 'linkerType', 'arrowType'],\n      hint: true\n    }\n  };\n\n  function cloneObject(o) {\n    var clone = {};\n    for (var prop in o) {\n      clone[prop] = o[prop];\n    }\n    return clone;\n  }\n\n  function hasProp(o, prop) {\n    return o.hasOwnProperty(prop);\n  }\n\n  function replaceObjectProps(target, source) {\n    var clone = cloneObject(target);\n    for (var prop in clone) {\n      // Note that typeof null === 'object'.\n      if (clone[prop] && _typeof(clone[prop]) === 'object' && !_util2.default.isArray(clone[prop])) {\n        if (source[prop]) {\n          clone[prop] = replaceObjectProps(clone[prop], source[prop]);\n        }\n      } else {\n        clone[prop] = hasProp(source, prop) ? source[prop] : clone[prop];\n      }\n    }\n    return clone;\n  }\n\n  function createInstanceSetting(params) {\n    var el = void 0;\n    if (!params.el || !(el = document.querySelectorAll(params.el)[0])) {\n      return null;\n    }\n\n    var instanceSetting = replaceObjectProps(defaultInstanceSettings, params);\n    instanceSetting.el = el;\n\n    if (params.toolbar.el && (el = document.querySelectorAll(params.toolbar.el)[0])) {\n      instanceSetting.toolbar.el = el;\n      var tools = instanceSetting.toolbar.tools;\n      for (var i = 0; i < tools.length; i++) {\n        tools[i] = tools[i].toLowerCase().trim();\n      }\n    }\n\n    return instanceSetting;\n  }\n\n  var FlowChart = function () {\n    function FlowChart(options) {\n      _classCallCheck(this, FlowChart);\n\n      this.instanceSetting = createInstanceSetting(options);\n      if (!this.instanceSetting) {\n        return {};\n      }\n\n      this.shapeList = [];\n      this.init();\n    }\n\n    _createClass(FlowChart, [{\n      key: 'init',\n      value: function init() {\n        (0, _init3.default)(this.instanceSetting, this.shapeList);\n      }\n    }, {\n      key: 'generateImage',\n      value: function generateImage() {\n        return (0, _generateImage3.default)(this.shapeList);\n      }\n    }]);\n\n    return FlowChart;\n  }();\n\n  var FreeFlowChart = function () {\n    var instance = null;\n\n    return function (options) {\n      if (instance) {\n        return instance;\n      } else {\n        var _instance = new FlowChart(options);\n        if (!_instance.init) {\n          console.log('Invalid options!');\n          _instance = null;\n        }\n        return _instance;\n      }\n    };\n  }();\n\n  window.FreeFlowChart = FreeFlowChart;\n})(window, document);\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(15);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(17)(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/_css-loader@0.28.7@css-loader/index.js!../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!./freeFlowChart.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/_css-loader@0.28.7@css-loader/index.js!../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!./freeFlowChart.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(16)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".fff-draw-main {\\n  width: 100%;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none; }\\n  .fff-draw-main #draw-components {\\n    width: 160px;\\n    position: absolute; }\\n    .fff-draw-main #draw-components .component-box {\\n      cursor: pointer;\\n      width: 30px;\\n      height: 30px; }\\n  .fff-draw-main #draw-layout {\\n    background: #b6b6b6;\\n    margin-left: 160px;\\n    height: 800px;\\n    overflow: scroll; }\\n    .fff-draw-main #draw-layout #draw-container {\\n      position: relative;\\n      padding: 1000px;\\n      width: 3250px;\\n      height: 3500px;\\n      overflow: hidden; }\\n      .fff-draw-main #draw-layout #draw-container #designer_canvas {\\n        width: 100%;\\n        height: 100%;\\n        position: relative; }\\n        .fff-draw-main #draw-layout #draw-container #designer_canvas #canvas-background {\\n          width: 1250px;\\n          height: 1500px;\\n          background: ghostwhite;\\n          z-index: 0; }\\n        .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box {\\n          z-index: 1;\\n          cursor: move;\\n          position: absolute;\\n          -webkit-user-select: none;\\n          -moz-user-select: none;\\n          -ms-user-select: none;\\n          user-select: none; }\\n          .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box .shape-canvas {\\n            width: 100%;\\n            height: 100%; }\\n          .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box .shape-text {\\n            text-align: center;\\n            overflow: hidden;\\n            cursor: move;\\n            border: none;\\n            background: inherit;\\n            resize: none;\\n            max-width: calc(100% - 26px);\\n            top: 50%;\\n            left: 50%;\\n            position: absolute;\\n            -webkit-transform: translateX(-50%) translateY(-50%);\\n            -moz-transform: translateX(-50%) translateY(-50%);\\n            -ms-transform: translateX(-50%) translateY(-50%);\\n            transform: translateX(-50%) translateY(-50%); }\\n            .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box .shape-text:focus {\\n              outline: -webkit-focus-ring-color auto 5px; }\\n        .fff-draw-main #draw-layout #draw-container #designer_canvas .decision .shape-text {\\n          max-width: calc(50% - 10px); }\\n        .fff-draw-main #draw-layout #draw-container #designer_canvas .linker-box {\\n          cursor: default;\\n          z-index: 2; }\\n        .fff-draw-main #draw-layout #draw-container #designer_canvas #shape-controls {\\n          cursor: move;\\n          height: 70px;\\n          z-index: 3;\\n          display: none;\\n          position: absolute; }\\n          .fff-draw-main #draw-layout #draw-container #designer_canvas #shape-controls .shape-controller {\\n            position: absolute;\\n            border: 1px solid #883333;\\n            width: 8px;\\n            height: 8px;\\n            z-index: 1;\\n            display: block;\\n            background: white; }\\n          .fff-draw-main #draw-layout #draw-container #designer_canvas #shape-controls .shape-anchor {\\n            position: absolute;\\n            border: 1px solid #883333;\\n            border-radius: 4px;\\n            width: 6px;\\n            height: 6px;\\n            z-index: 1;\\n            display: block;\\n            background: white; }\\n\\n.fff-draw-tools .btn-group > .toolbar-button:first-child {\\n  border-top-left-radius: 5px;\\n  border-bottom-left-radius: 5px;\\n  border-left: 1px solid #cccccc; }\\n\\n.fff-draw-tools .btn-group > .toolbar-button:last-child {\\n  border-top-right-radius: 5px;\\n  border-bottom-right-radius: 5px; }\\n\\n.fff-draw-tools .btn-group {\\n  display: inline-block;\\n  margin: 10px; }\\n  .fff-draw-tools .btn-group .toolbar-button {\\n    cursor: pointer;\\n    padding: 4px 12px;\\n    display: inline-block;\\n    border-top: 1px solid #cccccc;\\n    border-bottom: 1px solid #cccccc;\\n    border-right: 1px solid #cccccc;\\n    background-image: linear-gradient(to bottom, #ffffff, #e6e6e6); }\\n    .fff-draw-tools .btn-group .toolbar-button:hover {\\n      background: #e6e6e6; }\\n    .fff-draw-tools .btn-group .toolbar-button:active {\\n      -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\\n      -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05); }\\n    .fff-draw-tools .btn-group .toolbar-button .icon {\\n      color: #333333;\\n      font-size: 16px; }\\n  .fff-draw-tools .btn-group .active {\\n    background-image: linear-gradient(to bottom, #5bc0de, #2f96b4); }\\n    .fff-draw-tools .btn-group .active:hover {\\n      background-image: linear-gradient(to bottom, #5cb6d4, #308caa); }\\n    .fff-draw-tools .btn-group .active:active {\\n      -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\\n      -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05); }\\n    .fff-draw-tools .btn-group .active .icon {\\n      color: white; }\\n  .fff-draw-tools .btn-group .toolbar-button[disabled='disabled'] {\\n    background: #e6e6e6;\\n    color: #333333;\\n    background-image: none;\\n    cursor: not-allowed; }\\n    .fff-draw-tools .btn-group .toolbar-button[disabled='disabled']:active {\\n      -webkit-box-shadow: none;\\n      -moz-box-shadow: none;\\n      box-shadow: none; }\\n    .fff-draw-tools .btn-group .toolbar-button[disabled='disabled'] .icon {\\n      color: #868686;\\n      cursor: not-allowed; }\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tvar styleTarget = fn.call(this, selector);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[selector] = styleTarget;\n\t\t}\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(18);\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction calcCanvasSize(shapeList) {\n  var minLeft = Infinity,\n      maxRight = -Infinity;\n  var minTop = Infinity,\n      maxBottom = -Infinity;\n\n  for (var i = 0; i < shapeList.length; i++) {\n    minLeft = shapeList[i].left < minLeft ? shapeList[i].left : minLeft;\n    maxRight = shapeList[i].left + shapeList[i].width > maxRight ? shapeList[i].left + shapeList[i].width : maxRight;\n    minTop = shapeList[i].top < minTop ? shapeList[i].top : minTop;\n    maxBottom = shapeList[i].top + shapeList[i].height > maxBottom ? shapeList[i].top + shapeList[i].height : maxBottom;\n  }\n  if (!isFinite(minLeft) || !isFinite(maxRight) || !isFinite(minTop) || !isFinite(maxBottom)) {\n    return null;\n  }\n\n  return {\n    width: maxRight - minLeft,\n    height: maxBottom - minTop,\n    offsetX: minLeft,\n    offsetY: minTop\n  };\n}\n\nfunction generateImage(shapeList) {\n  if (!shapeList || shapeList.length <= 0) {\n    return null;\n  }\n  var canvasData = calcCanvasSize(shapeList);\n  if (!canvasData) {\n    return null;\n  }\n  var canvas = document.createElement('canvas');\n\n  canvas.width = canvasData.width;\n  canvas.height = canvasData.height;\n  var context = canvas.getContext('2d');\n\n  // All lines are above other shapes, so lines need to be drawn later.\n  var shape = void 0,\n      left = void 0,\n      top = void 0,\n      lineList = [];\n  for (var i = 0; i < shapeList.length; i++) {\n    shape = shapeList[i];\n    if (shape.type === 'line') {\n      lineList.push(shape);\n      continue;\n    }\n    left = shape.left - canvasData.offsetX;\n    top = shape.top - canvasData.offsetY;\n    shape.drawOnOtherCanvas(context, left, top);\n  }\n  for (var _i = 0; _i < lineList.length; _i++) {\n    shape = lineList[_i];\n    left = shape.left - canvasData.offsetX;\n    top = shape.top - canvasData.offsetY;\n    shape.drawOnOtherCanvas(context, left, top);\n  }\n\n  var image = new Image();\n  image.src = canvas.toDataURL(\"image/png\");\n  return image;\n}\n\nexports.default = generateImage;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _index = __webpack_require__(5);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _background = __webpack_require__(26);\n\nvar _background2 = _interopRequireDefault(_background);\n\nvar _index3 = __webpack_require__(27);\n\nvar _toolbar = __webpack_require__(12);\n\nvar _toolbar2 = _interopRequireDefault(_toolbar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar drawContainerHtml = '<div class=\"draw-main\">\\n    <div id=\"draw-components\">\\n    </div>\\n    <div id=\"draw-layout\">\\n        <div id=\"draw-container\" style=\"padding:1000px;\">\\n            <div id=\"designer_canvas\">\\n                <canvas id=\"canvas-background\"></canvas>\\n                <div id=\"shape-controls\">\\n                    <canvas id=\"controls-bounding\" width=\"120\" height=\"90\"></canvas>\\n                    <div class=\"shape-controller n w\" resizedir=\"nw\" style=\"cursor:nw-resize; left:5px; top:5px;\"></div>\\n                    <div class=\"shape-controller n e\" resizedir=\"ne\" style=\"cursor:ne-resize; right:5px; top:5px;\"></div>\\n                    <div class=\"shape-controller s e\" resizedir=\"se\" style=\"cursor:se-resize; right:5px; bottom:5px;\"></div>\\n                    <div class=\"shape-controller s w\" resizedir=\"sw\" style=\"cursor:sw-resize; left:5px; bottom:5px;\"></div>\\n                    <div class=\"shape-anchor\" style=\"left:calc(50% - 4px); top:6px;\"></div>\\n                    <div class=\"shape-anchor\" style=\"right:6px; top:calc(50% - 4px);\"></div>\\n                    <div class=\"shape-anchor\" style=\"left:calc(50% - 4px); bottom:6px;\"></div>\\n                    <div class=\"shape-anchor\" style=\"left:6px; top:calc(50% - 4px);\"></div>\\n                </div>\\n                <div id=\"bezier-controls\">\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>';\n\nfunction createContainer(el) {\n  el.innerHTML = drawContainerHtml;\n}\n\nfunction createComponets(el, shapes) {\n  var componentGroup = el;\n  var tempHtml = '';\n  for (var i = 0; i < shapes.length; i++) {\n    var shapeName = shapes[i];\n    tempHtml += '<div class=\"component-box\" shapename=\"' + shapeName + '\">\\n        <canvas class=\"component-item\" width=\"30\" height=\"30\"></canvas>\\n    </div>';\n  }\n  componentGroup.innerHTML = tempHtml;\n  var componentItems = document.getElementsByClassName('component-box');\n  for (var _i = 0; _i < shapes.length; _i++) {\n    var _shapeName = shapes[_i];\n    var shape = new ((0, _index2.default)(_shapeName))(componentItems[_i], 'process', -1, -1, 30, 30);\n    shape.draw(2, 5);\n  }\n}\n\nfunction curryEventHandlers(eventType, shapeList, isToolbarEnabled) {\n  var handlers = (0, _index3.getEventHandlers)(eventType, isToolbarEnabled);\n  return function () {\n    for (var j = 0; j < handlers.length; j++) {\n      handlers[j].call(this, event, shapeList);\n    }\n  };\n}\n\nfunction init(instanceSetting, shapeList) {\n  var isToolbarEnabled = !!instanceSetting.toolbar.el;\n\n  instanceSetting.el.classList.add('fff-draw-main');\n\n  createContainer(instanceSetting.el);\n\n  createComponets(document.getElementById('draw-components'), instanceSetting.shapes);\n\n  if (isToolbarEnabled) {\n    (0, _toolbar2.default)(instanceSetting.toolbar.el, instanceSetting.toolbar.tools, instanceSetting.toolbar.hint);\n  }\n\n  var canvasBackground = document.getElementById('canvas-background');\n  (0, _background2.default)(canvasBackground);\n\n  var drawLayout = document.getElementById('draw-layout');\n  drawLayout.scrollTop = 1000 - 10;\n  drawLayout.scrollLeft = 1000 - 10;\n\n  for (var i = 0; i < _index3.eventList.length; i++) {\n    var func = curryEventHandlers(_index3.eventList[i], shapeList, isToolbarEnabled);\n    window.addEventListener(_index3.eventList[i], func);\n  }\n}\n\nexports.default = init;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _shape = __webpack_require__(2);\n\nvar _shape2 = _interopRequireDefault(_shape);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Process = function (_Shape) {\n  _inherits(Process, _Shape);\n\n  function Process(el, type, left, top, width, height) {\n    _classCallCheck(this, Process);\n\n    return _possibleConstructorReturn(this, (Process.__proto__ || Object.getPrototypeOf(Process)).call(this, el, type, left, top, width, height));\n  }\n\n  _createClass(Process, [{\n    key: 'draw',\n    value: function draw(paddingHorizontal, paddingVertical, drawContext) {\n      // Note that only the padding of the component is not default.\n      var horizontal = typeof paddingHorizontal === 'undefined' || paddingHorizontal === null ? this.padding : paddingHorizontal;\n      var vertical = typeof paddingVertical === 'undefined' || paddingVertical === null ? this.padding : paddingVertical;\n      var context = typeof drawContext === 'undefined' || drawContext === null ? this.context : drawContext;\n\n      this.resetDrawStyle(context);\n      context.fillRect(horizontal, vertical, this.width - 2 * horizontal, this.height - 2 * vertical);\n      context.beginPath();\n      context.rect(horizontal, vertical, this.width - 2 * horizontal, this.height - 2 * vertical);\n      context.stroke();\n    }\n  }, {\n    key: 'drawOnOtherCanvas',\n    value: function drawOnOtherCanvas(context, left, top) {\n      context.translate(left, top);\n      this.draw(null, null, context);\n      context.translate(-left, -top);\n    }\n  }, {\n    key: 'isPositionInShape',\n    value: function isPositionInShape(x, y) {\n      return x > this.left + this.padding && x < this.left + this.width - this.padding && y > this.top + this.padding && y < this.top + this.height - this.padding;\n    }\n  }, {\n    key: 'isPositionInLineArea',\n    value: function isPositionInLineArea(x, y) {\n      if (this.isPositionInShape(x, y)) {\n        return false;\n      } else return x >= this.left && x <= this.left + this.width && y >= this.top && y <= this.top + this.height;\n    }\n  }, {\n    key: 'judgeInShape',\n    value: function judgeInShape(x, y) {\n      var type = void 0;\n      type = this.isPositionInShape(x, y) ? 'shapeBody' : null;\n      type = !type ? this.isPositionInLineArea(x, y) ? 'shapeLineArea' : 'empty' : type;\n      return { shape: this, type: type };\n    }\n\n    // Every shape rely on it's own way to calculate line end positions\n    // and all what the lines need to get is just the positions.\n\n    // ReferPosition includes up, down, left, right, nwCorner, neCorner, seCorner, swCorner.\n    // Note that the referPercent is based on inner width of the shape.\n\n  }, {\n    key: 'calcLinePosition',\n    value: function calcLinePosition(referPosition, referPercent) {\n      var x = void 0,\n          y = void 0;\n      var points = this.calcShapePoints();\n      switch (referPosition) {\n        case 'nwCorner':\n          x = points[0];\n          y = points[1];\n          break;\n        case 'neCorner':\n          x = points[2];\n          y = points[3];\n          break;\n        case 'seCorner':\n          x = points[4];\n          y = points[5];\n          break;\n        case 'swCorner':\n          x = points[6];\n          y = points[7];\n          break;\n        case 'up':\n          x = this.left + this.padding + referPercent * (this.width - 2 * this.padding);\n          y = this.top + this.padding;\n          break;\n        case 'down':\n          x = this.left + this.padding + referPercent * (this.width - 2 * this.padding);\n          y = this.top + this.height - this.padding;\n          break;\n        case 'left':\n          x = this.left + this.padding;\n          y = this.top + this.padding + referPercent * (this.height - 2 * this.padding);\n          break;\n        case 'right':\n          x = this.left + this.width - this.padding;\n          y = this.top + this.padding + referPercent * (this.height - 2 * this.padding);\n          break;\n      }\n      return { x: x, y: y };\n    }\n  }, {\n    key: 'calcShapePoints',\n    value: function calcShapePoints() {\n      // Points: nw -> ne -> se -> sw\n      var x1 = this.left + this.padding,\n          y1 = this.top + this.padding;\n      var x2 = this.left + this.width - this.padding,\n          y2 = this.top + this.padding;\n      var x3 = this.left + this.width - this.padding,\n          y3 = this.top + this.height - this.padding;\n      var x4 = this.left + this.padding,\n          y4 = this.top + this.height - this.padding;\n      return [x1, y1, x2, y2, x3, y3, x4, y4];\n    }\n  }, {\n    key: 'getLineReference',\n    value: function getLineReference(x, y) {\n      var referPosition = null,\n          referPercent = 0,\n          position = void 0;\n\n      var _calcShapePoints = this.calcShapePoints(),\n          _calcShapePoints2 = _slicedToArray(_calcShapePoints, 8),\n          x1 = _calcShapePoints2[0],\n          y1 = _calcShapePoints2[1],\n          x2 = _calcShapePoints2[2],\n          y2 = _calcShapePoints2[3],\n          x3 = _calcShapePoints2[4],\n          y3 = _calcShapePoints2[5],\n          x4 = _calcShapePoints2[6],\n          y4 = _calcShapePoints2[7];\n\n      if (this.isPositionInLineArea(x, y)) {\n        if (y < y1) {\n          if (x < x1) {\n            referPosition = 'nwCorner';\n          } else if (x > x2) {\n            referPosition = 'neCorner';\n          } else {\n            referPosition = 'up';\n            referPercent = (x - x1) / (this.width - 2 * this.padding);\n          }\n        } else if (y > y4) {\n          if (x < x4) {\n            referPosition = 'swCorner';\n          } else if (x > x3) {\n            referPosition = 'seCorner';\n          } else {\n            referPosition = 'down';\n            referPercent = (x - x4) / (this.width - 2 * this.padding);\n          }\n        } else {\n          if (x < this.left + this.width / 2) {\n            referPosition = 'left';\n            referPercent = (y - this.top - this.padding) / (this.height - 2 * this.padding);\n          } else {\n            referPosition = 'right';\n            referPercent = (y - this.top - this.padding) / (this.height - 2 * this.padding);\n          }\n        }\n      } else if (this.isPositionInShape(x, y)) {\n        referPercent = 0.5;\n        // check the position in which area of the shape\n        // the areas are shown below:\n        //  __\n        // |\\/|\n        // |/\\|\n        //  --\n        var lineRefer1 = (x - x3) / (x1 - x3) - (y - y3) / (y1 - y3);\n        var lineRefer2 = (x - x4) / (x2 - x4) - (y - y4) / (y2 - y4);\n        //let lineRefer1 = ((x - this.left - this.width + this.padding) / (2 * this.padding - this.width)\n        //  - (y - this.top - this.height + this.padding) / (2 * this.padding - this.height))\n        //let lineRefer2 = ((x - this.left - this.width + this.padding) / (2 * this.padding - this.width)\n        //  - (y - this.top - this.padding) / (-2 * this.padding + this.height))\n        if (lineRefer1 <= 0 && lineRefer2 <= 0) {\n          referPosition = 'up';\n        } else if (lineRefer1 <= 0 && lineRefer2 >= 0) {\n          referPosition = 'right';\n        } else if (lineRefer1 >= 0 && lineRefer2 >= 0) {\n          referPosition = 'down';\n        } else {\n          referPosition = 'left';\n        }\n      } else {\n        return null;\n      }\n\n      position = this.calcLinePosition(referPosition, referPercent);\n      return {\n        referPosition: referPosition,\n        referPercent: referPercent,\n        position: position\n      };\n    }\n  }, {\n    key: 'resetLinesPosition',\n    value: function resetLinesPosition() {\n      var lineData = void 0,\n          position = void 0;\n      for (var i = 0; i < this.relativeLines.length; i++) {\n        lineData = this.relativeLines[i];\n        position = this.calcLinePosition(lineData.referPosition, lineData.referPercent);\n        if (lineData.type === 'src') {\n          lineData.line.resetSrcPosition(position);\n          lineData.line.draw();\n        } else {\n          lineData.line.resetDestPosition(position);\n          lineData.line.draw();\n        }\n      }\n    }\n  }]);\n\n  return Process;\n}(_shape2.default);\n\n// Basically, each shape behaves like this one\n// and these function must be contained for calling:\n// draw, judgeInShape, getLineReference, resetLinesPosition, drawOnOtherCanvas\n\nexports.default = Process;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _shape = __webpack_require__(2);\n\nvar _shape2 = _interopRequireDefault(_shape);\n\nvar _calcPosition = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// Calculate the four border line of the decision shape\n// in order to judge which side is the point placed at.\nfunction calcBorderLineResult(x, y, points) {\n  var lineResult = [];\n  for (var i = 0; i < 4; i++) {\n    var x1 = points[i * 2],\n        y1 = points[i * 2 + 1];\n    var x2 = points[(i + 1) * 2 % 8],\n        y2 = points[(i + 1) * 2 % 8 + 1];\n    lineResult[i] = (x - x2) / (x1 - x2) - (y - y2) / (y1 - y2);\n  }\n  return lineResult;\n}\n\nfunction calcPercentOfLine(x, y, pointA, pointB) {\n  var point = (0, _calcPosition.calcPointToLineFoot)([x, y], [pointA[0], pointA[1], pointB[0], pointB[1]]);\n  return (point.x - pointA[0]) / (pointB[0] - pointA[0]);\n}\n\nvar Decision = function (_Shape) {\n  _inherits(Decision, _Shape);\n\n  function Decision(el, type, left, top, width, height) {\n    _classCallCheck(this, Decision);\n\n    return _possibleConstructorReturn(this, (Decision.__proto__ || Object.getPrototypeOf(Decision)).call(this, el, type, left, top, width, height));\n  }\n\n  _createClass(Decision, [{\n    key: 'draw',\n    value: function draw(paddingHorizontal, paddingVertical, drawContext) {\n      var horizontal = typeof paddingHorizontal === 'undefined' || paddingHorizontal === null ? this.padding : paddingHorizontal;\n      var vertical = typeof paddingVertical === 'undefined' || paddingVertical === null ? this.padding : paddingVertical;\n      var context = typeof drawContext === 'undefined' || drawContext === null ? this.context : drawContext;\n\n      this.resetDrawStyle(context);\n      context.beginPath();\n      context.moveTo(this.width / 2, vertical);\n      context.lineTo(this.width - horizontal, this.height / 2);\n      context.lineTo(this.width / 2, this.height - vertical);\n      context.lineTo(horizontal, this.height / 2);\n      context.closePath();\n      context.fill();\n      context.stroke();\n    }\n  }, {\n    key: 'drawOnOtherCanvas',\n    value: function drawOnOtherCanvas(context, left, top) {\n      context.translate(left, top);\n      this.draw(null, null, context);\n      context.translate(-left, -top);\n    }\n  }, {\n    key: 'isPositionInShape',\n    value: function isPositionInShape(x, y) {\n      var points = this.calcShapePoints();\n      var lineResult = calcBorderLineResult(x, y, points);\n\n      return lineResult[0] > 0 && lineResult[1] < 0 && lineResult[2] > 0 && lineResult[3] < 0;\n    }\n  }, {\n    key: 'isPositionInLineArea',\n    value: function isPositionInLineArea(x, y, bodyExcluded) {\n      if (!bodyExcluded && this.isPositionInShape(x, y)) {\n        return false;\n      }\n      var points = this.calcLineAreaPoints();\n      var lineResult = calcBorderLineResult(x, y, points);\n\n      return lineResult[0] >= 0 && lineResult[1] <= 0 && lineResult[2] >= 0 && lineResult[3] <= 0;\n    }\n  }, {\n    key: 'judgeInShape',\n    value: function judgeInShape(x, y) {\n      var type = void 0;\n      type = this.isPositionInShape(x, y) ? 'shapeBody' : null;\n      type = !type ? this.isPositionInLineArea(x, y, true) ? 'shapeLineArea' : 'empty' : type;\n      return { shape: this, type: type };\n    }\n    // ReferPosition includes top, right, bottom, left, nwBorder, neBorder, seBorder, swBorder.\n\n  }, {\n    key: 'calcLinePosition',\n    value: function calcLinePosition(referPosition, referPercent) {\n      var x = void 0,\n          y = void 0,\n          point = void 0;\n      var points = this.calcShapePoints();\n      switch (referPosition) {\n        case 'top':\n          x = points[0];\n          y = points[1];\n          break;\n        case 'right':\n          x = points[2];\n          y = points[3];\n          break;\n        case 'bottom':\n          x = points[4];\n          y = points[5];\n          break;\n        case 'left':\n          x = points[6];\n          y = points[7];\n          break;\n        case 'nwBorder':\n          point = (0, _calcPosition.calcPointOnLine)([points[6], points[7]], [points[0], points[1]], referPercent);\n          break;\n        case 'neBorder':\n          point = (0, _calcPosition.calcPointOnLine)([points[0], points[1]], [points[2], points[3]], referPercent);\n          break;\n        case 'seBorder':\n          point = (0, _calcPosition.calcPointOnLine)([points[2], points[3]], [points[4], points[5]], referPercent);\n          break;\n        case 'swBorder':\n          point = (0, _calcPosition.calcPointOnLine)([points[4], points[5]], [points[6], points[7]], referPercent);\n          break;\n      }\n      if (point) {\n        return point;\n      } else {\n        return { x: x, y: y };\n      }\n    }\n  }, {\n    key: 'calcShapePoints',\n    value: function calcShapePoints() {\n      // Points: top -> right -> bottom -> left\n      var x1 = this.left + this.width / 2,\n          y1 = this.top + this.padding;\n      var x2 = this.left + this.width - this.padding,\n          y2 = this.top + this.height / 2;\n      var x3 = this.left + this.width / 2,\n          y3 = this.top + this.height - this.padding;\n      var x4 = this.left + this.padding,\n          y4 = this.top + this.height / 2;\n      return [x1, y1, x2, y2, x3, y3, x4, y4];\n    }\n  }, {\n    key: 'calcLineAreaPoints',\n    value: function calcLineAreaPoints() {\n      var x1 = this.left + this.width / 2,\n          y1 = this.top;\n      var x2 = this.left + this.width,\n          y2 = this.top + this.height / 2;\n      var x3 = this.left + this.width / 2,\n          y3 = this.top + this.height;\n      var x4 = this.left,\n          y4 = this.top + this.height / 2;\n      return [x1, y1, x2, y2, x3, y3, x4, y4];\n    }\n  }, {\n    key: 'getLineReference',\n    value: function getLineReference(x, y) {\n      var referPosition = null,\n          referPercent = 0,\n          position = void 0;\n      var points = this.calcShapePoints();\n\n      var _points = _slicedToArray(points, 8),\n          x1 = _points[0],\n          y1 = _points[1],\n          x2 = _points[2],\n          y2 = _points[3],\n          x3 = _points[4],\n          y3 = _points[5],\n          x4 = _points[6],\n          y4 = _points[7];\n\n      if (this.isPositionInShape(x, y)) {\n        var x5 = (x1 + x2) / 2,\n            y5 = (y1 + y2) / 2;\n        var x6 = (x2 + x3) / 2,\n            y6 = (y2 + y3) / 2;\n        var x7 = (x3 + x4) / 2,\n            y7 = (y3 + y4) / 2;\n        var x8 = (x4 + x1) / 2,\n            y8 = (y4 + y1) / 2;\n        var result = [];\n        result[0] = (x - x7) / (x5 - x7) - (y - y7) / (y5 - y7);\n        result[1] = (x - x8) / (x6 - x8) - (y - y8) / (y6 - y8);\n        if (result[1] >= 0) {\n          referPosition = result[0] <= 0 ? 'top' : 'right';\n        } else {\n          referPosition = result[0] <= 0 ? 'left' : 'bottom';\n        }\n      } else if (this.isPositionInLineArea(x, y, true)) {\n        var pointA = void 0,\n            pointB = void 0;\n        var results = calcBorderLineResult(x, y, points);\n        if (results[0] <= 0 && results[3] >= 0) {\n          referPosition = 'top';\n        } else if (results[0] <= 0 && results[1] >= 0) {\n          referPosition = 'right';\n        } else if (results[2] <= 0 && results[1] >= 0) {\n          referPosition = 'bottom';\n        } else if (results[2] <= 0 && results[3] >= 0) {\n          referPosition = 'left';\n        } else {\n          if (results[0] <= 0) {\n            pointA = [x1, y1];\n            pointB = [x2, y2];\n            referPosition = 'neBorder';\n          } else if (results[1] >= 0) {\n            pointA = [x2, y2];\n            pointB = [x3, y3];\n            referPosition = 'seBorder';\n          } else if (results[2] <= 0) {\n            pointA = [x3, y3];\n            pointB = [x4, y4];\n            referPosition = 'swBorder';\n          } else if (results[3] >= 0) {\n            pointA = [x4, y4];\n            pointB = [x1, y1];\n            referPosition = 'nwBorder';\n          }\n          referPercent = calcPercentOfLine(x, y, pointA, pointB);\n        }\n      } else {\n        return null;\n      }\n\n      position = this.calcLinePosition(referPosition, referPercent);\n      return {\n        referPosition: referPosition,\n        referPercent: referPercent,\n        position: position\n      };\n    }\n  }, {\n    key: 'resetLinesPosition',\n    value: function resetLinesPosition() {\n      var lineData = void 0,\n          position = void 0;\n      for (var i = 0; i < this.relativeLines.length; i++) {\n        lineData = this.relativeLines[i];\n        position = this.calcLinePosition(lineData.referPosition, lineData.referPercent);\n        if (lineData.type === 'src') {\n          lineData.line.resetSrcPosition(position);\n          lineData.line.draw();\n        } else {\n          lineData.line.resetDestPosition(position);\n          lineData.line.draw();\n        }\n      }\n    }\n  }]);\n\n  return Decision;\n}(_shape2.default);\n\nexports.default = Decision;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _terminator = __webpack_require__(9);\n\nvar _terminator2 = _interopRequireDefault(_terminator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar StoredData = function (_Terminator) {\n  _inherits(StoredData, _Terminator);\n\n  function StoredData(el, type, left, top, width, height) {\n    _classCallCheck(this, StoredData);\n\n    return _possibleConstructorReturn(this, (StoredData.__proto__ || Object.getPrototypeOf(StoredData)).call(this, el, type, left, top, width, height));\n  }\n\n  _createClass(StoredData, [{\n    key: 'draw',\n    value: function draw(paddingHorizontal, paddingVertical, drawContext) {\n      var horizontal = typeof paddingHorizontal === 'undefined' || paddingHorizontal === null ? this.padding : paddingHorizontal;\n      var vertical = typeof paddingVertical === 'undefined' || paddingVertical === null ? this.padding : paddingVertical;\n      var context = typeof drawContext === 'undefined' || drawContext === null ? this.context : drawContext;\n\n      var radius = (this.height - 2 * vertical) / 2;\n      var centerA = [],\n          centerB = [];\n      centerA.x = horizontal / this.calcWidthHeightRatio() + radius;\n      centerA.y = vertical + radius;\n      centerB.x = (this.width - horizontal) / this.calcWidthHeightRatio() - radius;\n      centerB.y = vertical + radius;\n\n      this.resetDrawStyle(context);\n      context.beginPath();\n      context.scale(this.calcWidthHeightRatio(), 1);\n      context.arc(centerA.x, centerA.y, radius, 0.5 * Math.PI, 1.5 * Math.PI);\n      context.lineTo(centerB.x, vertical);\n      context.arc(centerB.x, centerB.y, radius, 1.5 * Math.PI, 0.5 * Math.PI);\n      context.closePath();\n      context.fill();\n      context.arc(centerB.x, centerB.y, radius, 0.5 * Math.PI, 1.5 * Math.PI);\n      context.stroke();\n      context.scale(1 / this.calcWidthHeightRatio(), 1);\n    }\n  }]);\n\n  return StoredData;\n}(_terminator2.default);\n\nexports.default = StoredData;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _shapeDefaultSetting = __webpack_require__(3);\n\nvar _calcDistance = __webpack_require__(25);\n\nvar _calcPosition = __webpack_require__(1);\n\nvar _colors = __webpack_require__(6);\n\nvar _colors2 = _interopRequireDefault(_colors);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar lineId = 0;\nvar lineAreaWidth = 7;\n// Delta is a number which is small enough\n// that it can be used while judging whether\n// two floating numbers are equal.\nvar delta = 0.1;\n\n// Cubic bezier curve:\n// begin point: (x0,y0), control points: (x1,y1), (x2,y2), end point: (x3,y3)\n// x(t) = ax * t ^ 3 + bx * t ^ 2 + cx * t + x0\n// y(t) = ay * t ^ 3 + by * t ^ 2 + cy * t + y0\n// x1 = x0 + cx / 3\n// x2 = x1 + ( cx + bx ) / 3\n// x3 = x0 + cx + bx + ax\n// y1 = y0 + cy / 3\n// y2 = y1 + ( cy + by ) / 3\n// y3 = y0 + cy + by + ay\n// cx = 3 * ( x1 - x0 )\n// bx = 3 * ( x2 - x1 ) - cx\n// ax = x3 - x0 - cx - bx\n// cy = 3 * ( y1 - y0 )\n// by = 3 * ( y2 - y1 ) - cy\n// ay = y3 - y0 - cy - by\n// x(t) = (1-t)^3x0 + 3t(1-t)^2x1 + 3t^2(1-t)x2 + t^3x3\n// y(t) = (1-t)^3y0 + 3t(1-t)^2y1 + 3t^2(1-t)y2 + t^3y3\n\nvar Line = function () {\n  function Line(el, src, dest, settings) {\n    _classCallCheck(this, Line);\n\n    this.id = 'line' + lineId++;\n    this.el = el;\n    this.canvas = el.getElementsByTagName('canvas')[0];\n    this.shapeText = el.getElementsByClassName('shape-text')[0];\n    this.context = this.canvas.getContext('2d');\n    // src and dest contain shape, position\n    this.src = src;\n    this.dest = dest;\n    this.type = 'line';\n\n    this.width = 0;\n    this.height = 0;\n    this.left = 0;\n    this.top = 0;\n\n    this.padding = _shapeDefaultSetting.defaultPadding;\n\n    if (settings) {}\n    var temp = (0, _shapeDefaultSetting.getDefaultSetting)('line');\n    this.linkerType = temp.linkerType;\n    this.arrowType = temp.arrowType;\n\n    this.drawStyle = {\n      strokeStyle: _shapeDefaultSetting.drawingDefaultSetting.strokeStyle,\n      lineWidth: _shapeDefaultSetting.drawingDefaultSetting.lineWidth,\n      lineDash: _shapeDefaultSetting.drawingDefaultSetting.lineDash\n    };\n\n    this.drawBeginPosition = {};\n    this.drawEndPosition = {};\n    this.bezierControlPoints = [];\n\n    this.init();\n  }\n\n  _createClass(Line, [{\n    key: \"destruct\",\n    value: function destruct() {\n      this.remove();\n      this.callShapesToDetach();\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.resetCanvas();\n    }\n  }, {\n    key: \"resetSrcPosition\",\n    value: function resetSrcPosition(position) {\n      this.src.position = position;\n      this.resetCanvas();\n    }\n  }, {\n    key: \"resetDestPosition\",\n    value: function resetDestPosition(position) {\n      this.dest.position = position;\n      this.resetCanvas();\n    }\n  }, {\n    key: \"resetCanvas\",\n    value: function resetCanvas() {\n      switch (this.linkerType) {\n        case 'straight':\n          var width = Math.abs(this.src.position.x - this.dest.position.x) + 2 * this.padding;\n          var height = Math.abs(this.src.position.y - this.dest.position.y) + 2 * this.padding;\n\n          this.canvas.width = this.el.width = this.width = width;\n          this.el.style.width = this.canvas.style.width = width + 'px';\n          this.canvas.height = this.el.height = this.height = height;\n          this.el.style.height = this.canvas.style.height = height + 'px';\n\n          var x = void 0,\n              y = void 0;\n          if (this.dest.position.x - this.src.position.x >= 0) {\n            x = this.src.position.x - this.padding;\n          } else {\n            x = this.dest.position.x - this.padding;\n          }\n          if (this.dest.position.y - this.src.position.y >= 0) {\n            y = this.src.position.y - this.padding;\n          } else {\n            y = this.dest.position.y - this.padding;\n          }\n          this.setPosition(x, y);\n          break;\n        case 'bezier':\n          break;\n      }\n    }\n  }, {\n    key: \"resetSrc\",\n    value: function resetSrc(src) {\n      this.src = src;\n      this.resetCanvas();\n    }\n  }, {\n    key: \"resetDest\",\n    value: function resetDest(dest) {\n      this.dest = dest;\n      this.resetCanvas();\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(x, y) {\n      this.left = x;\n      this.top = y;\n      this.el.style.left = x + 'px';\n      this.el.style.top = y + 'px';\n    }\n  }, {\n    key: \"append\",\n    value: function append() {\n      var parent = document.getElementById('designer_canvas');\n      var sibling = document.getElementById('shape_controls');\n\n      parent.insertBefore(this.el, sibling);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var parent = document.getElementById('designer_canvas');\n      parent.removeChild(this.el);\n    }\n  }, {\n    key: \"resetDrawStyle\",\n    value: function resetDrawStyle(context) {\n      context.strokeStyle = this.drawStyle.strokeStyle;\n      context.lineWidth = this.drawStyle.lineWidth;\n      context.setLineDash(this.drawStyle.lineDash);\n    }\n  }, {\n    key: \"calcDrawingBeginEndPoints\",\n    value: function calcDrawingBeginEndPoints() {\n      if (this.dest.position.x - this.src.position.x >= 0) {\n        this.drawBeginPosition.x = this.padding;\n        this.drawEndPosition.x = this.width - this.padding;\n      } else {\n        this.drawBeginPosition.x = this.width - this.padding;\n        this.drawEndPosition.x = this.padding;\n      }\n      if (this.dest.position.y - this.src.position.y >= 0) {\n        this.drawBeginPosition.y = this.padding;\n        this.drawEndPosition.y = this.height - this.padding;\n      } else {\n        this.drawBeginPosition.y = this.height - this.padding;\n        this.drawEndPosition.y = this.padding;\n      }\n    }\n  }, {\n    key: \"calcJudgingBeginEndPoints\",\n    value: function calcJudgingBeginEndPoints() {\n      var x1 = void 0,\n          x2 = void 0,\n          y1 = void 0,\n          y2 = void 0;\n      if (this.dest.position.x - this.src.position.x >= 0) {\n        x1 = this.left + this.padding;\n        x2 = this.left + this.width - this.padding;\n      } else {\n        x1 = this.left + this.width - this.padding;\n        x2 = this.left + this.padding;\n      }\n      if (this.dest.position.y - this.src.position.y >= 0) {\n        y1 = this.top + this.padding;\n        y2 = this.top + this.height - this.padding;\n      } else {\n        y1 = this.top + this.height - this.padding;\n        y2 = this.top + this.padding;\n      }\n      return [x1, y1, x2, y2];\n    }\n  }, {\n    key: \"clearCanvas\",\n    value: function clearCanvas() {\n      this.canvas.width = this.width;\n    }\n  }, {\n    key: \"calcArrowAngle\",\n    value: function calcArrowAngle() {\n      var angle = void 0;\n      switch (this.linkerType) {\n        case 'straight':\n          var offsetX = this.dest.position.x - this.src.position.x;\n          var offsetY = this.dest.position.y - this.src.position.y;\n          if (offsetY === 0) {\n            angle = offsetX >= 0 ? Math.PI / 2 : -Math.PI / 2;\n          } else if (offsetY < 0) {\n            angle = Math.atan(offsetX / -offsetY);\n          } else {\n            angle = Math.PI - Math.atan(offsetX / offsetY);\n          }\n          break;\n        case 'bezier':\n          break;\n      }\n      return angle;\n    }\n  }, {\n    key: \"drawArrow\",\n    value: function drawArrow(angle, context) {\n      context.translate(this.drawEndPosition.x, this.drawEndPosition.y);\n      context.rotate(angle);\n      context.beginPath();\n      context.moveTo(0, 0);\n      context.lineTo(5, 14);\n      context.lineTo(-5, 14);\n      context.fillStyle = '#000000';\n      context.fill();\n      context.rotate(-angle);\n      context.translate(-this.drawEndPosition.x, -this.drawEndPosition.y);\n    }\n  }, {\n    key: \"drawReferMark\",\n    value: function drawReferMark(end, context) {\n      var position = void 0;\n      if (end === 'src') {\n        position = {\n          x: this.drawBeginPosition.x,\n          y: this.drawBeginPosition.y\n        };\n      } else {\n        position = {\n          x: this.drawEndPosition.x,\n          y: this.drawEndPosition.y\n        };\n      }\n      context.beginPath();\n      context.arc(position.x, position.y, this.padding, 0, 2 * Math.PI);\n      context.fillStyle = _colors2.default.lineArrowHightlight;\n      context.fill();\n    }\n  }, {\n    key: \"drawLineBody\",\n    value: function drawLineBody(context) {\n      switch (this.linkerType) {\n        case 'straight':\n          context.beginPath();\n          context.moveTo(this.drawBeginPosition.x, this.drawBeginPosition.y);\n          context.lineTo(this.drawEndPosition.x, this.drawEndPosition.y);\n          context.stroke();\n          break;\n        case 'bezier':\n          context.beginPath();\n          context.moveTo(this.drawBeginPosition.x, this.drawBeginPosition.y);\n          context.bezierCurveTo(this.bezierControlPoints[0].x, this.bezierControlPoints[0].y, this.bezierControlPoints[1].x, this.bezierControlPoints[1].y, this.drawEndPosition.x, this.drawEndPosition.y);\n          context.stroke();\n          context.beginPath();\n          break;\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(referMark, isSelected, drawContext) {\n      var context = typeof drawContext === 'undefined' || drawContext === null ? this.context : drawContext;\n\n      if (context === this.context) {\n        this.clearCanvas();\n      }\n      this.resetDrawStyle(context);\n      this.calcDrawingBeginEndPoints();\n\n      if (referMark) {\n        this.drawReferMark(referMark, context);\n      }\n\n      this.drawLineBody(context);\n      if (isSelected) {\n        context.strokeStyle = _colors2.default.lineBodyHighlight;\n        context.lineWidth = 6;\n        this.drawLineBody(context);\n      }\n\n      this.drawArrow(this.calcArrowAngle(), context);\n    }\n  }, {\n    key: \"drawOnOtherCanvas\",\n    value: function drawOnOtherCanvas(context, left, top) {\n      context.translate(left, top);\n      this.draw(null, false, context);\n      context.translate(-left, -top);\n    }\n    // Judge whether a point is in the rectangle area which is covered by\n\n  }, {\n    key: \"isPointInLineRectangle\",\n    value: function isPointInLineRectangle(x, y) {\n      var _calcJudgingBeginEndP = this.calcJudgingBeginEndPoints(),\n          _calcJudgingBeginEndP2 = _slicedToArray(_calcJudgingBeginEndP, 4),\n          x1 = _calcJudgingBeginEndP2[0],\n          y1 = _calcJudgingBeginEndP2[1],\n          x2 = _calcJudgingBeginEndP2[2],\n          y2 = _calcJudgingBeginEndP2[3];\n\n      var xBig = x1 >= x2 ? x1 : x2;\n      var xSmall = xBig === x2 ? x1 : x2;\n      var yBig = y1 >= y2 ? y1 : y2;\n      var ySmall = yBig === y2 ? y1 : y2;\n\n      // The calculated result of point might not be accurate,\n      // it will effect the judgement when x1 === x2 or y1 === y2.\n      // So, it requires a small enough number to help.\n      return x <= xBig + delta && x >= xSmall - delta && y <= yBig + delta && y >= ySmall - delta;\n    }\n  }, {\n    key: \"isInLine\",\n    value: function isInLine(x, y, endExcluded) {\n      if (!endExcluded) {\n        if (this.isInLineEnd(x, y)) {\n          return false;\n        }\n      }\n\n      var _calcJudgingBeginEndP3 = this.calcJudgingBeginEndPoints(),\n          _calcJudgingBeginEndP4 = _slicedToArray(_calcJudgingBeginEndP3, 4),\n          x1 = _calcJudgingBeginEndP4[0],\n          y1 = _calcJudgingBeginEndP4[1],\n          x2 = _calcJudgingBeginEndP4[2],\n          y2 = _calcJudgingBeginEndP4[3];\n\n      switch (this.linkerType) {\n        case 'straight':\n          // Calculate the distance from point to line.\n          var distance = (0, _calcDistance.calcPointToLineDistance)([x, y], [x1, y1, x2, y2]);\n          var foot = (0, _calcPosition.calcPointToLineFoot)([x, y], [x1, y1, x2, y2]);\n\n          return distance <= lineAreaWidth && distance >= -lineAreaWidth && this.isPointInLineRectangle(foot.x, foot.y);\n\n          break;\n        case 'bezier':\n          break;\n      }\n    }\n  }, {\n    key: \"isInLineEnd\",\n    value: function isInLineEnd(x, y) {\n      var _calcJudgingBeginEndP5 = this.calcJudgingBeginEndPoints(),\n          _calcJudgingBeginEndP6 = _slicedToArray(_calcJudgingBeginEndP5, 4),\n          x1 = _calcJudgingBeginEndP6[0],\n          y1 = _calcJudgingBeginEndP6[1],\n          x2 = _calcJudgingBeginEndP6[2],\n          y2 = _calcJudgingBeginEndP6[3];\n\n      var distanceSrc = (0, _calcDistance.calcPointToPointDistance)([x, y], [x1, y1]);\n      var distanceDest = (0, _calcDistance.calcPointToPointDistance)([x, y], [x2, y2]);\n\n      if (distanceDest <= lineAreaWidth) {\n        return 'lineDest';\n      } else if (distanceSrc <= lineAreaWidth) {\n        return 'lineSrc';\n      }\n      return null;\n    }\n  }, {\n    key: \"judgeInShape\",\n    value: function judgeInShape(x, y) {\n      var type = this.isInLineEnd(x, y);\n      if (!type) {\n        type = this.isInLine(x, y, true) ? 'lineBody' : 'empty';\n      }\n      return { shape: this, type: type };\n    }\n  }, {\n    key: \"callShapesToDetach\",\n    value: function callShapesToDetach() {\n      if (this.src.shape) {\n        this.src.shape.deleteLine(this);\n      }\n      if (this.dest.shape) {\n        this.dest.shape.deleteLine(this);\n      }\n    }\n  }]);\n\n  return Line;\n}();\n\nexports.default = Line;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calcPointToLineDistance = exports.calcPointToPointDistance = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _common = __webpack_require__(8);\n\nfunction calcPointToPointDistance(pointA, pointB) {\n  var _ref = [pointA[0], pointA[1], pointB[0], pointB[1]],\n      x1 = _ref[0],\n      y1 = _ref[1],\n      x2 = _ref[2],\n      y2 = _ref[3];\n\n  return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n}\n\nfunction calcPointToLineDistance(point, line) {\n  var _generalizePoint = (0, _common.generalizePoint)(point),\n      _generalizePoint2 = _slicedToArray(_generalizePoint, 2),\n      x = _generalizePoint2[0],\n      y = _generalizePoint2[1];\n\n  var _generalizeLine = (0, _common.generalizeLine)(line),\n      _generalizeLine2 = _slicedToArray(_generalizeLine, 3),\n      A = _generalizeLine2[0],\n      B = _generalizeLine2[1],\n      C = _generalizeLine2[2];\n\n  return (A * x + B * y + C) / Math.sqrt(A * A + B * B);\n}\n\nexports.calcPointToPointDistance = calcPointToPointDistance;\nexports.calcPointToLineDistance = calcPointToLineDistance;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction backgroundDraw(el, backgroundWidth, backgroundHeight, backgroundSpacing) {\n  if (!el) {\n    return;\n  }\n\n  var context = el.getContext('2d');\n  var width = backgroundWidth ? backgroundWidth : 1250;\n  var height = backgroundHeight ? backgroundHeight : 1500;\n  var spacing = backgroundSpacing ? backgroundSpacing : 15;\n\n  el.width = width;\n  el.height = height;\n\n  var countX = Math.ceil(width / spacing);\n  var countY = Math.ceil(height / spacing);\n\n  context.strokeStyle = '#dcdcdc';\n  for (var i = 0; i < countX; i++) {\n    context.beginPath();\n    context.moveTo(i * spacing, 0);\n    if (i % 5 === 0) context.lineWidth = 2;else context.lineWidth = 1;\n    context.lineTo(i * spacing, height);\n    context.stroke();\n  }\n  for (var _i = 0; _i < countY; _i++) {\n    context.beginPath();\n    context.moveTo(0, _i * spacing);\n    if (_i % 5 === 0) context.lineWidth = 2;else context.lineWidth = 1;\n    context.lineTo(width, _i * spacing);\n    context.stroke();\n  }\n}\n\nexports.default = backgroundDraw;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEventHandlers = exports.eventList = undefined;\n\nvar _dragNewComponent = __webpack_require__(28);\n\nvar _shapeEvent = __webpack_require__(29);\n\nvar _toolbarEvent = __webpack_require__(31);\n\nvar eventList = ['mousedown', 'mousemove', 'mouseup', 'dblclick', 'keydown'];\n\nfunction getEventHandlers(eventType, isToolbarEnabled) {\n  switch (eventType) {\n    case 'mousedown':\n      if (isToolbarEnabled) {\n        return [_dragNewComponent.dragNewComponentMouseDown, _shapeEvent.shapeEventOnMouseDown, _toolbarEvent.toolbarEventOnMouseDown];\n      } else {\n        return [_dragNewComponent.dragNewComponentMouseDown, _shapeEvent.shapeEventOnMouseDown];\n      }\n    case 'mousemove':\n      return [_dragNewComponent.dragNewComponetMouseMove, _shapeEvent.shapeEventOnMouseMove];\n    case 'mouseup':\n      return [_dragNewComponent.dragNewComponetMouseUp, _shapeEvent.shapeEventOnMouseUp];\n    case 'dblclick':\n      return [_shapeEvent.shapeEventOnDblClick];\n    case 'keydown':\n      return [_shapeEvent.shapeEventOnKeyDown];\n  }\n}\n\nexports.eventList = eventList;\nexports.getEventHandlers = getEventHandlers;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dragNewComponetMouseUp = exports.dragNewComponetMouseMove = exports.dragNewComponentMouseDown = undefined;\n\nvar _createNewShape = __webpack_require__(10);\n\nvar _calcPosition = __webpack_require__(1);\n\nvar _getUIParameters = __webpack_require__(7);\n\nvar _getUIParameters2 = _interopRequireDefault(_getUIParameters);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar currentShape = null;\nvar mouseDown = false;\n\nfunction dragNewComponentMouseDown(event, shapeList) {\n  if (!event.target.classList.contains('component-item') || currentShape) return;\n  var shapeName = event.target.parentNode.getAttribute('shapename');\n\n  currentShape = (0, _createNewShape.createNewShape)(shapeName);\n  currentShape.el.style.position = 'fixed';\n  currentShape.setPosition(event.clientX - currentShape.width / 2, event.clientY - currentShape.height / 2);\n  currentShape.draw();\n  currentShape.append();\n\n  mouseDown = true;\n}\n\nfunction dragNewComponetMouseMove(event, shapeList) {\n  if (currentShape && mouseDown) {\n    currentShape.setPosition(event.clientX - currentShape.width / 2, event.clientY - currentShape.height / 2);\n  }\n}\n\nfunction dragNewComponetMouseUp(event, shapeList) {\n  mouseDown = false;\n\n  if (currentShape && event.pageX <= (0, _getUIParameters2.default)().canvasLeft) {\n    currentShape.remove();\n  } else if (currentShape) {\n    //let left = (event.pageX - currentShape.width / 2 - toolbarWidth) - (padding - drawLayout.scrollLeft)\n    //let top = (event.pageY - currentShape.height / 2 - headerHeight) - (padding - drawLayout.scrollTop)\n    var position = (0, _calcPosition.calcPositionInCanvas)(event.pageX, event.pageY);\n    var left = position.x - currentShape.width / 2;\n    var top = position.y - currentShape.height / 2;\n\n    currentShape.setPosition(left, top);\n    currentShape.el.style.position = 'absolute';\n    shapeList.push(currentShape);\n  }\n\n  currentShape = null;\n}\n\nexports.dragNewComponentMouseDown = dragNewComponentMouseDown;\nexports.dragNewComponetMouseMove = dragNewComponetMouseMove;\nexports.dragNewComponetMouseUp = dragNewComponetMouseUp;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shapeEventOnKeyDown = exports.shapeEventOnDblClick = exports.shapeEventOnMouseUp = exports.shapeEventOnMouseDown = exports.shapeEventOnMouseMove = undefined;\n\nvar _calcPosition = __webpack_require__(1);\n\nvar _createNewShape = __webpack_require__(10);\n\nvar _common = __webpack_require__(11);\n\nvar _common2 = _interopRequireDefault(_common);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar clickOffset = {\n  x: 0,\n  y: 0\n};\nvar activeDirection = null;\nvar resizeData = {\n  beginX: 0,\n  beginY: 0,\n  originWidth: 0,\n  originHeight: 0,\n  originLeft: 0,\n  originTop: 0\n};\n\nfunction clearLineData() {\n  _common2.default.lineData.activeLine = null;\n  _common2.default.lineData.isActive = false;\n  _common2.default.lineData.src = {\n    position: null,\n    referPercent: null,\n    referPosition: null,\n    shape: null\n  };\n  _common2.default.lineData.dest = {\n    position: null,\n    referPercent: null,\n    referPosition: null,\n    shape: null\n  };\n  _common2.default.lineData.needDeleted = false;\n}\n\nfunction redrawActiveLine(shape, reference, mark) {\n  if (_common2.default.lineData.type === 'toSrc') {\n    var src = {\n      shape: shape,\n      position: reference.position\n    };\n    _common2.default.lineData.src = {\n      shape: shape,\n      position: reference.position,\n      referPosition: reference.referPosition ? reference.referPosition : null,\n      referPercent: reference.referPercent ? reference.referPercent : null\n    };\n    _common2.default.lineData.activeLine.resetSrc(src);\n  } else {\n    var dest = {\n      shape: shape,\n      position: reference.position\n    };\n    _common2.default.lineData.dest = {\n      shape: shape,\n      position: reference.position,\n      referPosition: typeof reference.referPosition !== 'undefined' ? reference.referPosition : null,\n      referPercent: typeof reference.referPercent !== 'undefined' ? reference.referPercent : null\n    };\n    _common2.default.lineData.activeLine.resetDest(dest);\n  }\n  _common2.default.lineData.activeLine.draw(mark, !!_common2.default.lineData.selectedLine);\n}\n\nfunction shapeEventOnMouseDown(event, shapeList) {\n  var judgeResult = _common2.default.judgeEventAt(event, shapeList);\n  if (!judgeResult) {\n    _common2.default.shapeController.setVisibility(false);\n    return;\n  }\n\n  var shape = judgeResult.shape,\n      type = judgeResult.type;\n  var position = (0, _calcPosition.calcPositionInCanvas)(event.pageX, event.pageY);\n  switch (type) {\n    case 'lineBody':\n      if (_common2.default.lineData.selectedLine) {\n        _common2.default.lineData.selectedLine.draw();\n      }\n      _common2.default.lineData.selectedLine = shape;\n      shape.draw(null, true);\n      _common2.default.selectedShape = null;\n      _common2.default.shapeController.setVisibility(false);\n      break;\n    case 'lineDest':\n    case 'lineSrc':\n      _common2.default.selectedShape = null;\n      _common2.default.shapeController.setVisibility(false);\n      if (_common2.default.lineData.selectedLine) {\n        _common2.default.lineData.selectedLine.draw();\n      }\n      _common2.default.lineData.selectedLine = shape;\n      shape.draw(null, true);\n      _common2.default.lineData.activeLine = shape;\n      _common2.default.lineData.isActive = true;\n      var reference = void 0;\n      if (shape.dest.shape) {\n        reference = shape.dest.shape.getLineData(shape);\n        _common2.default.lineData.dest = {\n          shape: shape.dest.shape,\n          referPosition: reference.referPosition,\n          referPercent: reference.referPercent,\n          position: shape.dest.position\n        };\n      }\n      if (shape.src.shape) {\n        reference = shape.src.shape.getLineData(shape);\n        _common2.default.lineData.src = {\n          shape: shape.src.shape,\n          referPosition: reference.referPosition,\n          referPercent: reference.referPercent,\n          position: shape.src.position\n        };\n      }\n      _common2.default.lineData.src.position = shape.src.position;\n\n      if (type === 'lineDest') {\n        if (shape.dest.shape) {\n          shape.dest.shape.deleteLine(shape);\n        }\n        _common2.default.lineData.type = 'toDest';\n      } else {\n        if (shape.src.shape) {\n          shape.src.shape.deleteLine(shape);\n        }\n        _common2.default.lineData.type = 'toSrc';\n      }\n      break;\n    case 'shapeBody':\n      _common2.default.shapeController.reset(shape.left, shape.top, shape.width, shape.height);\n      _common2.default.shapeController.setVisibility(true);\n      _common2.default.shapeController.draw(shape.width, shape.height);\n\n      _common2.default.activeShape = shape;\n      clickOffset.x = event.pageX - shape.left;\n      clickOffset.y = event.pageY - shape.top;\n\n      if (_common2.default.lineData.selectedLine) {\n        _common2.default.lineData.selectedLine.draw();\n        _common2.default.lineData.selectedLine = null;\n      }\n      event.preventDefault();\n      break;\n    case 'shapeLineArea':\n      var lineReference = shape.getLineReference(position.x, position.y);\n\n      _common2.default.lineData.src = {\n        position: lineReference.position,\n        referPosition: lineReference.referPosition,\n        referPercent: lineReference.referPercent,\n        shape: shape\n      };\n      _common2.default.lineData.isActive = true;\n      _common2.default.lineData.type = 'new';\n      _common2.default.lineData.needDeleted = true;\n\n      if (_common2.default.lineData.selectedLine) {\n        _common2.default.lineData.selectedLine.draw();\n        _common2.default.lineData.selectedLine = null;\n      }\n      break;\n    case 'controller':\n      activeDirection = event.target.getAttribute('resizedir');\n      resizeData.beginX = event.pageX;\n      resizeData.beginY = event.pageY;\n      resizeData.originWidth = _common2.default.selectedShape.width;\n      resizeData.originHeight = _common2.default.selectedShape.height;\n      resizeData.originLeft = _common2.default.selectedShape.left;\n      resizeData.originTop = _common2.default.selectedShape.top;\n      break;\n    case 'tool':\n      break;\n    case 'empty':\n    default:\n      if (_common2.default.lineData.selectedLine) {\n        _common2.default.lineData.selectedLine.draw();\n        _common2.default.lineData.selectedLine = null;\n      }\n      _common2.default.selectedShape = null;\n      _common2.default.shapeController.setVisibility(false);\n  }\n}\n\nfunction shapeEventOnMouseMove(event, shapeList) {\n  if (_common2.default.lineData.isActive) {\n    var src = void 0,\n        dest = void 0;\n    if (!_common2.default.lineData.activeLine) {\n      src = {\n        shape: _common2.default.lineData.src.shape,\n        position: _common2.default.lineData.src.position\n      };\n      dest = {\n        shape: null,\n        position: (0, _calcPosition.calcPositionInCanvas)(event.pageX, event.pageY)\n      };\n\n      _common2.default.lineData.activeLine = (0, _createNewShape.createNewLine)(src, dest);\n      _common2.default.lineData.activeLine.draw();\n      _common2.default.lineData.activeLine.append();\n      _common2.default.lineData.activeLine.el.style.cursor = 'move';\n    } else {\n      _common2.default.lineData.needDeleted = false;\n      var position = (0, _calcPosition.calcPositionInCanvas)(event.pageX, event.pageY);\n      var judgeResult = _common2.default.judgeEventAt(event, shapeList);\n      if (!judgeResult) {\n        redrawActiveLine(null, { position: position });\n        return;\n      }\n\n      var shape = judgeResult.shape;\n      switch (judgeResult.type) {\n        case 'shapeBody':\n        case 'shapeLineArea':\n          var fromShapeId = void 0;\n          if (_common2.default.lineData.type === 'toSrc') {\n            fromShapeId = _common2.default.lineData.dest.shape ? _common2.default.lineData.dest.shape.id : null;\n          } else {\n            fromShapeId = _common2.default.lineData.src.shape ? _common2.default.lineData.src.shape.id : null;\n          }\n          if (fromShapeId === shape.id) {\n            _common2.default.lineData.needDeleted = true;\n            redrawActiveLine(null, { position: position });\n          } else {\n            var reference = shape.getLineReference(position.x, position.y);\n            if (!reference) {\n              return;\n            }\n            var mark = _common2.default.lineData.type === 'toSrc' ? 'src' : 'dest';\n            redrawActiveLine(shape, reference, mark);\n          }\n          break;\n        default:\n          redrawActiveLine(null, { position: position });\n      }\n    }\n  } else if (activeDirection) {\n    var width = void 0,\n        height = void 0,\n        offsetX = void 0,\n        offsetY = void 0;\n    switch (activeDirection) {\n      case 'nw':\n        width = resizeData.beginX - event.pageX + resizeData.originWidth;\n        height = resizeData.beginY - event.pageY + resizeData.originHeight;\n        width = width >= 60 ? width : 60;\n        height = height >= 45 ? height : 45;\n        offsetX = width - resizeData.originWidth;\n        offsetY = height - resizeData.originHeight;\n\n        _common2.default.selectedShape.setSize(width, height);\n        _common2.default.selectedShape.setPosition(resizeData.originLeft - offsetX, resizeData.originTop - offsetY);\n        _common2.default.shapeController.reset(_common2.default.selectedShape.left, _common2.default.selectedShape.top, width, height);\n        break;\n      case 'ne':\n        width = event.pageX - resizeData.beginX + resizeData.originWidth;\n        height = resizeData.beginY - event.pageY + resizeData.originHeight;\n        width = width >= 60 ? width : 60;\n        height = height >= 45 ? height : 45;\n        offsetX = width - resizeData.originWidth;\n        offsetY = height - resizeData.originHeight;\n\n        _common2.default.selectedShape.setSize(width, height);\n        _common2.default.selectedShape.setPosition(resizeData.originLeft, resizeData.originTop - offsetY);\n        _common2.default.shapeController.reset(_common2.default.selectedShape.left, _common2.default.selectedShape.top, width, height);\n        break;\n      case 'se':\n        width = event.pageX - resizeData.beginX + resizeData.originWidth;\n        height = event.pageY - resizeData.beginY + resizeData.originHeight;\n        width = width >= 60 ? width : 60;\n        height = height >= 45 ? height : 45;\n\n        _common2.default.selectedShape.setSize(width, height);\n        _common2.default.shapeController.reset(_common2.default.selectedShape.left, _common2.default.selectedShape.top, width, height);\n        break;\n      case 'sw':\n        width = resizeData.beginX - event.pageX + resizeData.originWidth;\n        height = event.pageY - resizeData.beginY + resizeData.originHeight;\n        width = width >= 60 ? width : 60;\n        height = height >= 45 ? height : 45;\n        offsetX = width - resizeData.originWidth;\n        offsetY = height - resizeData.originHeight;\n\n        _common2.default.selectedShape.setSize(width, height);\n        _common2.default.selectedShape.setPosition(resizeData.originLeft - offsetX, resizeData.originTop);\n        _common2.default.shapeController.reset(_common2.default.selectedShape.left, _common2.default.selectedShape.top, width, height);\n        break;\n    }\n    _common2.default.selectedShape.draw();\n    _common2.default.selectedShape.resetLinesPosition();\n    _common2.default.shapeController.draw(width, height);\n  } else if (_common2.default.activeShape) {\n    var x = event.pageX - clickOffset.x;\n    var y = event.pageY - clickOffset.y;\n    _common2.default.activeShape.setPosition(x, y);\n    _common2.default.shapeController.reset(x, y, _common2.default.activeShape.width, _common2.default.activeShape.height);\n    _common2.default.activeShape.resetLinesPosition();\n  } else {\n    var _judgeResult = _common2.default.judgeEventAt(event, shapeList);\n    if (!_judgeResult) {\n      return;\n    }\n    var _shape = _judgeResult.shape;\n    var el = _judgeResult.topElement || _shape && _shape.el;\n    if (!el) {\n      return;\n    }\n    switch (_judgeResult.type) {\n      case 'lineBody':\n        el.style.cursor = 'pointer';\n        break;\n      case 'lineDest':\n      case 'lineSrc':\n        el.style.cursor = 'move';\n        break;\n      case 'shapeBody':\n        el.style.cursor = 'move';\n        break;\n      case 'shapeLineArea':\n        el.style.cursor = 'crosshair';\n        break;\n      default:\n        el.style.cursor = 'default';\n    }\n  }\n}\n\nfunction shapeEventOnMouseUp(event, shapeList) {\n  if (_common2.default.lineData.isActive) {\n    var line = _common2.default.lineData.activeLine;\n    if (!line) {\n      return;\n    }\n    switch (_common2.default.lineData.type) {\n      case 'new':\n        if (_common2.default.lineData.needDeleted) {\n          line.destruct();\n        } else {\n          if (line.src.shape) {\n            line.src.shape.addLine(line, 'src', _common2.default.lineData.src.referPosition, _common2.default.lineData.src.referPercent);\n          }\n          if (line.dest.shape) {\n            line.dest.shape.addLine(line, 'dest', _common2.default.lineData.dest.referPosition, _common2.default.lineData.dest.referPercent);\n          }\n          shapeList.push(line);\n        }\n        break;\n      case 'toDest':\n        if (line.dest.shape) {\n          line.dest.shape.addLine(line, 'dest', _common2.default.lineData.dest.referPosition, _common2.default.lineData.dest.referPercent);\n        }\n        break;\n      case 'toSrc':\n        if (line.src.shape) {\n          line.src.shape.addLine(line, 'src', _common2.default.lineData.src.referPosition, _common2.default.lineData.src.referPercent);\n        }\n        break;\n    }\n    // Remove the line mark.\n    line.draw(null, !!_common2.default.lineData.selectedLine);\n    clearLineData();\n  } else if (_common2.default.activeShape) {\n    _common2.default.selectedShape = _common2.default.activeShape;\n    _common2.default.activeShape = null;\n  } else if (activeDirection) {\n    activeDirection = null;\n  }\n}\n\nfunction shapeEventOnDblClick(event, shapeList) {\n  var judgeResult = _common2.default.judgeEventAt(event, shapeList);\n  if (!judgeResult) {\n    return;\n  }\n\n  switch (judgeResult.type) {\n    case 'shapeBody':\n      judgeResult.shape.shapeText.focus();\n      document.execCommand('selectAll');\n      break;\n    default:\n      _common2.default.shapeController.setVisibility(false);\n  }\n}\n\nfunction shapeEventOnKeyDown(event, shapeList) {\n  if (event.key === 'Delete') {\n    if (_common2.default.selectedShape || _common2.default.activeShape) {\n      var shape = _common2.default.activeShape ? _common2.default.activeShape : _common2.default.selectedShape;\n      var isActive = !!_common2.default.activeShape;\n      _common2.default.shapeController.setVisibility(false);\n      _common2.default.deleteShapeInListById(shape.id, shapeList);\n\n      if (isActive) {\n        _common2.default.activeShape = null;\n      }\n      _common2.default.selectedShape = null;\n    } else if (_common2.default.lineData.isActive || _common2.default.lineData.selectedLine) {\n      var line = _common2.default.lineData.isActive ? _common2.default.lineData.activeLine : _common2.default.lineData.selectedLine;\n      _common2.default.deleteShapeInListById(line.id, shapeList);\n      clearLineData();\n    }\n  }\n}\n\nexports.shapeEventOnMouseMove = shapeEventOnMouseMove;\nexports.shapeEventOnMouseDown = shapeEventOnMouseDown;\nexports.shapeEventOnMouseUp = shapeEventOnMouseUp;\nexports.shapeEventOnDblClick = shapeEventOnDblClick;\nexports.shapeEventOnKeyDown = shapeEventOnKeyDown;\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction controllerDraw(el, width, height, margin) {\n  if (!el) {\n    return;\n  }\n\n  el.width = width;\n  el.height = height;\n  var context = el.getContext('2d');\n\n  context.strokeStyle = '#883333';\n  context.lineWidth = 1;\n  context.beginPath();\n  context.rect(margin, margin, width - 2 * margin, height - 2 * margin);\n  context.stroke();\n}\n\nexports.default = controllerDraw;\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toolbarEventOnMouseDown = undefined;\n\nvar _toolbarDefaultSetting = __webpack_require__(4);\n\nvar _common = __webpack_require__(11);\n\nvar _common2 = _interopRequireDefault(_common);\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _toolbar = __webpack_require__(12);\n\nvar _toolbar2 = _interopRequireDefault(_toolbar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getToolElement(type) {\n  return document.getElementById('tool-' + type);\n}\n\nfunction judgeToolType(event) {\n  var el = event.target;\n  var type = el.getAttribute && el.getAttribute('id') ? el.getAttribute('id').slice(5) : null;\n  if (!type) {\n    el = el.parentNode;\n    type = el.getAttribute && el.getAttribute('id') ? el.getAttribute('id').slice(5) : null;\n  }\n\n  if (_util2.default.contains(_util2.default.properties(_toolbarDefaultSetting.tools), type)) {\n    return type;\n  } else {\n    return null;\n  }\n}\n\nfunction simpleToolHandler(type, el, shape) {\n  var value = void 0;\n  if (el.getAttribute('disabled') === 'disabled' || !shape) {\n    return;\n  }\n  if (el.classList.contains('active')) {\n    value = _toolbarDefaultSetting.tools[type].styleValue[0];\n    el.classList.remove('active');\n  } else {\n    value = _toolbarDefaultSetting.tools[type].styleValue[1];\n    el.classList.add('active');\n  }\n  shape.setTextareaSingleStyle(_toolbarDefaultSetting.tools[type].styleName, value);\n}\n\nfunction toolbarEventOnMouseDown(event, shapeList) {\n  var type = judgeToolType(event);\n  if (type) {\n    var toolElement = getToolElement(type);\n    switch (type) {\n      case 'undo':\n        document.execCommand('undo');\n        break;\n      case 'redo':\n        document.execCommand('redo');\n        break;\n      case 'bold':\n      case 'italic':\n      case 'underline':\n        simpleToolHandler(type, toolElement, _common2.default.selectedShape);\n        break;\n    }\n  } else {\n    var shape = _common2.default.activeShape || _common2.default.selectedShape;\n    if (shape) {\n      (0, _toolbar2.default)().setToolbarState(shape.getAllStyle());\n    } else {\n      (0, _toolbar2.default)().setEmptyToolbarState();\n    }\n  }\n}\n\nexports.toolbarEventOnMouseDown = toolbarEventOnMouseDown;\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _util = __webpack_require__(0);\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _toolbarDefaultSetting = __webpack_require__(4);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getToolHtml(type) {\n  if (_util2.default.contains(_toolbarDefaultSetting.simplyToolTypes, type)) {\n    return '<div id=\"tool-' + type + '\" \\n      class=\"toolbar-button\" \\n      hint-data=\"' + _toolbarDefaultSetting.tools[type].hint + '\"\\n      disabled=\"' + (type !== 'undo' && type !== 'redo' ? 'disabled' : '') + '\">\\n      <i class=\"icon fa ' + _toolbarDefaultSetting.tools[type].faClass + '\"></i>\\n    </div>';\n  }\n  switch (type) {\n    case 'fontName':\n    case 'fontSize':\n    case 'fontColor':\n    case 'fillStyle':\n    case 'strokeStyle':\n    case 'lineWidth':\n    case 'lineDash':\n    case 'linkerType':\n    case 'arrowType':\n  }\n  return '';\n}\n\nfunction createTools(el, enabledTools) {\n  el.classList.add('fff-draw-tools');\n\n  var html = '';\n\n  for (var i = 0; i < _toolbarDefaultSetting.toolsGroup.length; i++) {\n    var btnsHtml = '';\n    for (var j = 0; j < _toolbarDefaultSetting.toolsGroup[i].length; j++) {\n      if (_util2.default.contains(enabledTools, _toolbarDefaultSetting.toolsGroup[i][j])) {\n        btnsHtml += getToolHtml(_toolbarDefaultSetting.toolsGroup[i][j]);\n      }\n    }\n    if (btnsHtml !== '') {\n      html += '<div class=\"btn-group\">' + btnsHtml + '</div>';\n    }\n  }\n  el.innerHTML = html;\n}\n\nfunction createHint(el) {}\n\nfunction toolUIInit(el, enabledTools, hint) {\n  createTools(el, enabledTools);\n  if (hint) {\n    createHint(el);\n  }\n}\n\nexports.default = toolUIInit;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// FreeFlowChart.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap be4434774d7d60dc4e19","let _ = {}\r\n\r\n_.find = function (list, predicate) {\r\n  let result\r\n  for (let i = 0; i < list.length; i++) {\r\n    result = predicate(list[i], i, list)\r\n    if (result) { return }\r\n  }\r\n}\r\n\r\n_.throttle = function (func, wait, trailing) {\r\n  let timeout, previous\r\n\r\n  let later = function (context, args) {\r\n    previous = (new Date()).getTime()\r\n    func.apply(context, args)\r\n  }\r\n\r\n  let throttled = function () {\r\n    let result\r\n    let now = (new Date()).getTime()\r\n\r\n    if (!previous) {\r\n      previous = now\r\n      result = func.apply(this, arguments)\r\n    }\r\n    else {\r\n      let remaining = wait - (now - previous)\r\n      if (remaining <= 0 || remaining > wait) {\r\n        if (timeout) {\r\n          clearTimeout(timeout);\r\n          timeout = null;\r\n        }\r\n        previous = now;\r\n        result = func.apply(this, arguments);\r\n      } else if (!timeout && trailing) {\r\n        timeout = setTimeout(later.bind(this, this, arguments), remaining);\r\n      }\r\n    }\r\n    return result\r\n  }\r\n\r\n  throttled.cancel = function () {\r\n    clearTimeout(timeout);\r\n    previous = 0;\r\n  }\r\n\r\n  return throttled\r\n}\r\n\r\n_.debounce = function (func, wait) {\r\n  let timeout\r\n\r\n  let later = function (context, args) {\r\n    timeout = null\r\n    func.apply(context, args)\r\n  }\r\n\r\n  let debounced = function () {\r\n    let args = [].slice.call(arguments)\r\n    if (timeout) { clearTimeout(timeout) }\r\n    setTimeout(later.bind(this, args), wait)\r\n  }\r\n\r\n  debounced.cancel = function() {\r\n    clearTimeout(timeout);\r\n    timeout = null;\r\n  };\r\n\r\n  return debounced\r\n}\r\n\r\n_.isObject = function (list) {\r\n  return (typeof list === 'object' || typeof list === 'function')\r\n}\r\n\r\n_.isArray = function (list) {\r\n  return Array.isArray(list)\r\n}\r\n\r\n_.contains = function (list, value) {\r\n  if (!_.isObject(list)) {\r\n    return list === value\r\n  }\r\n  else {\r\n    for (let i in list) {\r\n      if (value === list[i]) { return true }\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\n_.containsProp = function (list, prop) {\r\n  if (!_.isObject(list)) {\r\n    return false\r\n  }\r\n  else {\r\n    for (let p in list) {\r\n      if (p === prop) { return true }\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\n_.clone = function (o) {\r\n  let clone\r\n  if (_.isArray(o)) { clone = [] }\r\n  else if (_.isObject(o)) { clone = {} }\r\n  else { return o }\r\n\r\n  for (let prop in o) {\r\n    if (_.isObject(o[prop])) {\r\n      clone[prop] = _.clone(o[prop])\r\n    }\r\n    else {\r\n      clone[prop] = o[prop]\r\n    }\r\n  }\r\n  return clone\r\n}\r\n\r\n_.properties = function (o) {\r\n  if (!_.isObject(o)) { return null }\r\n  let props = []\r\n  for (let prop in o) {\r\n    props.push(prop)\r\n  }\r\n  return props\r\n}\r\n\r\nexport default _\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/util.js","import getUIParameters from '../../common/getUIParameters'\r\nimport {generalizeLine, generalizePoint, generalizeEllipse, calcQuarticEquation} from \"./common\";\r\n\r\nfunction calcPositionInCanvas (x, y) {\r\n  let drawLayout = document.getElementById('draw-layout')\r\n  let parameters = getUIParameters()\r\n  return {\r\n    x: x - parameters.canvasLeft - (parameters.canvasPadding - drawLayout.scrollLeft),\r\n    y: y - parameters.canvasTop - (parameters.canvasPadding - drawLayout.scrollTop)\r\n  }\r\n}\r\n\r\nfunction calcPointToLineFoot (point, line) {\r\n  let [x, y] = generalizePoint(point)\r\n  let [A, B, C] = generalizeLine(line)\r\n  return {\r\n    x: (B * B * x - A * B * y - A * C) / (A * A + B * B),\r\n    y: (-A * B * x + A * A * y - B * C) / (A * A + B * B)\r\n  }\r\n}\r\n\r\nfunction calcPointOnLine (pointA, pointB, percent) {\r\n  let [x1, y1] = generalizePoint(pointA)\r\n  let [x2, y2] = generalizePoint(pointB)\r\n  return {\r\n    x: x1 + (x2 - x1) * percent,\r\n    y: y1 + (y2 - y1) * percent\r\n  }\r\n}\r\n\r\nfunction calcYofEllipse(x, ellipse) {\r\n  let [a, b, m, n] = generalizeEllipse(ellipse)\r\n  if (!!m) { x -= m }\r\n  if (x < -a || x > a) { return null }\r\n\r\n  let y = b*Math.sqrt(1-x*x/(a*a))\r\n  return [y + n, -y + n]\r\n}\r\n\r\nfunction calcPointToEllipseClosestPoint (point, ellipse) {\r\n  let [x0, y0] = generalizePoint(point)\r\n  let [a, b, m, n] = generalizeEllipse(ellipse)\r\n\r\n  // Set the ellipse at origin point.\r\n  if (!!m) { x0 -= m }\r\n  if (!!n) { y0 -= n }\r\n\r\n  // Note that c presents c * c.\r\n  let c = a*a - b*b\r\n\r\n  let A = c*c\r\n  let B = -2*x0*a*a*c\r\n  let C = (y0*a*b)*(y0*a*b)+x0*x0*a*a*a*a-a*a*c*c\r\n  let D = 2*x0*a*a*a*a*c\r\n  let E = -a*a*a*a*a*a*x0*x0\r\n\r\n  if (A !== 0) {\r\n    B /= A, C /= A, D /= A, E /= A, A = 1\r\n  }\r\n\r\n  let result = calcQuarticEquation(A, B, C, D, E)\r\n  let possiblePoint = []\r\n  if (result.length > 0) {\r\n    for (let i = 0; i < result.length; i++) {\r\n      let ys = calcYofEllipse(result[i], [a, b, 0, 0])\r\n      if (ys) {\r\n        possiblePoint.push({x:result[i], y:ys[0]})\r\n        possiblePoint.push({x:result[i], y:ys[1]})\r\n      }\r\n    }\r\n  }\r\n\r\n  let bestPoint = null, shortestDistance = Infinity, tempDistance\r\n  for (let i = 0; i < possiblePoint.length; i++) {\r\n    tempDistance = (possiblePoint[i].x-x0)*(possiblePoint[i].x-x0)+(possiblePoint[i].y-y0)*(possiblePoint[i].y-y0)\r\n    if (tempDistance < shortestDistance) {\r\n      bestPoint = possiblePoint[i]\r\n      shortestDistance = tempDistance\r\n    }\r\n  }\r\n  // Only the point returned is the real point,\r\n  // all others are points after moved.\r\n  return bestPoint ? {\r\n    x: bestPoint.x + m,\r\n    y: bestPoint.y + n\r\n  } : null\r\n}\r\n\r\nexport {calcPositionInCanvas, calcPointToLineFoot, calcPointOnLine, calcPointToEllipseClosestPoint}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/calculation/calcPosition.js","import {getDefaultSetting, drawingDefaultSetting, textDefaultSetting, defaultPadding} from './shapeDefaultSetting'\r\nimport _ from '../common/util'\r\n\r\nlet shapeId = 0\r\n\r\nclass Shape {\r\n  constructor (el, type, left, top, width, height, drawStyle, textStyle) {\r\n    this.id = 'shape' + shapeId++\r\n    this.el = el\r\n    this.canvas = el.getElementsByTagName('canvas')[0]\r\n    this.shapeText = el.getElementsByClassName('shape-text')[0]\r\n    this.context = this.canvas.getContext('2d')\r\n    this.type = type\r\n    this.left = left\r\n    this.top = top\r\n\r\n    let temp = getDefaultSetting(this.type)\r\n    this.shapeName = temp.shapeName\r\n    if (typeof width !== 'undefined' && width !== null\r\n      && typeof height !== 'undefined' && height !== null) {\r\n      this.width = width\r\n      this.height = height\r\n    }\r\n    else {\r\n      this.width = temp.width\r\n      this.height = temp.height\r\n    }\r\n\r\n    this.drawStyle = drawStyle ? drawStyle : _.clone(drawingDefaultSetting)\r\n    this.textStyle = textStyle ? textStyle : _.clone(textDefaultSetting)\r\n    this.padding = defaultPadding\r\n\r\n    this.relativeLines = []\r\n\r\n    this.init()\r\n  }\r\n  destruct () {\r\n    this.remove()\r\n    this.callLinesToDetach()\r\n  }\r\n  init () {\r\n    this.el.style.width = this.width + 'px'\r\n    this.el.style.height = this.height + 'px'\r\n    this.canvas.width = this.width\r\n    this.canvas.height = this.height\r\n    //this.context.lineCap = 'round'\r\n    //this.context.lineJoin = 'round'\r\n\r\n    this.setTextareaStyle()\r\n  }\r\n  append () {\r\n    let parent = document.getElementById('designer_canvas')\r\n    let sibling = document.getElementById('shape_controls')\r\n\r\n    parent.insertBefore(this.el, sibling)\r\n  }\r\n  remove () {\r\n    let parent = document.getElementById('designer_canvas')\r\n    parent.removeChild(this.el)\r\n  }\r\n  setPosition (left, top) {\r\n    this.left = left\r\n    this.top = top\r\n    this.el.style.left = this.left + 'px'\r\n    this.el.style.top = this.top + 'px'\r\n  }\r\n  setSize (width, height) {\r\n    this.canvas.width = this.el.width = this.width = width\r\n    this.el.style.width = this.canvas.style.width = width + 'px'\r\n    this.canvas.height = this.el.height = this.height = height\r\n    this.el.style.height = this.canvas.style.height = height + 'px'\r\n  }\r\n  resetDrawStyle (context) {\r\n    context.lineCap = 'round'\r\n    context.lineJoin = 'round'\r\n\r\n    context.fillStyle = this.drawStyle.fillStyle\r\n    context.strokeStyle = this.drawStyle.strokeStyle\r\n    context.lineWidth = this.drawStyle.lineWidth\r\n    context.setLineDash(this.drawStyle.lineDash)\r\n  }\r\n  /*\r\n  setFillStyle (fillStyle) {\r\n    this.fillStyle = fillStyle\r\n    this.resetDrawStyle()\r\n  }\r\n  setStrokeStyle (strokeStyle) {\r\n    this.strokeStyle = strokeStyle\r\n    this.resetDrawStyle()\r\n  }\r\n  setLineWidth (lineWidth) {\r\n    this.lineWidth = lineWidth\r\n    this.resetDrawStyle()\r\n  }*/\r\n  setLineDash (lineDash) {\r\n    this.lineDash = lineDash\r\n    this.resetDrawStyle()\r\n  }\r\n  addLine (line, type, referPosition, referPercent) {\r\n    this.relativeLines.push({\r\n      line: line,\r\n      // type values: 'src', 'dest'\r\n      type: type,\r\n      referPosition: referPosition,\r\n      referPercent: referPercent\r\n    })\r\n  }\r\n  getLineData (line) {\r\n    for (let i = 0; i < this.relativeLines.length; i++) {\r\n      if (line === this.relativeLines[i].line) {\r\n        return this.relativeLines[i]\r\n      }\r\n    }\r\n  }\r\n  deleteLine (line) {\r\n    for (let i = 0; i < this.relativeLines.length; i++) {\r\n      if (line === this.relativeLines[i].line) {\r\n        return this.relativeLines.splice(i, 1)[0]\r\n      }\r\n    }\r\n  }\r\n  callLinesToDetach () {\r\n    for (let i = 0; i < this.relativeLines.length; i++) {\r\n      if (this.relativeLines[i].type === 'src') {\r\n        this.relativeLines[i].line.src.shape = null\r\n      }\r\n      else {\r\n        this.relativeLines[i].line.dest.shape = null\r\n      }\r\n    }\r\n  }\r\n  setTextareaStyle () {\r\n    if (!this.shapeText) { return }\r\n    for (let prop in this.textStyle) {\r\n      this.shapeText.style[prop] = this.textStyle[prop]\r\n    }\r\n  }\r\n  setTextareaSingleStyle (prop, value) {\r\n    if (_.containsProp(this.textStyle, prop)) {\r\n      this.textStyle[prop] = value\r\n      this.shapeText.style[prop] = value\r\n    }\r\n  }\r\n  getTextareaStyle () {\r\n\r\n  }\r\n  getAllStyle () {\r\n    let style = {}\r\n    for (let prop in this.textStyle) { style[prop] = this.textStyle[prop] }\r\n    for (let prop in this.drawStyle) { style[prop] = this.drawStyle[prop] }\r\n    return style\r\n  }\r\n}\r\n\r\nexport default Shape\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shapes/shape.js","import colors from '../common/colors'\r\n\r\nlet basic = {\r\n  width: 120,\r\n  height: 90\r\n}\r\nlet process = {\r\n  width: 120,\r\n  height: 90,\r\n  shapeName: ''\r\n}\r\nlet decision = {\r\n  width: 110,\r\n  height: 90,\r\n  shapeName: ''\r\n}\r\nlet terminator = {\r\n  width: 120,\r\n  height: 70,\r\n  shapeName: '/'\r\n}\r\nlet storedData = {\r\n  width: 120,\r\n  height: 90,\r\n  shapeName: ''\r\n}\r\nlet line = {\r\n  linkerType: 'straight',\r\n  arrowType: 'basic'\r\n}\r\n\r\nfunction getDefaultSetting (type) {\r\n  switch (type) {\r\n    case 'process': return process\r\n    case 'decision': return decision\r\n    case 'terminator': return terminator\r\n    case 'storedData': return storedData\r\n    case 'line': return line\r\n    default: return basic\r\n  }\r\n}\r\n\r\nlet drawingDefaultSetting = {\r\n  fillStyle: colors.defaultFillStyle,\r\n  strokeStyle: colors.defaultStrokeStyle,\r\n  lineWidth: 2,\r\n  lineDash: []\r\n}\r\n\r\nlet textDefaultSetting = {\r\n  fontWeight: 'normal',\r\n  fontStyle: 'normal',\r\n  textDecoration: 'none',\r\n  fontFamily: 'Arial',\r\n  fontSize: 'x-normal',\r\n  color: colors.textDefaultColor\r\n}\r\n\r\nlet defaultPadding = 10\r\n\r\nexport {getDefaultSetting, drawingDefaultSetting, textDefaultSetting, defaultPadding}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shapes/shapeDefaultSetting.js","import {drawingDefaultSetting, textDefaultSetting} from \"../shapes/shapeDefaultSetting\";\r\n\r\nconst tools = {\r\n  'undo': {\r\n    hint: '',\r\n    faClass: 'fa-undo',\r\n    styleName: null,\r\n    styleValue: null\r\n  },\r\n  'redo': {\r\n    hint: '',\r\n    faClass: 'fa-repeat',\r\n    styleName: null,\r\n    styleValue: null\r\n  },\r\n  'bold' : {\r\n    hint: '',\r\n    faClass: 'fa-bold',\r\n    styleName: 'fontWeight',\r\n    styleValue: ['normal', 'bold']\r\n  },\r\n  'italic' : {\r\n    hint: '',\r\n    faClass: 'fa-italic',\r\n    styleName: 'fontStyle',\r\n    styleValue: ['normal', 'italic']\r\n  },\r\n  'underline' : {\r\n    hint: '',\r\n    faClass: 'fa-underline',\r\n    styleName: 'textDecoration',\r\n    styleValue: ['none', 'underline']\r\n  },\r\n  'fontFamily' : {\r\n    hint: '',\r\n    faClass: 'fa-font',\r\n    styleName: 'fontFamily',\r\n    styleValue: ['Arial', 'Sans']\r\n  },\r\n  'fontSize' : {\r\n    hint: '',\r\n    faClass: 'fa-text-height',\r\n    styleName: 'fontSize',\r\n    styleValue: ['x-small', 'x-normal', 'x-large']\r\n  },\r\n  'fontColor' : {\r\n    hint: '',\r\n    faClass: 'fa-pencil',\r\n    styleName: 'color',\r\n    styleValue: [textDefaultSetting.color]\r\n  },\r\n  'fillStyle' : {\r\n    hint: '',\r\n    faClass: 'fa-square',\r\n    styleName: 'fillStyle',\r\n    styleValue: [drawingDefaultSetting.fillStyle]\r\n  },\r\n  'strokeStyle' : {\r\n    hint: '',\r\n    faClass: 'fa-paint-brush',\r\n    styleName: 'strokeStyle',\r\n    styleValue: [drawingDefaultSetting.strokeStyle]\r\n  },\r\n  /*\r\n  'lineWidth' : {\r\n    hint: '',\r\n    faClass: ,\r\n    styleName: ,\r\n    styleValue:\r\n  },\r\n  'lineDash' : {\r\n    hint: '',\r\n    faClass: ,\r\n    styleName: ,\r\n    styleValue:\r\n  },\r\n  'linkerType' : {\r\n    hint: '',\r\n    faClass: ,\r\n    styleName: ,\r\n    styleValue:\r\n  },\r\n  'arrowType' : {\r\n    hint: '',\r\n    faClass: ,\r\n    styleName: ,\r\n    styleValue:\r\n  }*/\r\n}\r\n\r\nconst toolsGroup = [\r\n  ['undo', 'redo'],\r\n  ['bold', 'italic', 'underline'],\r\n  ['fontFamily', 'fontSize', 'fontColor'],\r\n  ['fillStyle', 'strokeStyle', 'lineWidth', 'lineDash'],\r\n  ['linkerType', 'arrowType']\r\n]\r\n\r\nconst simplyToolTypes = [\r\n  'undo', 'redo',\r\n  'bold', 'italic', 'underline'\r\n]\r\n\r\nexport {tools, toolsGroup, simplyToolTypes}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbarDefaultSetting.js","import Process from './process'\r\nimport Decision from './decision'\r\nimport Terminator from './terminator'\r\nimport StoredData from './storedData'\r\nimport Line from './line'\r\n\r\nfunction getShapeByType (shapeName) {\r\n  switch (shapeName) {\r\n    case 'process': return Process\r\n    case 'decision': return Decision\r\n    case 'terminator': return Terminator\r\n    case 'storeData': return StoredData\r\n    case 'line': return Line\r\n  }\r\n}\r\n\r\nexport default getShapeByType\n\n\n// WEBPACK FOOTER //\n// ./src/shapes/index.js","let colors = {\r\n  \"defaultFillStyle\": '#FFFFFF',\r\n  \"defaultStrokeStyle\": '#000000',\r\n  'lineArrowHightlight': 'rgba(237, 65, 65, 0.5)',\r\n  'lineBodyHighlight': 'rgba(237, 65, 65, 0.15)',\r\n  'textDefaultColor': 'rgb(50, 50, 50)'\r\n}\r\n\r\nexport default colors\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/colors.js","function getUIParameters () {\r\n  let canvasLayout = document.getElementById('draw-layout')\r\n  let drawContainer = document.getElementById('draw-container')\r\n  return {\r\n    canvasPadding: drawContainer.style.padding.slice(0, -2) - 0,\r\n    canvasLeft: canvasLayout.offsetLeft,\r\n    canvasTop: canvasLayout.offsetTop\r\n  }\r\n}\r\n\r\nexport default getUIParameters\n\n\n// WEBPACK FOOTER //\n// ./src/common/getUIParameters.js","import _ from '../../common/util'\r\n\r\n// Line can be presented by (x - x2) / (x1 - x2) = (y - y2) / (x1 - y2)\r\n// or Ax + By + C = 0\r\n// or Kx + B = y\r\n// The order of parameters must be [x1, y1, x2, y2], [A, B, C] or [K, B].\r\nfunction generalizeLine (line) {\r\n  switch (line.length) {\r\n    case 2: return [line[0], -1, line[1]]\r\n    case 3: return line\r\n    case 4:\r\n      let [x1, y1, x2, y2] = line\r\n      let A = (y1 - y2) / (x1 - x2)\r\n      let B = -1\r\n      let C = y2 - A * x2\r\n      return [A, B, C]\r\n  }\r\n}\r\n\r\n// Points must contain x and y.\r\n// The order of parameters must be [x, y] or {x, y}\r\nfunction generalizePoint (point) {\r\n  if (_.isArray(point)) {\r\n    return point\r\n  }\r\n  else {\r\n    return [point.x, point.y]\r\n  }\r\n}\r\n\r\n// Ellipse is presented by (x - m)^2 / a^2 + (y - n)^2 / b^2 = 1\r\n// Ellipse must contain a and b, m and n are optional.\r\n// The order of parameters must be [a, b, m, n] or {a, b, m, n}\r\nfunction generalizeEllipse (ellipse) {\r\n  if (_.isArray(ellipse)) {\r\n    return ellipse\r\n  }\r\n  else {\r\n    return [ellipse.a, ellipse.b, ellipse.m, ellipse.n]\r\n  }\r\n}\r\n\r\nfunction calcQuarticEquation (a, b, c, d, e) {\r\n  let result = []\r\n  let t1 = c*c-3*b*d+12*a*e\r\n  let t2 = 2*c*c*c-9*b*c*d+27*a*d*d+27*b*b*e-72*a*c*e\r\n\r\n  let temp = Math.pow(t2+Math.sqrt(-4*t1*t1*t1+t2*t2),1/3)\r\n  let P = Math.pow(2,1/3)*t1/(3*a*temp)+temp/(3*Math.pow(2,1/3)*a)\r\n\r\n  let Q = 0.5*Math.sqrt(b*b/(4*a*a)-2*c/(3*a)+P)\r\n  if (isNaN(Q)) { return [] }\r\n  let R = b*b/(2*a*a)-4*c/(3*a)-P\r\n  let S = (-b*b*b/(a*a*a)+4*b*c/(a*a)-8*d/a)/(4*Math.sqrt(b*b/(4*a*a)-2*c/(3*a)+P))\r\n  let T1 = 0.5*Math.sqrt(R-S)\r\n  let T2 = 0.5*Math.sqrt(R+S)\r\n  if (!isNaN(T1)) {\r\n    result.push(-b/(4*a)-Q-T1)\r\n    result.push(-b/(4*a)-Q+T1)\r\n  }\r\n  if (!isNaN(T2)) {\r\n    result.push(-b/(4*a)+Q-T2)\r\n    result.push(-b/(4*a)+Q+T2)\r\n  }\r\n  return result\r\n}\r\n\r\nexport {generalizeLine, generalizePoint, generalizeEllipse, calcQuarticEquation}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/calculation/common.js","import Shape from './shape'\r\n\r\nconst defaultWidthHeightRatio = 0.6\r\nconst lineAreaWidth = 7\r\n\r\nfunction isPointWithinEllipse (point, ellipse) {\r\n  let [x, y] = point\r\n  let [a, b, m, n] = ellipse\r\n  let result = (x-m)*(x-m)/(a*a)+(y-n)*(y-n)/(b*b)\r\n  return result <= 1\r\n}\r\n\r\nfunction isInTerminalShape (x, y, left, top, width, height, radio) {\r\n  // Note that the left, right, width, height are about\r\n  // the circumscribed rectangle of real terminal. Padding is excluded.\r\n  let a = height / 2 * radio, b = height / 2\r\n  let innerLeft = left + a, innerTop = top\r\n  let innerWidth = width - 2 * a, innerHeight = height\r\n  if (x > innerLeft && x < innerLeft + innerWidth\r\n    && y > innerTop && y < innerTop + innerHeight) {\r\n    return true\r\n  }\r\n  let ellipseLeft = [a, b, innerLeft, innerTop + innerHeight / 2]\r\n  let ellipseRight = [a, b, innerLeft + innerWidth, innerTop + innerHeight / 2]\r\n\r\n  return (isPointWithinEllipse([x, y], ellipseLeft)\r\n    || isPointWithinEllipse([x, y], ellipseRight))\r\n}\r\n\r\nfunction calcXOfEllipse (ellipse, y, isLeft) {\r\n  let [a, b, m, n] = ellipse\r\n\r\n  let temp = a * Math.sqrt(1 - (y - n) * (y - n) / (b * b))\r\n  return m + temp * (isLeft ? -1 : 1)\r\n}\r\n\r\nfunction judgeInShapeArea (x, y, left, top, width, height) {\r\n  let lineResultA, lineResultB\r\n  let x1 = left, y1 = top\r\n  let x2 = left + width, y2 = top + height\r\n  lineResultA = (x - x2) / (x1 - x2) - (y - y2) / (y1 - y2)\r\n  x1 = left + width, y1 = top\r\n  x2 = left, y2 = top + height\r\n  lineResultB = (x - x2) / (x1 - x2) - (y - y2) / (y1 - y2)\r\n  if (lineResultA <= 0) {\r\n    return lineResultB < 0 ? 'top' : 'right'\r\n  }\r\n  else {\r\n    return lineResultB > 0 ? 'bottom': 'left'\r\n  }\r\n}\r\n\r\nclass Terminator extends Shape {\r\n  constructor (el, type, left, top, width, height) {\r\n    super(el, type, left, top, width, height)\r\n  }\r\n  // And a problem still exists: currently, I use function scale and arc to\r\n  // draw the ellipse, and it works fine for most time. But when the scale radio\r\n  // is way to big, it will cause the line of ellipse being too thin.\r\n  // Maybe I can try using bezier instead of arc.\r\n  draw (paddingHorizontal, paddingVertical, drawContext) {\r\n    let horizontal = (typeof paddingHorizontal === 'undefined' || paddingHorizontal === null)\r\n      ? this.padding : paddingHorizontal\r\n    let vertical = (typeof paddingVertical === 'undefined' || paddingVertical === null)\r\n      ? this.padding : paddingVertical\r\n    let context = (typeof drawContext === 'undefined' || drawContext === null )\r\n      ? this.context : drawContext\r\n\r\n    let radius = (this.height - 2 * vertical) / 2\r\n    let radio = this.calcWidthHeightRatio()\r\n    let centerA = [], centerB = []\r\n    centerA.x = horizontal / radio + radius\r\n    centerA.y = vertical + radius\r\n    centerB.x = (this.width - horizontal) / radio - radius\r\n    centerB.y = vertical + radius\r\n\r\n    this.resetDrawStyle(context)\r\n    context.beginPath()\r\n    context.scale(this.calcWidthHeightRatio(), 1)\r\n    context.arc(centerA.x, centerA.y, radius, 0.5 * Math.PI, 1.5 * Math.PI)\r\n    context.lineTo(centerB.x, vertical)\r\n    context.arc(centerB.x, centerB.y, radius, 1.5 * Math.PI, 0.5 * Math.PI)\r\n    context.closePath()\r\n    context.fill()\r\n    context.stroke()\r\n    context.scale(1 / this.calcWidthHeightRatio(), 1)\r\n  }\r\n  drawOnOtherCanvas (context, left, top) {\r\n    context.translate(left, top)\r\n    this.draw(null, null, context)\r\n    context.translate(-left, -top)\r\n  }\r\n  isPositionInShape (x, y) {\r\n    return isInTerminalShape(x, y, this.left + this.padding, this.top + this.padding\r\n      , this.width - 2 * this.padding, this.height - 2 * this.padding, this.calcWidthHeightRatio())\r\n  }\r\n  isPositionInLineArea (x, y, bodyExcluded) {\r\n    if (!bodyExcluded && this.isPositionInShape(x, y)) { return false }\r\n\r\n    let deltaA = lineAreaWidth * this.calcWidthHeightRatio()\r\n    let deltaWidth = (1 - this.calcWidthHeightRatio()) * lineAreaWidth\r\n    return isInTerminalShape(x, y, this.left + this.padding - deltaA - deltaWidth, this.top\r\n      , this.width - 2 * this.padding + 2 * (deltaA + deltaWidth), this.height, this.calcWidthHeightRatio())\r\n  }\r\n  judgeInShape (x, y) {\r\n    let type\r\n    type = (this.isPositionInShape(x, y)) ? 'shapeBody' : null\r\n    type = (!type) ? ((this.isPositionInLineArea(x, y, true)) ? 'shapeLineArea' : 'empty') : type\r\n    return { shape: this, type: type }\r\n  }\r\n  calcWidthHeightRatio () {\r\n    let innerWidth = this.width - this.padding * 2, innerHeight = this.height - this.padding * 2\r\n    let a = innerHeight / 2 * defaultWidthHeightRatio\r\n    if (innerWidth >= 3 * a) {\r\n      return defaultWidthHeightRatio\r\n    }\r\n    else {\r\n      return (innerWidth / 3) / (innerHeight / 2)\r\n    }\r\n  }\r\n  calcInnerShapeData () {\r\n    let innerTop = this.top + this.padding\r\n    let innerHeight = this.height - 2 * this.padding\r\n    let a = innerHeight / 2 * this.calcWidthHeightRatio(), b = innerHeight / 2\r\n    let innerLeft = this.left + this.padding + a\r\n    let innerWidth = this.width - 2 * this.padding - 2 * a\r\n\r\n    let ellipseLeft = [a, b, innerLeft, innerTop + innerHeight / 2]\r\n    let ellipseRight = [a, b, innerLeft + innerWidth, innerTop + innerHeight / 2]\r\n    return [innerLeft, innerTop, innerWidth, innerHeight, ellipseLeft, ellipseRight]\r\n  }\r\n  // ReferPosition includes top, right, bottom, left, nwCorner, neCorner, seCorner, swCorner.\r\n  calcLinePosition (referPosition, referPercent) {\r\n    let x, y\r\n    let [innerLeft, innerTop, innerWidth, innerHeight, ellipseLeft, ellipseRight] = this.calcInnerShapeData()\r\n    switch (referPosition) {\r\n      case 'nwCorner':\r\n        x = innerLeft\r\n        y = innerTop\r\n        break;\r\n      case 'neCorner':\r\n        x = innerLeft + innerWidth\r\n        y = innerTop\r\n        break;\r\n      case 'seCorner':\r\n        x = innerLeft + innerWidth\r\n        y = innerTop + innerHeight\r\n        break;\r\n      case 'swCorner':\r\n        x = innerLeft\r\n        y = innerTop + innerHeight\r\n        break;\r\n      case 'top':\r\n        x = innerLeft + innerWidth * referPercent\r\n        y = innerTop\r\n        break;\r\n      case 'right':\r\n        y = innerTop + innerHeight * referPercent\r\n        x = calcXOfEllipse(ellipseRight, y, false)\r\n        break;\r\n      case 'bottom':\r\n        x = innerLeft + innerWidth * referPercent\r\n        y = innerTop + innerHeight\r\n        break;\r\n      case 'left':\r\n        y = innerTop + innerHeight * referPercent\r\n        x = calcXOfEllipse(ellipseLeft, y, true)\r\n        break;\r\n    }\r\n    return { x: x, y: y }\r\n  }\r\n  getLineReference (x, y) {\r\n    let referPosition = null, referPercent = 0, position\r\n    let [innerLeft, innerTop, innerWidth, innerHeight, ellipseLeft, ellipseRight] = this.calcInnerShapeData()\r\n\r\n    if (this.isPositionInShape(x, y)) {\r\n      referPercent = 0.5\r\n      referPosition = judgeInShapeArea(x, y, innerLeft, innerTop, innerWidth, innerHeight)\r\n    }\r\n    else if (this.isPositionInLineArea(x, y, true)) {\r\n      if (y <= innerTop) {\r\n        if (x <= innerLeft) {\r\n          referPosition = 'nwCorner'\r\n        }\r\n        else if (x >= innerLeft + innerWidth) {\r\n          referPosition = 'neCorner'\r\n        }\r\n        else {\r\n          referPosition = 'top'\r\n          referPercent = (x - innerLeft) / innerWidth\r\n        }\r\n      }\r\n      else if (y >= innerTop + innerHeight) {\r\n        if (x <= innerLeft) {\r\n          referPosition = 'swCorner'\r\n        }\r\n        else if (x >= innerLeft + innerWidth) {\r\n          referPosition = 'seCorner'\r\n        }\r\n        else {\r\n          referPosition = 'bottom'\r\n          referPercent = (x - innerLeft) / innerWidth\r\n        }\r\n      }\r\n      else {\r\n        referPercent = (y - innerTop) / innerHeight\r\n        referPosition = (x < innerLeft + innerWidth / 2) ? 'left' : 'right'\r\n      }\r\n    }\r\n    else {return null}\r\n\r\n    position = this.calcLinePosition(referPosition, referPercent)\r\n    return {\r\n      referPosition: referPosition,\r\n      referPercent: referPercent,\r\n      position: position\r\n    }\r\n  }\r\n  resetLinesPosition () {\r\n    let lineData, position\r\n    for (let i = 0; i < this.relativeLines.length; i++) {\r\n      lineData = this.relativeLines[i]\r\n      position = this.calcLinePosition(lineData.referPosition, lineData.referPercent)\r\n      if (lineData.type === 'src') {\r\n        lineData.line.resetSrcPosition(position)\r\n        lineData.line.draw()\r\n      }\r\n      else {\r\n        lineData.line.resetDestPosition(position)\r\n        lineData.line.draw()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Terminator\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shapes/terminator.js","import getShapeByType from '../shapes/index'\r\n\r\nfunction createNewShape (type, left, top, width, height) {\r\n  let component = document.createElement('div')\r\n  component.classList.add('shape-box', type)\r\n\r\n  component.innerHTML = `\r\n    <canvas class=\"shape-canvas\"></canvas>\r\n    <textarea class=\"shape-text\"></textarea>`\r\n\r\n  let shape = new (getShapeByType(type))(component, type, left, top, width, height)\r\n\r\n  component.setAttribute('shapeid', shape.id)\r\n  return shape\r\n}\r\n\r\nfunction createNewLine (src, dist, settings) {\r\n  let component = document.createElement('div')\r\n  component.classList.add('shape-box', 'linker-box')\r\n\r\n  component.innerHTML = `\r\n    <canvas class=\"shape-canvas\"></canvas>\r\n    <div class=\"shape-text\" contenteditable=\"true\"></div>`\r\n\r\n  let line = new (getShapeByType('line'))(component, src, dist, settings)\r\n\r\n  component.setAttribute('shapeid', line.id)\r\n  return line\r\n}\r\n\r\nexport {createNewShape, createNewLine}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/createNewShape.js","import {calcPositionInCanvas} from '../calculation/calcPosition'\r\nimport controllerDraw from '../../draw/controller'\r\n\r\nlet eventCommon = {\r\n  shapeController: {\r\n    el: null,\r\n    canvas: null,\r\n    init: function () {\r\n      this.el = document.getElementById('shape-controls')\r\n      this.canvas = document.getElementById('controls-bounding')\r\n    },\r\n    reset: function (left, top, width, height) {\r\n      if (!this.el) {\r\n        this.init()\r\n      }\r\n\r\n      this.el.style.left = left + 'px'\r\n      this.el.style.top = top + 'px'\r\n      this.el.style.width = width + 'px'\r\n      this.el.style.height = height + 'px'\r\n    },\r\n    setVisibility: function (visibility) {\r\n      if (!this.el) {\r\n        this.init()\r\n      }\r\n\r\n      if (visibility) {\r\n        this.el.style.display = 'block'\r\n      }\r\n      else {\r\n        this.el.style.display = 'none'\r\n      }\r\n    },\r\n    draw(width, height) {\r\n      if (!this.el) {\r\n        this.init()\r\n      }\r\n\r\n      return controllerDraw(this.canvas, width, height, 10)\r\n    }\r\n  },\r\n  bezierController: {},\r\n  styleController: {},\r\n\r\n  activeShape: null,\r\n  selectedShape: null,\r\n\r\n  lineData: {\r\n    selectedLine: null,\r\n    isActive: false,\r\n    src: {\r\n      position: null,\r\n      referPercent: null,\r\n      referPosition: null,\r\n      shape: null\r\n    },\r\n    dest: {\r\n      position: null,\r\n      referPercent: null,\r\n      referPosition: null,\r\n      shape: null\r\n    },\r\n    activeLine: null,\r\n    type: null,\r\n    // This value only works when creating a new line\r\n    needDeleted: false\r\n\r\n    // Type values: 'new', 'toDest', 'toSrc'\r\n  },\r\n\r\n  getShapeInListById: function (shapeId, shapeList) {\r\n    for (let i = 0; i < shapeList.length; i++) {\r\n      // If the line is being moved, ignore it\r\n      if (this.lineData.activeLine === shapeList[i]) {\r\n        continue\r\n      }\r\n      if (shapeList[i].id === shapeId)\r\n        return shapeList[i]\r\n    }\r\n    return null\r\n  },\r\n  deleteShapeInListById: function (shapeId, shapeList) {\r\n    for (let i = 0; i < shapeList.length; i++) {\r\n      if (shapeId === shapeList[i].id) {\r\n        let shape = shapeList.splice(i, 1)[0]\r\n        shape.destruct()\r\n        shape = null\r\n        return\r\n      }\r\n    }\r\n  },\r\n  isShapeInListById: function (shapeId, shapeList) {\r\n    for (let i = 0; i < shapeList.length; i++) {\r\n      if (shapeId === shapeList[i].id) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  },\r\n  judgeInShapeList: function (position, shapeList, dir) {\r\n    dir = (typeof dir !== 'undefined') ? dir : 1\r\n    let length = shapeList.length\r\n    let index = (dir > 0) ? 0 : length - 1\r\n    let result\r\n    for (; index >= 0 && index < length; index += dir) {\r\n      // If the line is being moved, ignore it.\r\n      if (this.lineData.isActive && shapeList[index] === this.lineData.activeLine) {\r\n        continue\r\n      }\r\n      if (shapeList[index].judgeInShape) {\r\n        result = shapeList[index].judgeInShape(position.x, position.y)\r\n        if (result.type !== 'empty')\r\n          return result\r\n      }\r\n    }\r\n    return null\r\n  },\r\n  judgeEventAt: function (event, shapeList) {\r\n    if (!event.target || !event.target.classList) {\r\n      return {shape: null, type: 'empty'}\r\n    }\r\n\r\n    let result, shape\r\n    let position = calcPositionInCanvas(event.pageX, event.pageY)\r\n\r\n    if (event.target.classList.contains('toolbar-button')\r\n      || event.target.parentNode.classList && event.target.parentNode.classList.contains('toolbar-button')) {\r\n      return { shape: null, type: 'tool' }\r\n    }\r\n    else if (event.target.classList.contains('shape-controller')) {\r\n      return {\r\n        shape: this.selectedShape,\r\n        type: 'controller'\r\n      }\r\n    }\r\n    else if (event.target.parentNode.getAttribute\r\n      && event.target.parentNode.getAttribute('id') === 'shape-controls') {\r\n      // For now, the selected shape has no priority\r\n      // which is the same as processon's work.\r\n      result = this.judgeInShapeList(position, shapeList, -1)\r\n      if (result) {\r\n        result.topElement = this.shapeController.el\r\n      }\r\n      else {\r\n        result = { topElement: this.shapeController.el }\r\n      }\r\n      return result\r\n    }\r\n    else if (event.target.parentNode.classList\r\n      && event.target.parentNode.classList.contains('shape-box')) {\r\n      let shapeId = event.target.parentNode.getAttribute('shapeid')\r\n      shape = this.getShapeInListById(shapeId, shapeList)\r\n\r\n      if (!shape) {\r\n        // Judge whether the shape is already put into the shape list.\r\n        // It happens when users try to drag a new line.\r\n        // TopShape is undefined here.\r\n        return this.judgeInShapeList(position, shapeList, -1)\r\n      }\r\n      else {\r\n        // Common shape or line will work the same way.\r\n        result = shape.judgeInShape(position.x, position.y)\r\n        result.topElement = shape.el\r\n        if (result && result.type !== 'empty') {\r\n          return result\r\n        }\r\n        else {\r\n          let resultInList = this.judgeInShapeList(position, shapeList, -1)\r\n          if (resultInList) {\r\n            resultInList.topElement = shape.el\r\n          }\r\n          return (resultInList ? resultInList : result)\r\n        }\r\n      }\r\n    }\r\n\r\n    return {shape: null, type: 'empty'}\r\n\r\n    // type values: lineBody, lineDest, lineSrc\r\n    //              shapeBody, shapeLineArea\r\n    //              controller\r\n    //              empty\r\n    //              tool\r\n  }\r\n\r\n}\r\n\r\nexport default eventCommon\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/events/common.js","import createTools from './toolsUIInit'\r\nimport _ from '../common/util'\r\nimport {tools, simplyToolTypes} from \"./toolbarDefaultSetting\";\r\n\r\nfunction getToolType (el) {\r\n  return el.getAttribute('id').slice(5)\r\n}\r\n\r\nfunction styleToState (style) {\r\n  let state = {}\r\n\r\n  for (let value in style) {\r\n    for (let prop in tools) {\r\n      if (tools[prop].styleName === value) { state[prop] = style[value] }\r\n    }\r\n  }\r\n  return state\r\n}\r\n\r\nclass Toolbar {\r\n  constructor (el, tools, hint) {\r\n    this.el = el\r\n    this.tools = tools\r\n    this.hint = hint\r\n\r\n    this.init()\r\n  }\r\n  init () {\r\n    createTools(this.el, this.tools, this.hint)\r\n    this.toolElements = this.el.getElementsByClassName('toolbar-button')\r\n  }\r\n  setToolbarState (style) {\r\n    let type\r\n    let state = styleToState(style)\r\n\r\n    for (let i = 0; i < this.toolElements.length; i++) {\r\n      type = getToolType(this.toolElements[i])\r\n      if (type === 'undo' || type === 'redo') { continue }\r\n      if (_.contains(_.properties(state), type)) {\r\n        if (_.contains(simplyToolTypes, type)) {\r\n          this.toolElements[i].setAttribute('disabled', '')\r\n          if (state[type] !== tools[type].styleValue[0]) {\r\n            this.toolElements[i].classList.add('active')\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        this.toolElements[i].setAttribute('disabled', 'disabled')\r\n      }\r\n    }\r\n  }\r\n  setEmptyToolbarState () {\r\n    let type\r\n    for (let i = 0; i < this.toolElements.length; i++) {\r\n      type = getToolType(this.toolElements[i])\r\n      if (type !== 'undo' && type !== 'redo') {\r\n        this.toolElements[i].setAttribute('disabled', 'disabled')\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nlet toolbar = null\r\n\r\nfunction getToolbar (el, tools, hint) {\r\n  if (toolbar) {\r\n    return toolbar\r\n  }\r\n  else {\r\n    return (toolbar = new Toolbar(el, tools, hint))\r\n  }\r\n}\r\n\r\nexport default getToolbar\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbar.js","import './style/freeFlowChart.scss'\r\nimport generateImage from './core/generateImage'\r\nimport init from './init'\r\nimport _ from './common/util'\r\n\r\n(function (window, document) {\r\n  // settings: {\r\n  //   el: the container of drawing\r\n  //   shapes: enabled shapes\r\n  //   toolbar: {\r\n  //     el: the container of toolbar\r\n  //     tools: enabled tools\r\n  //   }\r\n  // }\r\n  const defaultInstanceSettings = {\r\n    el: null,\r\n    shapes: ['process', 'decision', 'terminator', 'storeData'],\r\n    toolbar: {\r\n      el: null,\r\n      tools: ['undo', 'redo',\r\n        'bold', 'italic', 'underline',\r\n        'fontName', 'fontSize', 'fontColor',\r\n        'fillStyle', 'strokeStyle', 'lineWidth', 'lineDash',\r\n        'linkerType', 'arrowType'\r\n      ],\r\n      hint: true\r\n    }\r\n  }\r\n\r\n  function cloneObject (o) {\r\n    let clone = {}\r\n    for (let prop in o) {\r\n      clone[prop] = o[prop]\r\n    }\r\n    return clone\r\n  }\r\n\r\n  function hasProp (o, prop) {\r\n    return o.hasOwnProperty(prop)\r\n  }\r\n\r\n  function replaceObjectProps (target, source) {\r\n    let clone = cloneObject(target)\r\n    for (let prop in clone) {\r\n      // Note that typeof null === 'object'.\r\n      if (clone[prop] && typeof clone[prop] === 'object' && !_.isArray(clone[prop])) {\r\n        if (source[prop]) {\r\n          clone[prop] = replaceObjectProps(clone[prop], source[prop])\r\n        }\r\n      }\r\n      else {\r\n        clone[prop] = hasProp(source, prop) ? source[prop] : clone[prop]\r\n      }\r\n    }\r\n    return clone\r\n  }\r\n\r\n  function createInstanceSetting (params) {\r\n    let el\r\n    if (!params.el || !(el = document.querySelectorAll(params.el)[0])) {\r\n      return null\r\n    }\r\n\r\n    let instanceSetting = replaceObjectProps(defaultInstanceSettings, params)\r\n    instanceSetting.el = el\r\n\r\n    if (params.toolbar.el && (el = document.querySelectorAll(params.toolbar.el)[0])) {\r\n      instanceSetting.toolbar.el = el\r\n      let tools = instanceSetting.toolbar.tools\r\n      for (let i = 0; i < tools.length; i++) {\r\n        tools[i] = tools[i].toLowerCase().trim()\r\n      }\r\n    }\r\n\r\n    return instanceSetting\r\n  }\r\n\r\n  class FlowChart {\r\n    constructor (options) {\r\n      this.instanceSetting = createInstanceSetting(options)\r\n      if (!this.instanceSetting) {\r\n        return {}\r\n      }\r\n\r\n      this.shapeList = []\r\n      this.init()\r\n    }\r\n    init() {\r\n      init(this.instanceSetting, this.shapeList)\r\n    }\r\n    generateImage () {\r\n      return generateImage(this.shapeList)\r\n    }\r\n  }\r\n\r\n  let FreeFlowChart = (function () {\r\n    let instance = null\r\n\r\n    return function (options) {\r\n      if (instance) { return instance }\r\n      else {\r\n        let instance = new FlowChart(options)\r\n        if (!instance.init) {\r\n          console.log('Invalid options!')\r\n          instance = null\r\n        }\r\n        return instance\r\n      }\r\n    }\r\n  })()\r\n\r\n  window.FreeFlowChart = FreeFlowChart\r\n})(window, document)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.7@css-loader/index.js!../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!./freeFlowChart.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_style-loader@0.19.0@style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/_css-loader@0.28.7@css-loader/index.js!../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!./freeFlowChart.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/_css-loader@0.28.7@css-loader/index.js!../../node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!./freeFlowChart.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/style/freeFlowChart.scss\n// module id = 14\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".fff-draw-main {\\n  width: 100%;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none; }\\n  .fff-draw-main #draw-components {\\n    width: 160px;\\n    position: absolute; }\\n    .fff-draw-main #draw-components .component-box {\\n      cursor: pointer;\\n      width: 30px;\\n      height: 30px; }\\n  .fff-draw-main #draw-layout {\\n    background: #b6b6b6;\\n    margin-left: 160px;\\n    height: 800px;\\n    overflow: scroll; }\\n    .fff-draw-main #draw-layout #draw-container {\\n      position: relative;\\n      padding: 1000px;\\n      width: 3250px;\\n      height: 3500px;\\n      overflow: hidden; }\\n      .fff-draw-main #draw-layout #draw-container #designer_canvas {\\n        width: 100%;\\n        height: 100%;\\n        position: relative; }\\n        .fff-draw-main #draw-layout #draw-container #designer_canvas #canvas-background {\\n          width: 1250px;\\n          height: 1500px;\\n          background: ghostwhite;\\n          z-index: 0; }\\n        .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box {\\n          z-index: 1;\\n          cursor: move;\\n          position: absolute;\\n          -webkit-user-select: none;\\n          -moz-user-select: none;\\n          -ms-user-select: none;\\n          user-select: none; }\\n          .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box .shape-canvas {\\n            width: 100%;\\n            height: 100%; }\\n          .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box .shape-text {\\n            text-align: center;\\n            overflow: hidden;\\n            cursor: move;\\n            border: none;\\n            background: inherit;\\n            resize: none;\\n            max-width: calc(100% - 26px);\\n            top: 50%;\\n            left: 50%;\\n            position: absolute;\\n            -webkit-transform: translateX(-50%) translateY(-50%);\\n            -moz-transform: translateX(-50%) translateY(-50%);\\n            -ms-transform: translateX(-50%) translateY(-50%);\\n            transform: translateX(-50%) translateY(-50%); }\\n            .fff-draw-main #draw-layout #draw-container #designer_canvas .shape-box .shape-text:focus {\\n              outline: -webkit-focus-ring-color auto 5px; }\\n        .fff-draw-main #draw-layout #draw-container #designer_canvas .decision .shape-text {\\n          max-width: calc(50% - 10px); }\\n        .fff-draw-main #draw-layout #draw-container #designer_canvas .linker-box {\\n          cursor: default;\\n          z-index: 2; }\\n        .fff-draw-main #draw-layout #draw-container #designer_canvas #shape-controls {\\n          cursor: move;\\n          height: 70px;\\n          z-index: 3;\\n          display: none;\\n          position: absolute; }\\n          .fff-draw-main #draw-layout #draw-container #designer_canvas #shape-controls .shape-controller {\\n            position: absolute;\\n            border: 1px solid #883333;\\n            width: 8px;\\n            height: 8px;\\n            z-index: 1;\\n            display: block;\\n            background: white; }\\n          .fff-draw-main #draw-layout #draw-container #designer_canvas #shape-controls .shape-anchor {\\n            position: absolute;\\n            border: 1px solid #883333;\\n            border-radius: 4px;\\n            width: 6px;\\n            height: 6px;\\n            z-index: 1;\\n            display: block;\\n            background: white; }\\n\\n.fff-draw-tools .btn-group > .toolbar-button:first-child {\\n  border-top-left-radius: 5px;\\n  border-bottom-left-radius: 5px;\\n  border-left: 1px solid #cccccc; }\\n\\n.fff-draw-tools .btn-group > .toolbar-button:last-child {\\n  border-top-right-radius: 5px;\\n  border-bottom-right-radius: 5px; }\\n\\n.fff-draw-tools .btn-group {\\n  display: inline-block;\\n  margin: 10px; }\\n  .fff-draw-tools .btn-group .toolbar-button {\\n    cursor: pointer;\\n    padding: 4px 12px;\\n    display: inline-block;\\n    border-top: 1px solid #cccccc;\\n    border-bottom: 1px solid #cccccc;\\n    border-right: 1px solid #cccccc;\\n    background-image: linear-gradient(to bottom, #ffffff, #e6e6e6); }\\n    .fff-draw-tools .btn-group .toolbar-button:hover {\\n      background: #e6e6e6; }\\n    .fff-draw-tools .btn-group .toolbar-button:active {\\n      -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\\n      -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05); }\\n    .fff-draw-tools .btn-group .toolbar-button .icon {\\n      color: #333333;\\n      font-size: 16px; }\\n  .fff-draw-tools .btn-group .active {\\n    background-image: linear-gradient(to bottom, #5bc0de, #2f96b4); }\\n    .fff-draw-tools .btn-group .active:hover {\\n      background-image: linear-gradient(to bottom, #5cb6d4, #308caa); }\\n    .fff-draw-tools .btn-group .active:active {\\n      -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\\n      -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);\\n      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05); }\\n    .fff-draw-tools .btn-group .active .icon {\\n      color: white; }\\n  .fff-draw-tools .btn-group .toolbar-button[disabled='disabled'] {\\n    background: #e6e6e6;\\n    color: #333333;\\n    background-image: none;\\n    cursor: not-allowed; }\\n    .fff-draw-tools .btn-group .toolbar-button[disabled='disabled']:active {\\n      -webkit-box-shadow: none;\\n      -moz-box-shadow: none;\\n      box-shadow: none; }\\n    .fff-draw-tools .btn-group .toolbar-button[disabled='disabled'] .icon {\\n      color: #868686;\\n      cursor: not-allowed; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader!./node_modules/_sass-loader@6.0.6@sass-loader/lib/loader.js!./src/style/freeFlowChart.scss\n// module id = 15\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\n// module id = 16\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tvar styleTarget = fn.call(this, selector);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[selector] = styleTarget;\n\t\t}\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_style-loader@0.19.0@style-loader/lib/addStyles.js\n// module id = 17\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_style-loader@0.19.0@style-loader/lib/urls.js\n// module id = 18\n// module chunks = 0","function calcCanvasSize (shapeList) {\r\n  let minLeft = Infinity, maxRight = -Infinity\r\n  let minTop = Infinity, maxBottom = -Infinity\r\n\r\n  for (let i = 0; i < shapeList.length; i++) {\r\n    minLeft = shapeList[i].left < minLeft ? shapeList[i].left : minLeft\r\n    maxRight = shapeList[i].left + shapeList[i].width > maxRight ? shapeList[i].left + shapeList[i].width : maxRight\r\n    minTop = shapeList[i].top < minTop ? shapeList[i].top : minTop\r\n    maxBottom = shapeList[i].top + shapeList[i].height > maxBottom ? shapeList[i].top + shapeList[i].height : maxBottom\r\n  }\r\n  if (!isFinite(minLeft) || !isFinite(maxRight) || !isFinite(minTop) || !isFinite(maxBottom)) {\r\n    return null\r\n  }\r\n\r\n  return {\r\n    width: maxRight - minLeft,\r\n    height: maxBottom - minTop,\r\n    offsetX: minLeft,\r\n    offsetY: minTop\r\n  }\r\n}\r\n\r\nfunction generateImage (shapeList) {\r\n  if (!shapeList || shapeList.length <= 0) { return null }\r\n  let canvasData = calcCanvasSize(shapeList)\r\n  if (!canvasData) { return null }\r\n  let canvas = document.createElement('canvas')\r\n\r\n  canvas.width = canvasData.width\r\n  canvas.height = canvasData.height\r\n  let context = canvas.getContext('2d')\r\n\r\n  // All lines are above other shapes, so lines need to be drawn later.\r\n  let shape, left, top, lineList = []\r\n  for (let i = 0; i < shapeList.length; i++) {\r\n    shape = shapeList[i]\r\n    if (shape.type === 'line') {\r\n      lineList.push(shape)\r\n      continue\r\n    }\r\n    left = shape.left - canvasData.offsetX\r\n    top = shape.top - canvasData.offsetY\r\n    shape.drawOnOtherCanvas(context, left, top)\r\n  }\r\n  for (let i = 0; i < lineList.length; i++) {\r\n    shape = lineList[i]\r\n    left = shape.left - canvasData.offsetX\r\n    top = shape.top - canvasData.offsetY\r\n    shape.drawOnOtherCanvas(context, left, top)\r\n  }\r\n\r\n  let image = new Image();\r\n  image.src = canvas.toDataURL(\"image/png\");\r\n  return image\r\n}\r\n\r\nexport default generateImage\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/generateImage.js","import getShapeByType from './shapes/index'\r\nimport backgroundDraw from './draw/background'\r\nimport {eventList, getEventHandlers} from './core/events/index'\r\nimport getToolbar from './toolbar/toolbar'\r\n\r\nconst drawContainerHtml = `<div class=\"draw-main\">\r\n    <div id=\"draw-components\">\r\n    </div>\r\n    <div id=\"draw-layout\">\r\n        <div id=\"draw-container\" style=\"padding:1000px;\">\r\n            <div id=\"designer_canvas\">\r\n                <canvas id=\"canvas-background\"></canvas>\r\n                <div id=\"shape-controls\">\r\n                    <canvas id=\"controls-bounding\" width=\"120\" height=\"90\"></canvas>\r\n                    <div class=\"shape-controller n w\" resizedir=\"nw\" style=\"cursor:nw-resize; left:5px; top:5px;\"></div>\r\n                    <div class=\"shape-controller n e\" resizedir=\"ne\" style=\"cursor:ne-resize; right:5px; top:5px;\"></div>\r\n                    <div class=\"shape-controller s e\" resizedir=\"se\" style=\"cursor:se-resize; right:5px; bottom:5px;\"></div>\r\n                    <div class=\"shape-controller s w\" resizedir=\"sw\" style=\"cursor:sw-resize; left:5px; bottom:5px;\"></div>\r\n                    <div class=\"shape-anchor\" style=\"left:calc(50% - 4px); top:6px;\"></div>\r\n                    <div class=\"shape-anchor\" style=\"right:6px; top:calc(50% - 4px);\"></div>\r\n                    <div class=\"shape-anchor\" style=\"left:calc(50% - 4px); bottom:6px;\"></div>\r\n                    <div class=\"shape-anchor\" style=\"left:6px; top:calc(50% - 4px);\"></div>\r\n                </div>\r\n                <div id=\"bezier-controls\">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>`\r\n\r\nfunction createContainer (el) {\r\n  el.innerHTML = drawContainerHtml\r\n}\r\n\r\nfunction createComponets (el, shapes) {\r\n  let componentGroup = el\r\n  let tempHtml = ''\r\n  for (let i = 0; i < shapes.length; i++) {\r\n    let shapeName = shapes[i]\r\n    tempHtml += `<div class=\"component-box\" shapename=\"${shapeName}\">\r\n        <canvas class=\"component-item\" width=\"30\" height=\"30\"></canvas>\r\n    </div>`\r\n  }\r\n  componentGroup.innerHTML = tempHtml\r\n  let componentItems = document.getElementsByClassName('component-box')\r\n  for (let i = 0; i < shapes.length; i++) {\r\n    let shapeName = shapes[i]\r\n    let shape = new (getShapeByType(shapeName))(componentItems[i], 'process', -1, -1, 30, 30)\r\n    shape.draw(2, 5)\r\n  }\r\n}\r\n\r\nfunction curryEventHandlers (eventType, shapeList, isToolbarEnabled) {\r\n  let handlers = getEventHandlers(eventType, isToolbarEnabled)\r\n  return function () {\r\n    for (let j = 0; j < handlers.length; j++) {\r\n      handlers[j].call(this, event, shapeList)\r\n    }\r\n  }\r\n}\r\n\r\nfunction init (instanceSetting, shapeList) {\r\n  let isToolbarEnabled = !!instanceSetting.toolbar.el\r\n\r\n  instanceSetting.el.classList.add('fff-draw-main')\r\n\r\n  createContainer(instanceSetting.el)\r\n\r\n  createComponets(document.getElementById('draw-components'), instanceSetting.shapes)\r\n\r\n  if (isToolbarEnabled) {\r\n    getToolbar(instanceSetting.toolbar.el, instanceSetting.toolbar.tools, instanceSetting.toolbar.hint)\r\n  }\r\n\r\n  let canvasBackground = document.getElementById('canvas-background')\r\n  backgroundDraw(canvasBackground)\r\n\r\n  let drawLayout = document.getElementById('draw-layout')\r\n  drawLayout.scrollTop = 1000 - 10\r\n  drawLayout.scrollLeft = 1000 - 10\r\n\r\n  for (let i = 0; i < eventList.length; i++) {\r\n    let func = curryEventHandlers(eventList[i], shapeList, isToolbarEnabled)\r\n    window.addEventListener(eventList[i], func)\r\n  }\r\n}\r\n\r\nexport default init\n\n\n// WEBPACK FOOTER //\n// ./src/init.js","import Shape from './shape'\r\n\r\nclass Process extends Shape {\r\n  constructor (el, type, left, top, width, height) {\r\n    super(el, type, left, top, width, height)\r\n  }\r\n  draw (paddingHorizontal, paddingVertical, drawContext) {\r\n    // Note that only the padding of the component is not default.\r\n    let horizontal = (typeof paddingHorizontal === 'undefined' || paddingHorizontal === null)\r\n      ? this.padding : paddingHorizontal\r\n    let vertical = (typeof paddingVertical === 'undefined' || paddingVertical === null)\r\n      ? this.padding : paddingVertical\r\n    let context = (typeof drawContext === 'undefined' || drawContext === null )\r\n      ? this.context : drawContext\r\n\r\n    this.resetDrawStyle(context)\r\n    context.fillRect(horizontal, vertical, this.width - 2 * horizontal, this.height - 2 * vertical)\r\n    context.beginPath()\r\n    context.rect(horizontal, vertical, this.width - 2 * horizontal, this.height - 2 * vertical);\r\n    context.stroke()\r\n  }\r\n  drawOnOtherCanvas (context, left, top) {\r\n    context.translate(left, top)\r\n    this.draw(null, null, context)\r\n    context.translate(-left, -top)\r\n  }\r\n  isPositionInShape (x, y) {\r\n    return (x > this.left + this.padding && x < this.left + this.width - this.padding\r\n      && y > this.top + this.padding && y < this.top + this.height - this.padding)\r\n  }\r\n  isPositionInLineArea (x, y) {\r\n    if (this.isPositionInShape(x, y)) {\r\n      return false\r\n    }\r\n    else return (x >= this.left && x <= this.left + this.width\r\n      && y >= this.top && y <= this.top + this.height)\r\n  }\r\n  judgeInShape (x, y) {\r\n    let type\r\n    type = (this.isPositionInShape(x, y)) ? 'shapeBody' : null\r\n    type = (!type) ? ((this.isPositionInLineArea(x, y)) ? 'shapeLineArea' : 'empty') : type\r\n    return { shape: this, type: type }\r\n  }\r\n\r\n  // Every shape rely on it's own way to calculate line end positions\r\n  // and all what the lines need to get is just the positions.\r\n\r\n  // ReferPosition includes up, down, left, right, nwCorner, neCorner, seCorner, swCorner.\r\n  // Note that the referPercent is based on inner width of the shape.\r\n  calcLinePosition (referPosition, referPercent) {\r\n    let x, y\r\n    let points = this.calcShapePoints()\r\n    switch (referPosition) {\r\n      case 'nwCorner':\r\n        x = points[0]\r\n        y = points[1]\r\n        break\r\n      case 'neCorner':\r\n        x = points[2]\r\n        y = points[3]\r\n        break\r\n      case 'seCorner':\r\n        x = points[4]\r\n        y = points[5]\r\n        break\r\n      case 'swCorner':\r\n        x = points[6]\r\n        y = points[7]\r\n        break\r\n      case 'up':\r\n        x = this.left + this.padding + referPercent * (this.width - 2 * this.padding)\r\n        y = this.top + this.padding\r\n        break\r\n      case 'down':\r\n        x = this.left + this.padding + referPercent * (this.width - 2 * this.padding)\r\n        y = this.top + this.height - this.padding\r\n        break\r\n      case 'left':\r\n        x = this.left + this.padding\r\n        y = this.top + this.padding + referPercent * (this.height - 2 * this.padding)\r\n        break\r\n      case 'right':\r\n        x = this.left + this.width - this.padding\r\n        y = this.top + this.padding + referPercent * (this.height - 2 * this.padding)\r\n        break\r\n    }\r\n    return { x: x, y: y }\r\n  }\r\n  calcShapePoints () {\r\n    // Points: nw -> ne -> se -> sw\r\n    let x1 = this.left + this.padding, y1 = this.top + this.padding\r\n    let x2 = this.left + this.width - this.padding, y2 = this.top + this.padding\r\n    let x3 = this.left + this.width - this.padding, y3 = this.top + this.height - this.padding\r\n    let x4 = this.left + this.padding, y4 = this.top + this.height - this.padding\r\n    return [ x1, y1, x2, y2, x3, y3, x4, y4 ]\r\n  }\r\n  getLineReference (x, y) {\r\n    let referPosition = null, referPercent = 0, position\r\n    let [ x1, y1, x2, y2, x3, y3, x4, y4 ] = this.calcShapePoints()\r\n    if (this.isPositionInLineArea(x, y)) {\r\n      if (y < y1) {\r\n        if (x < x1) {\r\n          referPosition = 'nwCorner'\r\n        }\r\n        else if (x > x2) {\r\n          referPosition = 'neCorner'\r\n        }\r\n        else {\r\n          referPosition = 'up'\r\n          referPercent = (x - x1) / (this.width - 2 * this.padding)\r\n        }\r\n      }\r\n      else if (y > y4) {\r\n        if (x < x4) {\r\n          referPosition = 'swCorner'\r\n        }\r\n        else if (x > x3) {\r\n          referPosition = 'seCorner'\r\n        }\r\n        else {\r\n          referPosition = 'down'\r\n          referPercent = (x - x4) / (this.width - 2 * this.padding)\r\n        }\r\n      }\r\n      else {\r\n        if (x < this.left + this.width / 2) {\r\n          referPosition = 'left'\r\n          referPercent = (y - this.top - this.padding) / (this.height - 2 * this.padding)\r\n        }\r\n        else {\r\n          referPosition = 'right'\r\n          referPercent = (y - this.top - this.padding) / (this.height - 2 * this.padding)\r\n        }\r\n      }\r\n    }\r\n    else if (this.isPositionInShape(x, y)) {\r\n      referPercent = 0.5\r\n      // check the position in which area of the shape\r\n      // the areas are shown below:\r\n      //  __\r\n      // |\\/|\r\n      // |/\\|\r\n      //  --\r\n      let lineRefer1 = (x - x3) / (x1 - x3) - (y - y3) / (y1 - y3)\r\n      let lineRefer2 = (x - x4) / (x2 - x4) - (y - y4) / (y2 - y4)\r\n      //let lineRefer1 = ((x - this.left - this.width + this.padding) / (2 * this.padding - this.width)\r\n      //  - (y - this.top - this.height + this.padding) / (2 * this.padding - this.height))\r\n      //let lineRefer2 = ((x - this.left - this.width + this.padding) / (2 * this.padding - this.width)\r\n      //  - (y - this.top - this.padding) / (-2 * this.padding + this.height))\r\n      if (lineRefer1 <= 0 && lineRefer2 <= 0) {\r\n        referPosition = 'up'\r\n      }\r\n      else if (lineRefer1 <= 0 && lineRefer2 >= 0) {\r\n        referPosition = 'right'\r\n      }\r\n      else if (lineRefer1 >= 0 && lineRefer2 >= 0) {\r\n        referPosition = 'down'\r\n      }\r\n      else {\r\n        referPosition = 'left'\r\n      }\r\n    }\r\n    else {\r\n      return null\r\n    }\r\n\r\n    position = this.calcLinePosition(referPosition, referPercent)\r\n    return {\r\n      referPosition: referPosition,\r\n      referPercent: referPercent,\r\n      position: position\r\n    }\r\n  }\r\n  resetLinesPosition () {\r\n    let lineData, position\r\n    for (let i = 0; i < this.relativeLines.length; i++) {\r\n      lineData = this.relativeLines[i]\r\n      position = this.calcLinePosition(lineData.referPosition, lineData.referPercent)\r\n      if (lineData.type === 'src') {\r\n        lineData.line.resetSrcPosition(position)\r\n        lineData.line.draw()\r\n      }\r\n      else {\r\n        lineData.line.resetDestPosition(position)\r\n        lineData.line.draw()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Basically, each shape behaves like this one\r\n// and these function must be contained for calling:\r\n// draw, judgeInShape, getLineReference, resetLinesPosition, drawOnOtherCanvas\r\n\r\nexport default Process\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shapes/process.js","import Shape from './shape'\r\nimport {calcPointToLineFoot, calcPointOnLine} from \"../core/calculation/calcPosition\"\r\n\r\n// Calculate the four border line of the decision shape\r\n// in order to judge which side is the point placed at.\r\nfunction calcBorderLineResult (x, y, points) {\r\n  let lineResult = []\r\n  for (let i = 0; i < 4; i++) {\r\n    let x1 = points[i * 2], y1 = points[i * 2 + 1]\r\n    let x2 = points[(i + 1) * 2 % 8], y2 = points[(i + 1) * 2 % 8 + 1]\r\n    lineResult[i] = (x - x2) / (x1 - x2) - (y - y2) / (y1 - y2)\r\n  }\r\n  return lineResult\r\n}\r\n\r\nfunction calcPercentOfLine (x, y, pointA, pointB) {\r\n  let point = calcPointToLineFoot([x, y], [pointA[0], pointA[1], pointB[0], pointB[1]])\r\n  return (point.x - pointA[0]) / (pointB[0] - pointA[0])\r\n}\r\n\r\nclass Decision extends Shape {\r\n  constructor (el, type, left, top, width, height) {\r\n    super(el, type, left, top, width, height)\r\n  }\r\n  draw (paddingHorizontal, paddingVertical, drawContext) {\r\n    let horizontal = (typeof paddingHorizontal === 'undefined' || paddingHorizontal === null)\r\n      ? this.padding : paddingHorizontal\r\n    let vertical = (typeof paddingVertical === 'undefined' || paddingVertical === null)\r\n      ? this.padding : paddingVertical\r\n    let context = (typeof drawContext === 'undefined' || drawContext === null )\r\n      ? this.context : drawContext\r\n\r\n    this.resetDrawStyle(context)\r\n    context.beginPath()\r\n    context.moveTo(this.width / 2, vertical)\r\n    context.lineTo(this.width - horizontal, this.height / 2)\r\n    context.lineTo(this.width /2, this.height - vertical)\r\n    context.lineTo(horizontal, this.height / 2)\r\n    context.closePath()\r\n    context.fill()\r\n    context.stroke()\r\n  }\r\n  drawOnOtherCanvas (context, left, top) {\r\n    context.translate(left, top)\r\n    this.draw(null, null, context)\r\n    context.translate(-left, -top)\r\n  }\r\n  isPositionInShape (x, y) {\r\n    let points = this.calcShapePoints()\r\n    let lineResult = calcBorderLineResult(x, y, points)\r\n\r\n    return (lineResult[0] > 0 && lineResult[1] < 0 && lineResult[2] > 0 && lineResult[3] < 0)\r\n  }\r\n  isPositionInLineArea (x, y, bodyExcluded) {\r\n    if (!bodyExcluded && this.isPositionInShape(x, y)) {\r\n      return false\r\n    }\r\n    let points = this.calcLineAreaPoints()\r\n    let lineResult = calcBorderLineResult(x, y, points)\r\n\r\n    return (lineResult[0] >= 0 && lineResult[1] <= 0 && lineResult[2] >= 0 && lineResult[3] <= 0)\r\n  }\r\n  judgeInShape (x, y) {\r\n    let type\r\n    type = (this.isPositionInShape(x, y)) ? 'shapeBody' : null\r\n    type = (!type) ? ((this.isPositionInLineArea(x, y, true)) ? 'shapeLineArea' : 'empty') : type\r\n    return { shape: this, type: type }\r\n  }\r\n  // ReferPosition includes top, right, bottom, left, nwBorder, neBorder, seBorder, swBorder.\r\n  calcLinePosition (referPosition, referPercent) {\r\n    let x, y, point\r\n    let points = this.calcShapePoints()\r\n    switch (referPosition) {\r\n      case 'top':\r\n        x = points[0]\r\n        y = points[1]\r\n        break;\r\n      case 'right':\r\n        x = points[2]\r\n        y = points[3]\r\n        break;\r\n      case 'bottom':\r\n        x = points[4]\r\n        y = points[5]\r\n        break;\r\n      case 'left':\r\n        x = points[6]\r\n        y = points[7]\r\n        break;\r\n      case 'nwBorder':\r\n        point = calcPointOnLine([points[6], points[7]], [points[0], points[1]], referPercent)\r\n        break;\r\n      case 'neBorder':\r\n        point = calcPointOnLine([points[0], points[1]], [points[2], points[3]], referPercent)\r\n        break;\r\n      case 'seBorder':\r\n        point = calcPointOnLine([points[2], points[3]], [points[4], points[5]], referPercent)\r\n        break;\r\n      case 'swBorder':\r\n        point = calcPointOnLine([points[4], points[5]], [points[6], points[7]], referPercent)\r\n        break;\r\n    }\r\n    if (point) { return point }\r\n    else { return { x: x, y: y } }\r\n  }\r\n  calcShapePoints () {\r\n    // Points: top -> right -> bottom -> left\r\n    let x1 = this.left + this.width / 2, y1 = this.top + this.padding\r\n    let x2 = this.left + this.width - this.padding, y2 = this.top + this.height / 2\r\n    let x3 = this.left + this.width / 2, y3 = this.top + this.height - this.padding\r\n    let x4 = this.left + this.padding, y4 = this.top + this.height / 2\r\n    return [ x1, y1, x2, y2, x3, y3, x4, y4 ]\r\n  }\r\n  calcLineAreaPoints () {\r\n    let x1 = this.left + this.width / 2, y1 = this.top\r\n    let x2 = this.left + this.width, y2 = this.top + this.height / 2\r\n    let x3 = this.left + this.width / 2, y3 = this.top + this.height\r\n    let x4 = this.left, y4 = this.top + this.height / 2\r\n    return [ x1, y1, x2, y2, x3, y3, x4, y4 ]\r\n  }\r\n  getLineReference (x, y) {\r\n    let referPosition = null, referPercent = 0, position\r\n    let points = this.calcShapePoints()\r\n    let [ x1, y1, x2, y2, x3, y3, x4, y4 ] = points\r\n    if (this.isPositionInShape(x, y)) {\r\n      let x5 = (x1 + x2) / 2, y5 = (y1 + y2) / 2\r\n      let x6 = (x2 + x3) / 2, y6 = (y2 + y3) / 2\r\n      let x7 = (x3 + x4) / 2, y7 = (y3 + y4) / 2\r\n      let x8 = (x4 + x1) / 2, y8 = (y4 + y1) / 2\r\n      let result = []\r\n      result[0] = (x - x7) / (x5 - x7) - (y - y7) / (y5 - y7)\r\n      result[1] = (x - x8) / (x6 - x8) - (y - y8) / (y6 - y8)\r\n      if (result[1] >= 0) {\r\n        referPosition = result[0] <= 0 ? 'top' : 'right'\r\n      }\r\n      else {\r\n        referPosition = result[0] <= 0 ? 'left' : 'bottom'\r\n      }\r\n    }\r\n    else if (this.isPositionInLineArea(x, y, true)) {\r\n      let pointA, pointB\r\n      let results = calcBorderLineResult(x, y, points)\r\n      if (results[0] <= 0 && results[3] >= 0) {\r\n        referPosition = 'top'\r\n      }\r\n      else if (results[0] <= 0 && results[1] >= 0) {\r\n        referPosition = 'right'\r\n      }\r\n      else if (results[2] <= 0 && results[1] >= 0) {\r\n        referPosition = 'bottom'\r\n      }\r\n      else if (results[2] <= 0 && results[3] >= 0) {\r\n        referPosition = 'left'\r\n      }\r\n      else {\r\n        if (results[0] <= 0) {\r\n          pointA = [x1, y1]\r\n          pointB = [x2, y2]\r\n          referPosition = 'neBorder'\r\n        }\r\n        else if (results[1] >= 0) {\r\n          pointA = [x2, y2]\r\n          pointB = [x3, y3]\r\n          referPosition = 'seBorder'\r\n        }\r\n        else if (results[2] <= 0) {\r\n          pointA = [x3, y3]\r\n          pointB = [x4, y4]\r\n          referPosition = 'swBorder'\r\n        }\r\n        else if (results[3] >= 0) {\r\n          pointA = [x4, y4]\r\n          pointB = [x1, y1]\r\n          referPosition = 'nwBorder'\r\n        }\r\n        referPercent = calcPercentOfLine(x, y, pointA, pointB)\r\n      }\r\n    }\r\n    else { return null }\r\n\r\n    position = this.calcLinePosition(referPosition, referPercent)\r\n    return {\r\n      referPosition: referPosition,\r\n      referPercent: referPercent,\r\n      position: position\r\n    }\r\n  }\r\n  resetLinesPosition () {\r\n    let lineData, position\r\n    for (let i = 0; i < this.relativeLines.length; i++) {\r\n      lineData = this.relativeLines[i]\r\n      position = this.calcLinePosition(lineData.referPosition, lineData.referPercent)\r\n      if (lineData.type === 'src') {\r\n        lineData.line.resetSrcPosition(position)\r\n        lineData.line.draw()\r\n      }\r\n      else {\r\n        lineData.line.resetDestPosition(position)\r\n        lineData.line.draw()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Decision\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shapes/decision.js","import Terminator from './terminator'\r\n\r\nclass StoredData extends Terminator {\r\n  constructor (el, type, left, top, width, height) {\r\n    super(el, type, left, top, width, height)\r\n  }\r\n  draw (paddingHorizontal, paddingVertical, drawContext) {\r\n    let horizontal = (typeof paddingHorizontal === 'undefined' || paddingHorizontal === null)\r\n      ? this.padding : paddingHorizontal\r\n    let vertical = (typeof paddingVertical === 'undefined' || paddingVertical === null)\r\n      ? this.padding : paddingVertical\r\n    let context = (typeof drawContext === 'undefined' || drawContext === null )\r\n      ? this.context : drawContext\r\n\r\n    let radius = (this.height - 2 * vertical) / 2\r\n    let centerA = [], centerB = []\r\n    centerA.x = horizontal / this.calcWidthHeightRatio() + radius\r\n    centerA.y = vertical + radius\r\n    centerB.x = (this.width - horizontal) / this.calcWidthHeightRatio() - radius\r\n    centerB.y = vertical + radius\r\n\r\n    this.resetDrawStyle(context)\r\n    context.beginPath()\r\n    context.scale(this.calcWidthHeightRatio(), 1)\r\n    context.arc(centerA.x, centerA.y, radius, 0.5 * Math.PI, 1.5 * Math.PI)\r\n    context.lineTo(centerB.x, vertical)\r\n    context.arc(centerB.x, centerB.y, radius, 1.5 * Math.PI, 0.5 * Math.PI)\r\n    context.closePath()\r\n    context.fill()\r\n    context.arc(centerB.x, centerB.y, radius, 0.5 * Math.PI, 1.5 * Math.PI)\r\n    context.stroke()\r\n    context.scale(1 / this.calcWidthHeightRatio(), 1)\r\n  }\r\n}\r\n\r\nexport default StoredData\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shapes/storedData.js","import {getDefaultSetting, drawingDefaultSetting} from './shapeDefaultSetting'\r\nimport {calcPointToPointDistance, calcPointToLineDistance} from \"../core/calculation/calcDistance\";\r\nimport {calcPointToLineFoot} from \"../core/calculation/calcPosition\";\r\nimport colors from '../common/colors'\r\nimport {defaultPadding} from \"./shapeDefaultSetting\"\r\n\r\nlet lineId = 0\r\nconst lineAreaWidth = 7\r\n// Delta is a number which is small enough\r\n// that it can be used while judging whether\r\n// two floating numbers are equal.\r\nconst delta = 0.1\r\n\r\n// Cubic bezier curve:\r\n// begin point: (x0,y0), control points: (x1,y1), (x2,y2), end point: (x3,y3)\r\n// x(t) = ax * t ^ 3 + bx * t ^ 2 + cx * t + x0\r\n// y(t) = ay * t ^ 3 + by * t ^ 2 + cy * t + y0\r\n// x1 = x0 + cx / 3\r\n// x2 = x1 + ( cx + bx ) / 3\r\n// x3 = x0 + cx + bx + ax\r\n// y1 = y0 + cy / 3\r\n// y2 = y1 + ( cy + by ) / 3\r\n// y3 = y0 + cy + by + ay\r\n// cx = 3 * ( x1 - x0 )\r\n// bx = 3 * ( x2 - x1 ) - cx\r\n// ax = x3 - x0 - cx - bx\r\n// cy = 3 * ( y1 - y0 )\r\n// by = 3 * ( y2 - y1 ) - cy\r\n// ay = y3 - y0 - cy - by\r\n// x(t) = (1-t)^3x0 + 3t(1-t)^2x1 + 3t^2(1-t)x2 + t^3x3\r\n// y(t) = (1-t)^3y0 + 3t(1-t)^2y1 + 3t^2(1-t)y2 + t^3y3\r\n\r\nclass Line {\r\n  constructor (el, src, dest, settings) {\r\n    this.id = 'line' + lineId++\r\n    this.el = el\r\n    this.canvas = el.getElementsByTagName('canvas')[0]\r\n    this.shapeText = el.getElementsByClassName('shape-text')[0]\r\n    this.context = this.canvas.getContext('2d')\r\n    // src and dest contain shape, position\r\n    this.src = src\r\n    this.dest = dest\r\n    this.type = 'line'\r\n\r\n    this.width = 0\r\n    this.height = 0\r\n    this.left = 0\r\n    this.top = 0\r\n\r\n    this.padding = defaultPadding\r\n\r\n    if (settings) {\r\n\r\n    }\r\n    let temp = getDefaultSetting('line')\r\n    this.linkerType = temp.linkerType\r\n    this.arrowType = temp.arrowType\r\n\r\n    this.drawStyle = {\r\n      strokeStyle: drawingDefaultSetting.strokeStyle,\r\n      lineWidth: drawingDefaultSetting.lineWidth,\r\n      lineDash: drawingDefaultSetting.lineDash\r\n    }\r\n\r\n    this.drawBeginPosition = {}\r\n    this.drawEndPosition = {}\r\n    this.bezierControlPoints = []\r\n\r\n    this.init()\r\n  }\r\n  destruct () {\r\n    this.remove()\r\n    this.callShapesToDetach()\r\n  }\r\n  init () {\r\n    this.resetCanvas()\r\n  }\r\n  resetSrcPosition (position) {\r\n    this.src.position = position\r\n    this.resetCanvas()\r\n  }\r\n  resetDestPosition (position) {\r\n    this.dest.position = position\r\n    this.resetCanvas()\r\n  }\r\n  resetCanvas () {\r\n    switch (this.linkerType) {\r\n      case 'straight':\r\n        let width = Math.abs(this.src.position.x - this.dest.position.x) + 2 * this.padding\r\n        let height = Math.abs(this.src.position.y - this.dest.position.y) + 2 * this.padding\r\n\r\n        this.canvas.width = this.el.width = this.width = width\r\n        this.el.style.width = this.canvas.style.width = width + 'px'\r\n        this.canvas.height = this.el.height = this.height = height\r\n        this.el.style.height = this.canvas.style.height = height + 'px'\r\n\r\n        let x, y\r\n        if ((this.dest.position.x - this.src.position.x) >= 0) {\r\n          x = this.src.position.x - this.padding\r\n        }\r\n        else {\r\n          x = this.dest.position.x - this.padding\r\n        }\r\n        if ((this.dest.position.y - this.src.position.y) >= 0) {\r\n          y = this.src.position.y - this.padding\r\n        }\r\n        else {\r\n          y = this.dest.position.y - this.padding\r\n        }\r\n        this.setPosition(x, y)\r\n        break;\r\n      case 'bezier':\r\n        break;\r\n    }\r\n  }\r\n  resetSrc (src) {\r\n    this.src = src\r\n    this.resetCanvas()\r\n  }\r\n  resetDest (dest) {\r\n    this.dest = dest\r\n    this.resetCanvas()\r\n  }\r\n  setPosition (x, y) {\r\n    this.left = x\r\n    this.top = y\r\n    this.el.style.left = x + 'px'\r\n    this.el.style.top = y + 'px'\r\n  }\r\n  append () {\r\n    let parent = document.getElementById('designer_canvas')\r\n    let sibling = document.getElementById('shape_controls')\r\n\r\n    parent.insertBefore(this.el, sibling)\r\n  }\r\n  remove () {\r\n    let parent = document.getElementById('designer_canvas')\r\n    parent.removeChild(this.el)\r\n  }\r\n  resetDrawStyle (context) {\r\n    context.strokeStyle = this.drawStyle.strokeStyle\r\n    context.lineWidth = this.drawStyle.lineWidth\r\n    context.setLineDash(this.drawStyle.lineDash)\r\n  }\r\n  calcDrawingBeginEndPoints () {\r\n    if ((this.dest.position.x - this.src.position.x) >= 0) {\r\n      this.drawBeginPosition.x = this.padding\r\n      this.drawEndPosition.x = this.width - this.padding\r\n    }\r\n    else {\r\n      this.drawBeginPosition.x = this.width - this.padding\r\n      this.drawEndPosition.x = this.padding\r\n    }\r\n    if ((this.dest.position.y - this.src.position.y) >= 0) {\r\n      this.drawBeginPosition.y = this.padding\r\n      this.drawEndPosition.y = this.height - this.padding\r\n    }\r\n    else {\r\n      this.drawBeginPosition.y = this.height - this.padding\r\n      this.drawEndPosition.y = this.padding\r\n    }\r\n  }\r\n  calcJudgingBeginEndPoints () {\r\n    let x1, x2, y1, y2\r\n    if ((this.dest.position.x - this.src.position.x) >= 0) {\r\n      x1 = this.left + this.padding\r\n      x2 = this.left + this.width - this.padding\r\n    }\r\n    else {\r\n      x1 = this.left + this.width - this.padding\r\n      x2 = this.left + this.padding\r\n    }\r\n    if ((this.dest.position.y - this.src.position.y) >= 0) {\r\n      y1 = this.top + this.padding\r\n      y2 = this.top + this.height - this.padding\r\n    }\r\n    else {\r\n      y1 = this.top + this.height - this.padding\r\n      y2 = this.top + this.padding\r\n    }\r\n    return [ x1, y1, x2, y2 ]\r\n  }\r\n  clearCanvas () {\r\n    this.canvas.width = this.width\r\n  }\r\n  calcArrowAngle () {\r\n    let angle\r\n    switch (this.linkerType) {\r\n      case 'straight':\r\n        let offsetX = this.dest.position.x - this.src.position.x\r\n        let offsetY = this.dest.position.y - this.src.position.y\r\n        if (offsetY === 0) {\r\n          angle = (offsetX >= 0) ? Math.PI / 2 : - Math.PI / 2\r\n        }\r\n        else if (offsetY < 0) {\r\n          angle = Math.atan(offsetX / -offsetY)\r\n        }\r\n        else {\r\n          angle = Math.PI - Math.atan(offsetX / offsetY)\r\n        }\r\n        break;\r\n      case 'bezier':\r\n        break;\r\n    }\r\n    return angle\r\n  }\r\n  drawArrow (angle, context) {\r\n    context.translate(this.drawEndPosition.x, this.drawEndPosition.y)\r\n    context.rotate(angle)\r\n    context.beginPath()\r\n    context.moveTo(0, 0)\r\n    context.lineTo(5, 14)\r\n    context.lineTo(-5, 14)\r\n    context.fillStyle = '#000000'\r\n    context.fill()\r\n    context.rotate(-angle)\r\n    context.translate(-this.drawEndPosition.x, -this.drawEndPosition.y)\r\n  }\r\n  drawReferMark (end, context) {\r\n    let position\r\n    if (end === 'src') {\r\n      position = {\r\n        x: this.drawBeginPosition.x,\r\n        y: this.drawBeginPosition.y\r\n      }\r\n    }\r\n    else {\r\n      position = {\r\n        x: this.drawEndPosition.x,\r\n        y: this.drawEndPosition.y\r\n      }\r\n    }\r\n    context.beginPath()\r\n    context.arc(position.x, position.y, this.padding, 0, 2 * Math.PI)\r\n    context.fillStyle = colors.lineArrowHightlight\r\n    context.fill()\r\n  }\r\n  drawLineBody (context) {\r\n    switch (this.linkerType) {\r\n      case 'straight':\r\n        context.beginPath()\r\n        context.moveTo(this.drawBeginPosition.x, this.drawBeginPosition.y)\r\n        context.lineTo(this.drawEndPosition.x, this.drawEndPosition.y)\r\n        context.stroke()\r\n        break;\r\n      case 'bezier':\r\n        context.beginPath()\r\n        context.moveTo(this.drawBeginPosition.x, this.drawBeginPosition.y)\r\n        context.bezierCurveTo(this.bezierControlPoints[0].x, this.bezierControlPoints[0].y,\r\n          this.bezierControlPoints[1].x, this.bezierControlPoints[1].y,\r\n          this.drawEndPosition.x, this.drawEndPosition.y)\r\n        context.stroke()\r\n        context.beginPath()\r\n        break;\r\n    }\r\n  }\r\n  draw (referMark, isSelected, drawContext) {\r\n    let context = (typeof drawContext === 'undefined' || drawContext === null )\r\n      ? this.context : drawContext\r\n\r\n    if (context === this.context) {\r\n      this.clearCanvas()\r\n    }\r\n    this.resetDrawStyle(context)\r\n    this.calcDrawingBeginEndPoints()\r\n\r\n    if (referMark) {\r\n      this.drawReferMark(referMark, context)\r\n    }\r\n\r\n    this.drawLineBody(context)\r\n    if (isSelected) {\r\n      context.strokeStyle = colors.lineBodyHighlight\r\n      context.lineWidth = 6\r\n      this.drawLineBody(context)\r\n    }\r\n\r\n    this.drawArrow(this.calcArrowAngle(), context)\r\n  }\r\n  drawOnOtherCanvas (context, left, top) {\r\n    context.translate(left, top)\r\n    this.draw(null, false, context)\r\n    context.translate(-left, -top)\r\n  }\r\n  // Judge whether a point is in the rectangle area which is covered by\r\n  isPointInLineRectangle (x, y) {\r\n    let [ x1, y1, x2, y2 ] = this.calcJudgingBeginEndPoints()\r\n    let xBig = (x1 >= x2) ? x1 : x2\r\n    let xSmall = (xBig === x2) ? x1 : x2\r\n    let yBig = (y1 >= y2) ? y1 : y2\r\n    let ySmall = (yBig === y2) ? y1 : y2\r\n\r\n    // The calculated result of point might not be accurate,\r\n    // it will effect the judgement when x1 === x2 or y1 === y2.\r\n    // So, it requires a small enough number to help.\r\n    return (x <= xBig + delta && x >= xSmall - delta\r\n      && y <= yBig + delta && y >= ySmall - delta)\r\n  }\r\n  isInLine (x, y, endExcluded) {\r\n    if (!endExcluded) {\r\n      if (this.isInLineEnd(x, y)) {\r\n        return false\r\n      }\r\n    }\r\n    let [ x1, y1, x2, y2 ] = this.calcJudgingBeginEndPoints()\r\n    switch  (this.linkerType) {\r\n      case 'straight':\r\n        // Calculate the distance from point to line.\r\n        let distance = calcPointToLineDistance([x, y], [x1, y1, x2, y2])\r\n        let foot = calcPointToLineFoot([x, y], [x1, y1, x2, y2])\r\n\r\n        return (distance <= lineAreaWidth && distance >= -lineAreaWidth\r\n          && this.isPointInLineRectangle(foot.x, foot.y))\r\n\r\n        break;\r\n      case 'bezier':\r\n        break;\r\n    }\r\n  }\r\n  isInLineEnd (x, y) {\r\n    let [ x1, y1, x2, y2 ] = this.calcJudgingBeginEndPoints()\r\n    let distanceSrc = calcPointToPointDistance([x, y], [x1, y1])\r\n    let distanceDest = calcPointToPointDistance([x, y], [x2, y2])\r\n\r\n    if (distanceDest <= lineAreaWidth) {\r\n     return 'lineDest'\r\n    }\r\n    else if (distanceSrc <= lineAreaWidth) {\r\n      return 'lineSrc'\r\n    }\r\n    return null\r\n  }\r\n  judgeInShape (x, y) {\r\n    let type = this.isInLineEnd(x, y)\r\n    if (!type) {\r\n      type = this.isInLine(x, y, true) ? 'lineBody' : 'empty'\r\n    }\r\n    return { shape: this, type: type }\r\n  }\r\n  callShapesToDetach () {\r\n    if (this.src.shape) {\r\n      this.src.shape.deleteLine(this)\r\n    }\r\n    if (this.dest.shape) {\r\n      this.dest.shape.deleteLine(this)\r\n    }\r\n  }\r\n}\r\n\r\nexport default Line\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shapes/line.js","import {generalizeLine, generalizePoint} from \"./common\";\r\n\r\nfunction calcPointToPointDistance (pointA, pointB) {\r\n  let [x1, y1, x2, y2] = [pointA[0], pointA[1], pointB[0], pointB[1]]\r\n  return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2))\r\n}\r\n\r\nfunction calcPointToLineDistance (point, line) {\r\n  let [x, y] = generalizePoint(point)\r\n  let [A, B, C] = generalizeLine(line)\r\n  return (A * x + B * y + C) / Math.sqrt(A * A + B * B)\r\n}\r\n\r\nexport {calcPointToPointDistance, calcPointToLineDistance}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/calculation/calcDistance.js","function backgroundDraw(el, backgroundWidth, backgroundHeight, backgroundSpacing) {\r\n  if (!el) { return }\r\n\r\n  let context = el.getContext('2d')\r\n  let width = backgroundWidth ? backgroundWidth : 1250\r\n  let height = backgroundHeight ? backgroundHeight : 1500\r\n  let spacing = backgroundSpacing ? backgroundSpacing : 15\r\n\r\n  el.width = width\r\n  el.height = height\r\n\r\n  let countX = Math.ceil(width / spacing)\r\n  let countY = Math.ceil(height / spacing)\r\n\r\n  context.strokeStyle = '#dcdcdc'\r\n  for (let i = 0; i < countX; i++) {\r\n    context.beginPath()\r\n    context.moveTo(i * spacing, 0)\r\n    if (i % 5 === 0)\r\n      context.lineWidth = 2\r\n    else context.lineWidth = 1\r\n    context.lineTo(i * spacing, height)\r\n    context.stroke()\r\n  }\r\n  for (let i = 0; i < countY; i++) {\r\n    context.beginPath()\r\n    context.moveTo(0, i * spacing)\r\n    if (i % 5 === 0)\r\n      context.lineWidth = 2\r\n    else context.lineWidth = 1\r\n    context.lineTo(width, i * spacing)\r\n    context.stroke()\r\n  }\r\n}\r\n\r\nexport default backgroundDraw\n\n\n// WEBPACK FOOTER //\n// ./src/draw/background.js","import {dragNewComponentMouseDown, dragNewComponetMouseMove, dragNewComponetMouseUp} from './dragNewComponent'\r\nimport {shapeEventOnMouseMove, shapeEventOnMouseDown, shapeEventOnMouseUp, shapeEventOnDblClick, shapeEventOnKeyDown} from './shapeEvent'\r\nimport {toolbarEventOnMouseDown} from '../../toolbar/toolbarEvent'\r\n\r\nlet eventList = ['mousedown', 'mousemove', 'mouseup', 'dblclick', 'keydown']\r\n\r\nfunction getEventHandlers (eventType, isToolbarEnabled) {\r\n  switch (eventType) {\r\n    case 'mousedown':\r\n      if (isToolbarEnabled) {\r\n        return [dragNewComponentMouseDown, shapeEventOnMouseDown, toolbarEventOnMouseDown]\r\n      }\r\n      else {\r\n        return [dragNewComponentMouseDown, shapeEventOnMouseDown]\r\n      }\r\n    case 'mousemove': return [dragNewComponetMouseMove, shapeEventOnMouseMove]\r\n    case 'mouseup': return [dragNewComponetMouseUp, shapeEventOnMouseUp]\r\n    case 'dblclick': return [shapeEventOnDblClick]\r\n    case 'keydown': return [shapeEventOnKeyDown]\r\n  }\r\n}\r\n\r\nexport {eventList, getEventHandlers}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/events/index.js","import {createNewShape} from '../createNewShape'\r\nimport {calcPositionInCanvas} from '../calculation/calcPosition'\r\nimport getUIParameters from '../../common/getUIParameters'\r\n\r\nlet currentShape = null\r\nlet mouseDown = false\r\n\r\nfunction dragNewComponentMouseDown (event, shapeList) {\r\n  if (!event.target.classList.contains('component-item')\r\n    || currentShape)\r\n    return\r\n  let shapeName = event.target.parentNode.getAttribute('shapename')\r\n\r\n  currentShape = createNewShape(shapeName)\r\n  currentShape.el.style.position = 'fixed'\r\n  currentShape.setPosition(event.clientX - currentShape.width / 2, event.clientY - currentShape.height / 2)\r\n  currentShape.draw()\r\n  currentShape.append()\r\n\r\n  mouseDown = true\r\n}\r\n\r\nfunction dragNewComponetMouseMove (event, shapeList) {\r\n  if (currentShape && mouseDown) {\r\n    currentShape.setPosition(event.clientX - currentShape.width / 2, event.clientY - currentShape.height / 2)\r\n  }\r\n}\r\n\r\nfunction dragNewComponetMouseUp (event, shapeList) {\r\n  mouseDown = false\r\n\r\n  if (currentShape && event.pageX <= getUIParameters().canvasLeft) {\r\n    currentShape.remove()\r\n  }\r\n  else if (currentShape) {\r\n    //let left = (event.pageX - currentShape.width / 2 - toolbarWidth) - (padding - drawLayout.scrollLeft)\r\n    //let top = (event.pageY - currentShape.height / 2 - headerHeight) - (padding - drawLayout.scrollTop)\r\n    let position = calcPositionInCanvas(event.pageX, event.pageY)\r\n    let left = position.x - currentShape.width / 2\r\n    let top = position.y - currentShape.height / 2\r\n\r\n    currentShape.setPosition(left, top)\r\n    currentShape.el.style.position = 'absolute'\r\n    shapeList.push(currentShape)\r\n  }\r\n\r\n  currentShape = null\r\n}\r\n\r\nexport {dragNewComponentMouseDown, dragNewComponetMouseMove, dragNewComponetMouseUp}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/events/dragNewComponent.js","import {calcPositionInCanvas} from '../calculation/calcPosition'\r\nimport {createNewLine} from '../createNewShape'\r\nimport eventCommon from './common'\r\n\r\nlet clickOffset = {\r\n  x: 0,\r\n  y: 0\r\n}\r\nlet activeDirection = null\r\nlet resizeData = {\r\n  beginX: 0,\r\n  beginY: 0,\r\n  originWidth: 0,\r\n  originHeight: 0,\r\n  originLeft: 0,\r\n  originTop: 0\r\n}\r\n\r\nfunction clearLineData () {\r\n  eventCommon.lineData.activeLine = null\r\n  eventCommon.lineData.isActive = false\r\n  eventCommon.lineData.src = {\r\n    position: null,\r\n    referPercent: null,\r\n    referPosition: null,\r\n    shape: null\r\n  }\r\n  eventCommon.lineData.dest = {\r\n    position: null,\r\n    referPercent: null,\r\n    referPosition: null,\r\n    shape: null\r\n  }\r\n  eventCommon.lineData.needDeleted = false\r\n}\r\n\r\nfunction redrawActiveLine (shape, reference, mark) {\r\n  if (eventCommon.lineData.type === 'toSrc') {\r\n    let src = {\r\n      shape: shape,\r\n      position: reference.position\r\n    }\r\n    eventCommon.lineData.src = {\r\n      shape: shape,\r\n      position: reference.position,\r\n      referPosition: (reference.referPosition) ? reference.referPosition : null,\r\n      referPercent: (reference.referPercent) ? reference.referPercent : null\r\n    }\r\n    eventCommon.lineData.activeLine.resetSrc(src)\r\n  }\r\n  else {\r\n    let dest = {\r\n      shape: shape,\r\n      position: reference.position\r\n    }\r\n    eventCommon.lineData.dest = {\r\n      shape: shape,\r\n      position: reference.position,\r\n      referPosition: (typeof reference.referPosition !== 'undefined') ? reference.referPosition : null,\r\n      referPercent: (typeof reference.referPercent !== 'undefined') ? reference.referPercent : null\r\n    }\r\n    eventCommon.lineData.activeLine.resetDest(dest)\r\n  }\r\n  eventCommon.lineData.activeLine.draw(mark, !!eventCommon.lineData.selectedLine)\r\n}\r\n\r\nfunction shapeEventOnMouseDown (event, shapeList) {\r\n  let judgeResult = eventCommon.judgeEventAt(event, shapeList)\r\n  if (!judgeResult) {\r\n    eventCommon.shapeController.setVisibility(false)\r\n    return\r\n  }\r\n\r\n  let shape = judgeResult.shape, type = judgeResult.type\r\n  let position = calcPositionInCanvas(event.pageX, event.pageY)\r\n  switch (type) {\r\n    case 'lineBody':\r\n      if (eventCommon.lineData.selectedLine) {\r\n        eventCommon.lineData.selectedLine.draw()\r\n      }\r\n      eventCommon.lineData.selectedLine = shape\r\n      shape.draw(null, true)\r\n      eventCommon.selectedShape = null\r\n      eventCommon.shapeController.setVisibility(false)\r\n      break;\r\n    case 'lineDest':\r\n    case 'lineSrc':\r\n      eventCommon.selectedShape = null\r\n      eventCommon.shapeController.setVisibility(false)\r\n      if (eventCommon.lineData.selectedLine) {\r\n        eventCommon.lineData.selectedLine.draw()\r\n      }\r\n      eventCommon.lineData.selectedLine = shape\r\n      shape.draw(null, true)\r\n      eventCommon.lineData.activeLine = shape\r\n      eventCommon.lineData.isActive = true\r\n      let reference\r\n      if (shape.dest.shape) {\r\n        reference = shape.dest.shape.getLineData(shape)\r\n        eventCommon.lineData.dest = {\r\n          shape: shape.dest.shape,\r\n          referPosition: reference.referPosition,\r\n          referPercent: reference.referPercent,\r\n          position: shape.dest.position\r\n        }\r\n      }\r\n      if (shape.src.shape) {\r\n        reference = shape.src.shape.getLineData(shape)\r\n        eventCommon.lineData.src = {\r\n          shape: shape.src.shape,\r\n          referPosition: reference.referPosition,\r\n          referPercent: reference.referPercent,\r\n          position: shape.src.position\r\n        }\r\n      }\r\n      eventCommon.lineData.src.position = shape.src.position\r\n\r\n      if (type === 'lineDest') {\r\n        if (shape.dest.shape) {\r\n          shape.dest.shape.deleteLine(shape)\r\n        }\r\n        eventCommon.lineData.type = 'toDest'\r\n      }\r\n      else {\r\n        if (shape.src.shape) {\r\n          shape.src.shape.deleteLine(shape)\r\n        }\r\n        eventCommon.lineData.type = 'toSrc'\r\n      }\r\n      break;\r\n    case 'shapeBody':\r\n      eventCommon.shapeController.reset(shape.left, shape.top, shape.width, shape.height)\r\n      eventCommon.shapeController.setVisibility(true)\r\n      eventCommon.shapeController.draw(shape.width, shape.height)\r\n\r\n      eventCommon.activeShape = shape\r\n      clickOffset.x = event.pageX - shape.left\r\n      clickOffset.y = event.pageY - shape.top\r\n\r\n      if (eventCommon.lineData.selectedLine) {\r\n        eventCommon.lineData.selectedLine.draw()\r\n        eventCommon.lineData.selectedLine = null\r\n      }\r\n      event.preventDefault()\r\n      break;\r\n    case 'shapeLineArea':\r\n      let lineReference = shape.getLineReference(position.x, position.y)\r\n\r\n      eventCommon.lineData.src = {\r\n        position: lineReference.position,\r\n        referPosition: lineReference.referPosition,\r\n        referPercent: lineReference.referPercent,\r\n        shape: shape\r\n      }\r\n      eventCommon.lineData.isActive = true\r\n      eventCommon.lineData.type = 'new'\r\n      eventCommon.lineData.needDeleted = true\r\n\r\n       if (eventCommon.lineData.selectedLine) {\r\n        eventCommon.lineData.selectedLine.draw()\r\n        eventCommon.lineData.selectedLine = null\r\n      }\r\n      break;\r\n    case 'controller':\r\n      activeDirection = event.target.getAttribute('resizedir')\r\n      resizeData.beginX = event.pageX\r\n      resizeData.beginY = event.pageY\r\n      resizeData.originWidth = eventCommon.selectedShape.width\r\n      resizeData.originHeight = eventCommon.selectedShape.height\r\n      resizeData.originLeft = eventCommon.selectedShape.left\r\n      resizeData.originTop = eventCommon.selectedShape.top\r\n      break;\r\n    case 'tool': break;\r\n    case 'empty':\r\n    default:\r\n      if (eventCommon.lineData.selectedLine) {\r\n        eventCommon.lineData.selectedLine.draw()\r\n        eventCommon.lineData.selectedLine = null\r\n      }\r\n      eventCommon.selectedShape = null\r\n      eventCommon.shapeController.setVisibility(false)\r\n  }\r\n}\r\n\r\nfunction shapeEventOnMouseMove (event, shapeList) {\r\n  if (eventCommon.lineData.isActive) {\r\n    let src, dest\r\n    if (!eventCommon.lineData.activeLine) {\r\n      src = {\r\n        shape: eventCommon.lineData.src.shape,\r\n        position: eventCommon.lineData.src.position\r\n      }\r\n      dest = {\r\n        shape: null,\r\n        position: calcPositionInCanvas(event.pageX, event.pageY)\r\n      }\r\n\r\n      eventCommon.lineData.activeLine = createNewLine(src, dest)\r\n      eventCommon.lineData.activeLine.draw()\r\n      eventCommon.lineData.activeLine.append()\r\n      eventCommon.lineData.activeLine.el.style.cursor = 'move'\r\n    }\r\n    else {\r\n      eventCommon.lineData.needDeleted = false\r\n      let position = calcPositionInCanvas(event.pageX, event.pageY)\r\n      let judgeResult = eventCommon.judgeEventAt(event, shapeList)\r\n      if (!judgeResult) {\r\n        redrawActiveLine(null, {position: position})\r\n        return\r\n      }\r\n\r\n      let shape = judgeResult.shape\r\n      switch (judgeResult.type) {\r\n        case 'shapeBody':\r\n        case 'shapeLineArea':\r\n          let fromShapeId\r\n          if (eventCommon.lineData.type === 'toSrc') {\r\n            fromShapeId = (eventCommon.lineData.dest.shape) ? eventCommon.lineData.dest.shape.id : null\r\n          }\r\n          else {\r\n            fromShapeId = (eventCommon.lineData.src.shape) ? eventCommon.lineData.src.shape.id : null\r\n          }\r\n          if (fromShapeId === shape.id) {\r\n            eventCommon.lineData.needDeleted = true\r\n            redrawActiveLine(null, {position: position})\r\n          }\r\n          else {\r\n            let reference = shape.getLineReference(position.x, position.y)\r\n            if (!reference) {\r\n              return\r\n            }\r\n            let mark = (eventCommon.lineData.type === 'toSrc') ? 'src' : 'dest'\r\n            redrawActiveLine(shape, reference, mark)\r\n          }\r\n          break;\r\n        default:\r\n          redrawActiveLine(null, {position: position})\r\n      }\r\n    }\r\n  }\r\n  else if (activeDirection) {\r\n    let width, height, offsetX, offsetY\r\n    switch (activeDirection) {\r\n      case 'nw':\r\n        width = resizeData.beginX - event.pageX + resizeData.originWidth\r\n        height = resizeData.beginY - event.pageY + resizeData.originHeight\r\n        width = (width >= 60) ? width : 60\r\n        height = (height >= 45) ? height : 45\r\n        offsetX = width - resizeData.originWidth\r\n        offsetY = height - resizeData.originHeight\r\n\r\n        eventCommon.selectedShape.setSize(width, height)\r\n        eventCommon.selectedShape.setPosition(resizeData.originLeft - offsetX, resizeData.originTop - offsetY)\r\n        eventCommon.shapeController.reset(eventCommon.selectedShape.left, eventCommon.selectedShape.top, width, height)\r\n        break;\r\n      case 'ne':\r\n        width = event.pageX - resizeData.beginX + resizeData.originWidth\r\n        height = resizeData.beginY - event.pageY + resizeData.originHeight\r\n        width = (width >= 60) ? width : 60\r\n        height = (height >= 45) ? height : 45\r\n        offsetX = width - resizeData.originWidth\r\n        offsetY = height - resizeData.originHeight\r\n\r\n        eventCommon.selectedShape.setSize(width, height)\r\n        eventCommon.selectedShape.setPosition(resizeData.originLeft, resizeData.originTop - offsetY)\r\n        eventCommon.shapeController.reset(eventCommon.selectedShape.left, eventCommon.selectedShape.top, width, height)\r\n        break;\r\n      case 'se':\r\n        width = event.pageX - resizeData.beginX + resizeData.originWidth\r\n        height = event.pageY - resizeData.beginY + resizeData.originHeight\r\n        width = (width >= 60) ? width : 60\r\n        height = (height >= 45) ? height : 45\r\n\r\n        eventCommon.selectedShape.setSize(width, height)\r\n        eventCommon.shapeController.reset(eventCommon.selectedShape.left, eventCommon.selectedShape.top, width, height)\r\n        break;\r\n      case 'sw':\r\n        width = resizeData.beginX - event.pageX + resizeData.originWidth\r\n        height = event.pageY - resizeData.beginY + resizeData.originHeight\r\n        width = (width >= 60) ? width : 60\r\n        height = (height >= 45) ? height : 45\r\n        offsetX = width - resizeData.originWidth\r\n        offsetY = height - resizeData.originHeight\r\n\r\n        eventCommon.selectedShape.setSize(width, height)\r\n        eventCommon.selectedShape.setPosition(resizeData.originLeft - offsetX, resizeData.originTop)\r\n        eventCommon.shapeController.reset(eventCommon.selectedShape.left, eventCommon.selectedShape.top, width, height)\r\n        break;\r\n    }\r\n    eventCommon.selectedShape.draw()\r\n    eventCommon.selectedShape.resetLinesPosition()\r\n    eventCommon.shapeController.draw(width, height)\r\n  }\r\n  else if (eventCommon.activeShape) {\r\n    let x = event.pageX - clickOffset.x\r\n    let y = event.pageY - clickOffset.y\r\n    eventCommon.activeShape.setPosition(x, y)\r\n    eventCommon.shapeController.reset(x, y, eventCommon.activeShape.width, eventCommon.activeShape.height)\r\n    eventCommon.activeShape.resetLinesPosition()\r\n  }\r\n  else {\r\n    let judgeResult = eventCommon.judgeEventAt(event, shapeList)\r\n    if (!judgeResult) { return }\r\n    let shape = judgeResult.shape\r\n    let el = (judgeResult.topElement || (shape && shape.el))\r\n    if (!el) { return }\r\n    switch (judgeResult.type) {\r\n      case 'lineBody':\r\n        el.style.cursor = 'pointer'\r\n        break;\r\n      case 'lineDest':\r\n      case 'lineSrc':\r\n        el.style.cursor = 'move'\r\n        break;\r\n      case 'shapeBody':\r\n        el.style.cursor = 'move'\r\n        break;\r\n      case 'shapeLineArea':\r\n        el.style.cursor = 'crosshair'\r\n        break;\r\n      default:\r\n        el.style.cursor = 'default'\r\n    }\r\n  }\r\n}\r\n\r\nfunction shapeEventOnMouseUp (event, shapeList) {\r\n  if (eventCommon.lineData.isActive) {\r\n    let line = eventCommon.lineData.activeLine\r\n    if (!line) { return }\r\n    switch (eventCommon.lineData.type) {\r\n      case 'new':\r\n        if (eventCommon.lineData.needDeleted) {\r\n          line.destruct()\r\n        }\r\n        else {\r\n          if (line.src.shape) {\r\n            line.src.shape.addLine(line, 'src', eventCommon.lineData.src.referPosition, eventCommon.lineData.src.referPercent)\r\n          }\r\n          if (line.dest.shape) {\r\n            line.dest.shape.addLine(line, 'dest', eventCommon.lineData.dest.referPosition, eventCommon.lineData.dest.referPercent)\r\n          }\r\n          shapeList.push(line)\r\n        }\r\n        break;\r\n      case 'toDest':\r\n        if (line.dest.shape) {\r\n          line.dest.shape.addLine(line, 'dest', eventCommon.lineData.dest.referPosition, eventCommon.lineData.dest.referPercent)\r\n        }\r\n        break;\r\n      case 'toSrc':\r\n        if (line.src.shape) {\r\n          line.src.shape.addLine(line, 'src', eventCommon.lineData.src.referPosition, eventCommon.lineData.src.referPercent)\r\n        }\r\n        break;\r\n    }\r\n    // Remove the line mark.\r\n    line.draw(null, !!eventCommon.lineData.selectedLine)\r\n    clearLineData()\r\n  }\r\n  else if (eventCommon.activeShape) {\r\n    eventCommon.selectedShape = eventCommon.activeShape\r\n    eventCommon.activeShape = null\r\n  }\r\n  else if (activeDirection) {\r\n    activeDirection = null\r\n  }\r\n}\r\n\r\nfunction shapeEventOnDblClick (event, shapeList) {\r\n  let judgeResult = eventCommon.judgeEventAt(event, shapeList)\r\n  if (!judgeResult) { return }\r\n\r\n  switch (judgeResult.type) {\r\n    case 'shapeBody':\r\n      judgeResult.shape.shapeText.focus()\r\n      document.execCommand('selectAll')\r\n      break;\r\n    default:\r\n      eventCommon.shapeController.setVisibility(false)\r\n  }\r\n}\r\n\r\nfunction shapeEventOnKeyDown (event, shapeList) {\r\n  if (event.key === 'Delete') {\r\n    if (eventCommon.selectedShape || eventCommon.activeShape) {\r\n      let shape = (eventCommon.activeShape) ? eventCommon.activeShape : eventCommon.selectedShape\r\n      let isActive = !!eventCommon.activeShape\r\n      eventCommon.shapeController.setVisibility(false)\r\n      eventCommon.deleteShapeInListById(shape.id, shapeList)\r\n\r\n      if (isActive) {\r\n        eventCommon.activeShape = null\r\n      }\r\n      eventCommon.selectedShape = null\r\n    }\r\n    else if (eventCommon.lineData.isActive || eventCommon.lineData.selectedLine) {\r\n      let line = (eventCommon.lineData.isActive) ? eventCommon.lineData.activeLine : eventCommon.lineData.selectedLine\r\n      eventCommon.deleteShapeInListById(line.id, shapeList)\r\n      clearLineData()\r\n    }\r\n  }\r\n}\r\n\r\nexport {shapeEventOnMouseMove, shapeEventOnMouseDown, shapeEventOnMouseUp,\r\n  shapeEventOnDblClick, shapeEventOnKeyDown}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/events/shapeEvent.js","function controllerDraw(el, width, height, margin) {\r\n  if (!el) { return }\r\n\r\n  el.width = width\r\n  el.height = height\r\n  let context = el.getContext('2d')\r\n\r\n  context.strokeStyle = '#883333'\r\n  context.lineWidth = 1\r\n  context.beginPath()\r\n  context.rect(margin, margin, width - 2 * margin, height - 2 * margin);\r\n  context.stroke();\r\n}\r\n\r\nexport default controllerDraw\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/draw/controller.js","import {tools} from './toolbarDefaultSetting'\r\nimport eventCommon from '../core/events/common'\r\nimport _ from '../common/util'\r\nimport getToolbar from './toolbar'\r\n\r\nfunction getToolElement (type) {\r\n  return document.getElementById('tool-' + type)\r\n}\r\n\r\nfunction judgeToolType (event) {\r\n  let el = event.target\r\n  let type = el.getAttribute && el.getAttribute('id') ? el.getAttribute('id').slice(5) : null\r\n  if (!type) {\r\n    el = el.parentNode\r\n    type = el.getAttribute && el.getAttribute('id') ? el.getAttribute('id').slice(5) : null\r\n  }\r\n\r\n  if (_.contains(_.properties(tools), type)) { return type }\r\n  else { return null }\r\n}\r\n\r\nfunction simpleToolHandler (type, el, shape) {\r\n  let value\r\n  if (el.getAttribute('disabled') === 'disabled' || !shape) { return }\r\n  if (el.classList.contains('active')) {\r\n    value = tools[type].styleValue[0]\r\n    el.classList.remove('active')\r\n  }\r\n  else {\r\n    value = tools[type].styleValue[1]\r\n    el.classList.add('active')\r\n  }\r\n  shape.setTextareaSingleStyle(tools[type].styleName, value)\r\n}\r\n\r\nfunction toolbarEventOnMouseDown (event, shapeList) {\r\n  let type = judgeToolType(event)\r\n  if (type) {\r\n    let toolElement = getToolElement(type)\r\n    switch (type) {\r\n      case 'undo':\r\n        document.execCommand('undo')\r\n        break;\r\n      case 'redo':\r\n        document.execCommand('redo')\r\n        break;\r\n      case 'bold':\r\n      case 'italic':\r\n      case 'underline':\r\n        simpleToolHandler(type, toolElement, eventCommon.selectedShape)\r\n        break;\r\n    }\r\n  }\r\n  else {\r\n    let shape = eventCommon.activeShape || eventCommon.selectedShape\r\n    if (shape) {\r\n      getToolbar().setToolbarState(shape.getAllStyle())\r\n    }\r\n    else {\r\n      getToolbar().setEmptyToolbarState()\r\n    }\r\n  }\r\n}\r\n\r\nexport {toolbarEventOnMouseDown}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolbarEvent.js","import _ from '../common/util'\r\nimport {tools, toolsGroup, simplyToolTypes} from './toolbarDefaultSetting'\r\n\r\nfunction getToolHtml (type) {\r\n  if (_.contains(simplyToolTypes, type)) {\r\n    return`<div id=\"tool-${type}\" \r\n      class=\"toolbar-button\" \r\n      hint-data=\"${tools[type].hint}\"\r\n      disabled=\"${type !== 'undo' && type !== 'redo' ? 'disabled' : ''}\">\r\n      <i class=\"icon fa ${tools[type].faClass}\"></i>\r\n    </div>`\r\n  }\r\n  switch (type) {\r\n    case 'fontName':\r\n    case 'fontSize':\r\n    case 'fontColor':\r\n    case 'fillStyle':\r\n    case 'strokeStyle':\r\n    case 'lineWidth':\r\n    case 'lineDash':\r\n    case 'linkerType':\r\n    case 'arrowType':\r\n  }\r\n  return ''\r\n}\r\n\r\nfunction createTools (el, enabledTools) {\r\n  el.classList.add('fff-draw-tools')\r\n\r\n  let html = ''\r\n\r\n  for (let i = 0; i < toolsGroup.length; i++) {\r\n    let btnsHtml = ''\r\n    for (let j = 0; j < toolsGroup[i].length; j++) {\r\n      if (_.contains(enabledTools, toolsGroup[i][j])) {\r\n        btnsHtml += getToolHtml(toolsGroup[i][j])\r\n      }\r\n    }\r\n    if (btnsHtml !== '') {\r\n      html += '<div class=\"btn-group\">' + btnsHtml + '</div>'\r\n    }\r\n  }\r\n  el.innerHTML = html\r\n}\r\n\r\nfunction createHint (el) {\r\n\r\n}\r\n\r\nfunction toolUIInit (el, enabledTools, hint) {\r\n  createTools(el, enabledTools)\r\n  if (hint) {\r\n    createHint(el)\r\n  }\r\n}\r\n\r\nexport default toolUIInit\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar/toolsUIInit.js"],"sourceRoot":""}